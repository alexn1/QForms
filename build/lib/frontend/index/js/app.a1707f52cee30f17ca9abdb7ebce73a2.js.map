{"version":3,"sources":["IndexFrontHostApp.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.a1707f52cee30f17ca9abdb7ebce73a2.js","sourcesContent":["class IndexFrontHostApp {\n\n    constructor(data) {\n        console.log('IndexFrontHostApp.constructor', data);\n        this.data = data;\n        this.view = null;\n        this.currentAppFullName = undefined;\n        this.currentAppEnv      = undefined;\n        this.modals = [];\n        this.folderNameTextBox = null;\n        this.folderName = null;\n        this.appName = null;\n    }\n\n    init() {\n        // console.log('IndexFrontHostApp.init');\n        const appInfo = this.data.appInfos[0];\n        this.currentAppFullName = appInfo ? appInfo.fullName : undefined;\n        this.currentAppEnv = appInfo && appInfo.envs[0] ? appInfo.envs[0] : undefined;\n        this.createView(document.querySelector('#root'));\n    }\n\n    createView(root) {\n        this.view = Helper.createReactComponent(root, IndexView, {ctrl: this});\n    }\n\n    getAppItems() {\n        return this.data.appInfos.map(appInfo => ({\n            value: appInfo.fullName,\n            title: appInfo.fullName\n        }));\n    }\n\n    getEnvItems() {\n        // console.log('IndexFrontHostApp.getEnvItems', this.currentAppFullName);\n        if (this.currentAppFullName) {\n            const appInfo = this.getAppInfo(this.currentAppFullName);\n            if (appInfo) return appInfo.envs.map(env => ({value: env, title: env}));\n        }\n        return [];\n    }\n\n    getAppInfo(fullName) {\n        // console.log('IndexFrontHostApp.getAppInfo', fullName);\n        return this.data.appInfos.find(appInfo => appInfo.fullName === fullName);\n    }\n\n    onAppChange = fullName => {\n        console.log('IndexFrontHostApp.onAppChange', fullName);\n        this.currentAppFullName = fullName;\n        const appInfo = this.data.appInfos.find(app => app.fullName === fullName);\n        if (!appInfo) throw new Error(`no appInfo ${fullName}`);\n        // console.log('appInfo:', appInfo);\n        this.currentAppEnv = appInfo.envs[0];\n        this.view.rerender();\n    }\n\n    onEnvChange = env => {\n        console.log('IndexFrontHostApp.onEnvChange', env);\n        this.currentAppEnv = env;\n    }\n\n    run = e => {\n        if (this.currentAppFullName) {\n            const href = `viewer/${this.currentAppFullName}/${this.currentAppEnv}/`;\n            console.log('href:', href);\n            window.location.href = href;\n        }\n    }\n\n    edit = e => {\n        if (this.currentAppFullName) {\n            const href = `editor/${this.currentAppFullName}/${this.currentAppEnv}/`;\n            console.log('href:', href);\n            window.location.href = href;\n        }\n    }\n\n    btnCreate_Click = async e => {\n        this.modals.push({id: 1});\n        await this.view.rerender();\n        this.folderNameTextBox.getInput().focus();\n    }\n\n    async createApp(folderName, appName) {\n        const data = await FrontHostApp.doHttpRequest({\n            action: 'new',\n            folder: folderName,\n            name  : appName\n        });\n        console.log('data:', data);\n        if (data.appInfos) {\n            this.data.appInfos = data.appInfos;\n            this.currentAppFullName = `${folderName}/${appName}`;\n            this.view.rerender();\n        }\n    }\n\n    closeModal = () => {\n        console.log('IndexFrontHostApp.closeModal');\n        this.modals.pop();\n        this.view.rerender();\n    }\n    onFolderNameCreate = textBox => {\n        console.log('IndexFrontHostApp.onFolderNameCreate');\n        this.folderNameTextBox = textBox;\n    }\n    onFolderNameChange = folderName => {\n        // console.log('IndexFrontHostApp.onFolderNameChange', folderName);\n        this.folderName = folderName;\n    }\n    onAppNameChange = appName => {\n        this.appName = appName;\n    }\n    onCreateClick = async e => {\n        console.log('IndexFrontHostApp.onCreateClick');\n        console.log(this.folderName, this.appName);\n        this.closeModal();\n        await this.createApp(this.folderName, this.appName);\n    }\n}\n"]}