<!DOCTYPE html>
<html>
<head>
    <!-- <%=version%> -->
    <meta charset="utf-8"/>
    <title>QForms v<%=version%></title>
    <!-- EventEmitter -->
    <script src="common/lib/EventEmitter/EventEmitter.min.js"></script>
    <!-- react -->
    <script src="common/lib/react/react.development.js"></script>
    <script src="common/lib/react/react-dom.development.js"></script>
    <!-- jquery -->
    <script src="common/lib/jquery/jquery-2.1.4.min.js"></script>
    <!-- bootstrap -->
    <link href="common/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="common/lib/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <script src="common/lib/bootstrap/js/bootstrap.min.js"></script>
    <!-- qforms jsx css -->
    <link rel="stylesheet" href="common/jsx/all.css"/>
    <!-- qforms -->
    <!--    <link rel="stylesheet" href="common/class/all.css"/>-->
    <script src="common/class/all.js"></script>
    <link rel="stylesheet" href="home/class/all.css"/>
    <script src="home/class/all.js"></script>
    <!-- jsx js -->
    <script src="common/jsx/ReactComponent/ReactComponent.js"></script>
    <script src="common/jsx/widget/Button/Button.js"></script>
    <script src="common/jsx/view/AppView/AppView.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // console.log('app/view.ejs DOMContentLoaded');
            const data = <%-JSON.stringify(appInfos.map(appInfo => ({
                fullName: appInfo.fullName,
                envs: appInfo.envs
            })), null, 4)%>;


            Helper.createReactComponent(document.querySelector('#root'), AppView, {data});

            new HomeController(data).init();



        });
    </script>
</head>
<body>
<div id="root"></div>
<div class="container" style="background-color: #eee;">
    <div class="row" style="margin: 50px 0;">
        <div class="col-md-offset-2 col-md-6
                    col-sm-offset-1 col-sm-6
                    col-xs-8">
            <select id="lbApp"  size="15" style="width: 100%;">
                <% appInfos.forEach((appInfo) => {
                    %><option value="<%=appInfo.fullName%>"><%=appInfo.fullName%></option><%='\n'%><%
                }); %>
            </select>
        </div>
        <div class="col-md-2
                    col-sm-3
                    col-xs-4">
            <div class="form-group">
                <select id="ddEnv" class="form-control">
                    <option value="local">local</option>
                </select>
            </div>
            <button id="btnRun" class="btn btn-primary btn-block">Run</button>
            <% if (hostApp.nodeEnv === 'development') { %>
                <button id="btnEdit" class="btn btn-default btn-block">Edit</button>
                <button id="btnCreate" class="btn btn-default btn-block">New...</button>
            <% } %>
        </div>
    </div>
</div>
</body>
</html>
