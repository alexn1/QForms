function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ActionList extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onClick",async e=>{console.log("ActionList.onClick",e),await this.props.onClick(e.dataset.action)}),this.state={item:null}}render(){return React.createElement(DropdownButton,{title:"Actions",onClick:this.onClick,actions:this.state.item?this.state.item.getActions().map(e=>({name:e.action,title:e.caption})):[]})}}class EditorFrontHostAppView extends ReactComponent{renderDocumentView(t){return t.controller.getDocumentViewClass()?React.createElement(t.controller.getDocumentViewClass(),{onCreate:e=>t.view=e,document:t,ctrl:t.controller}):React.createElement("div",null,"no document view for ",t.controller.constructor.name)}getTabs(){return console.log("EditorFrontHostAppView.getTabs",this.props.ctrl.documents),this.props.ctrl.documents.map(e=>({name:e.controller.model.getFullName(),title:e.controller.model.getFullName(),content:this.renderDocumentView(e)}))}render(){const t=this.props.ctrl;return React.createElement("div",{className:"EditorFrontHostAppView"},React.createElement("div",{className:"EditorFrontHostAppView__sidebar"},React.createElement("div",{className:"tree-bar"},React.createElement("a",{href:t.runAppLink,target:"_blank"},"Run Application"),React.createElement("div",null,React.createElement(ActionList,{onCreate:e=>t.actionList=e,onClick:t.onActionClick}))),React.createElement("div",{className:"frame full"},React.createElement("div",{className:"frame__container"},React.createElement(TreeWidget,{classList:["full"],onCreate:e=>t.treeWidget2=e,items:t.items,onItemSelect:t.onItemSelect2,onItemDoubleClick:t.onItemDoubleClick2,onItemOpen:t.onItemOpen2}))),React.createElement(Tab,{classList:["Tab-blue","full"],tabs:[{name:"properties",title:"Properties",content:React.createElement(PropertyGrid,{onCreate:e=>t.pg=e,onChange:t.onPropertyGrid2Change})}]})),React.createElement("div",{className:"EditorFrontHostAppView__client"},React.createElement(Tab,{classList:["full"],canClose:!0,onTabClose:t.onDocumentClose,onCreate:e=>t.tabWidget=e,tabs:this.getTabs()})),t.modal&&React.createElement(ModalView,{ctrl:t.modal}))}}class ModalView extends ReactComponent{render(){const e=this.props.ctrl;return React.createElement(Modal,null,React.createElement(e.getViewClass(),{ctrl:e}))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ChangeClassView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({class:this.class.getValue()})}),this.class=null}render(){const e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"Change Field Class")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"class"},"Class"),React.createElement(ComboBox,{id:"class",items:[{value:"TextBoxField"},{value:"ComboBoxField"},{value:"TextAreaField"},{value:"LinkField"},{value:"ImageField"},{value:"LabelField"},{value:"DateField"},{value:"TimeField"},{value:"DateTimeField"},{value:"CheckBoxField"},{value:"FileField"},{value:"PhoneField"},{value:"PasswordField"}],value:e.options.fieldCtrl.model.getClassName(),onCreate:e=>this.class=e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"change",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Change"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewActionView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue(),caption:this.caption.getValue()})}),this.name=null,this.caption=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Action")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0})),React.createElement("div",null,React.createElement("label",{htmlFor:"caption"},"Caption"),React.createElement(TextBox,{id:"caption",onCreate:e=>this.caption=e,autocomplete:"off"}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewColumnView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue()})}),this.name=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Column")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"columnName"},"Name"),React.createElement(TextBox,{id:"columnName",onCreate:e=>this.name=e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewDataSourceView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue(),class:this.class.getValue()})}),this.name=null,this.class=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView NewDataSourceView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Data Source")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0})),React.createElement("div",null,React.createElement("label",{htmlFor:"class"},"Class"),React.createElement(ComboBox,{id:"class",items:[{value:"DataSource",title:"DataSource"},{value:"SqlDataSource",title:"SqlDataSource"}],onCreate:e=>this.class=e,value:"SqlDataSource"}))),React.createElement("div",{className:"modal-footer"},React.createElement(Button,{name:"create",classList:["btn","btn-primary"],onClick:this.onCreate},"Create"),React.createElement(Button,{classList:["btn","btn-default"],onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewDatabaseView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({class:this.class.getValue(),name:this.name.getValue(),host:this.host.getValue(),database:this.database.getValue(),user:this.user.getValue(),password:this.password.getValue()})}),this.class=null,this.name=null,this.host=null,this.database=null,this.user=null,this.password=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView NewDatabaseView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Database")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"class"},"Class"),React.createElement(ComboBox,{id:"class",items:[{value:"MySqlDatabase",title:"MySqlDatabase"},{value:"PostgreSqlDatabase",title:"PostgreSqlDatabase"}],onCreate:e=>this.class=e,value:"PostgreSqlDatabase"})),React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",value:"default",onCreate:e=>this.name=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"host"},"Host"),React.createElement(TextBox,{id:"host",value:"localhost",onCreate:e=>this.host=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"database"},"Database"),React.createElement(TextBox,{id:"database",value:"test",onCreate:e=>this.database=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"user"},"User"),React.createElement(TextBox,{id:"user",value:"test",onCreate:e=>this.user=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"user"},"Password"),React.createElement(TextBox,{id:"password",value:"123qwe",onCreate:e=>this.password=e,autocomplete:"off"}))),React.createElement("div",{className:"modal-footer"},React.createElement(Button,{name:"create",classList:["btn","btn-primary"],onClick:this.onCreate},"Create"),React.createElement(Button,{classList:["btn","btn-default"],onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewFieldView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({class:this.class.getValue(),name:this.name.getValue(),caption:this.caption.getValue()||this.name.getValue(),type:this.type.getValue()})}),this.class=null,this.name=null,this.caption=null,this.type=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Field")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"class"},"Class"),React.createElement(ComboBox,{id:"class",items:[{value:"TextBoxField"},{value:"ComboBoxField"},{value:"TextAreaField"},{value:"LinkField"},{value:"ImageField"},{value:"LabelField"},{value:"DateField"},{value:"TimeField"},{value:"DateTimeField"},{value:"CheckBoxField"},{value:"FileField"},{value:"PhoneField"},{value:"PasswordField"}],onCreate:e=>this.class=e})),React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0})),React.createElement("div",null,React.createElement("label",{htmlFor:"caption"},"Caption"),React.createElement(TextBox,{id:"caption",onCreate:e=>this.caption=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"type"},"Type"),React.createElement(ComboBox,{id:"type",value:"",items:[{value:"",title:""},{value:"string",title:"string"},{value:"number",title:"number"},{value:"boolean",title:"boolean"},{value:"object",title:"object"},{value:"date",title:"date"}],onCreate:e=>this.type=e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewFormView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue(),caption:this.caption.getValue(),class:this.class.getValue()})}),this.name=null,this.caption=null,this.class=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Form")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0})),React.createElement("div",null,React.createElement("label",{htmlFor:"caption"},"Caption"),React.createElement(TextBox,{id:"caption",onCreate:e=>this.caption=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"formClass"},"Class"),React.createElement(ComboBox,{id:"formClass",value:"TableForm",items:[{value:"RowForm",title:"RowForm"},{value:"TableForm",title:"TableForm"},{value:"Form",title:"Form"}],onCreate:e=>this.class=e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewFormFromTableView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({page:this.page.getValue(),class:this.class.getValue(),name:this.name.getValue(),caption:this.caption.getValue()})}),this.page=null,this.class=null,this.name=null,this.caption=null}render(){const e=this.props.ctrl,t=e.options.tableController;var a=t.model.parent.parent.pageLinks.map(e=>({value:e.getName(),title:e.getName()}));return console.log("pages:",a),React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Form")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"table"},"Table"),React.createElement(TextBox,{id:"table",disabled:!0,value:t.model.getName()})),React.createElement("div",null,React.createElement("label",{htmlFor:"page"},"Page"),React.createElement(ComboBox,{id:"page",items:a,value:a[a.length-1].value,onCreate:e=>this.page=e})),React.createElement("div",null,React.createElement("label",{htmlFor:"class"},"Form Class"),React.createElement(ComboBox,{id:"class",value:"TableForm",items:[{value:"RowForm",title:"RowForm"},{value:"TableForm",title:"TableForm"}],onCreate:e=>this.class=e})),React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",value:e.options.tableController.model.getName(),onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0})),React.createElement("div",null,React.createElement("label",{htmlFor:"caption"},"Caption"),React.createElement(TextBox,{id:"caption",onCreate:e=>this.caption=e,autocomplete:"off"}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewKeyColumnView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue()})}),this.name=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Key Column")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewPageView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue(),caption:this.caption.getValue(),startup:this.startup.getValue()})}),this.name=null,this.caption=null,this.startup=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Page")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0})),React.createElement("div",null,React.createElement("label",{htmlFor:"caption"},"Caption"),React.createElement(TextBox,{id:"caption",onCreate:e=>this.caption=e,autocomplete:"off"})),React.createElement("div",null,React.createElement("label",{htmlFor:"startup"},"Startup"),React.createElement(ComboBox,{id:"startup",items:[{value:"false",title:"false"},{value:"true",title:"true"}],onCreate:e=>this.startup=e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewParamView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue()})}),this.name=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Param")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(TextBox,{id:"name",onCreate:e=>this.name=e,autocomplete:"off",autoFocus:!0}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class NewTableView extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onCreate",async e=>{await this.props.ctrl.onCreate({name:this.name.getValue()})}),this.name=null}render(){var e=this.props.ctrl;return React.createElement("div",{className:"ModalView"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close",onClick:e.onClose},React.createElement("span",null,"×")),React.createElement("h4",{className:"modal-title"},"New Table")),React.createElement("div",{className:"modal-body"},React.createElement("div",null,React.createElement("label",{htmlFor:"tableName"},"Name"),React.createElement(TextBox,{id:"tableName",onCreate:e=>this.name=e}))),React.createElement("div",{className:"modal-footer"},React.createElement("button",{name:"create",type:"button",className:"btn btn-primary",onClick:this.onCreate},"Create"),React.createElement("button",{type:"button",className:"btn btn-default",onClick:e.onClose},"Close")))}}class DocumentView extends ReactComponent{static createCM(e,t){const a=CodeMirror.fromTextArea(e,{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0});return a.setOption("theme","cobalt"),a.setValue(t),a}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class SqlDataSourceView extends DocumentView{constructor(e){super(e),_defineProperty(this,"onChange",async(e,t)=>{await this.rerender()}),_defineProperty(this,"onSaveClick",async e=>{console.log("SqlDataSourceView.onSaveClick");const t=this.props.ctrl;await t.onSaveClick(this.state.selected,this[this.state.selected].getValue()),await this.rerender()}),this.singleRef=React.createRef(),this.multipleRef=React.createRef(),this.countRef=React.createRef(),this.state={selected:"singleQuery"},this.singleQuery=null,this.multipleQuery=null,this.countQuery=null}componentDidMount(){const e=this.props.ctrl;this.singleQuery=DocumentView.createCM(this.singleRef.current,e.model.getAttr("singleQuery")),this.multipleQuery=DocumentView.createCM(this.multipleRef.current,e.model.getAttr("multipleQuery")),this.countQuery=DocumentView.createCM(this.countRef.current,e.model.getAttr("countQuery")),this.singleQuery.on("change",this.onChange),this.multipleQuery.on("change",this.onChange),this.countQuery.on("change",this.onChange)}componentWillUnmount(){this.singleQuery.off("change",this.onChange),this.multipleQuery.off("change",this.onChange),this.countQuery.off("change",this.onChange)}isChanged(){const e=this.props.ctrl,t=this[this.state.selected];return!!t&&t.getValue()!==e.model.getAttr(this.state.selected)}getButtonClass(e){return this.state.selected===e?"btn-primary":"btn-default"}getVisibility(e){return this.state.selected===e?"visible":"hidden"}isSelected(e){return this.state.selected===e}render(){var e=this.props.ctrl;return React.createElement("div",{className:"SqlDataSourceView full flex-column"},React.createElement("div",{className:"toolbar"},React.createElement(Button,{onClick:this.onSaveClick,enabled:this.isChanged()},"Save"),React.createElement(Button,{onClick:e.onCreateModelBack},"Model.back.js")," ",React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{className:""+this.getButtonClass("singleQuery"),style:{fontWeight:this.isSelected("singleQuery")?"bold":null},onClick:e=>this.setState({selected:"singleQuery"})},"singleQuery"),React.createElement("button",{className:""+this.getButtonClass("multipleQuery"),style:{fontWeight:this.isSelected("multipleQuery")?"bold":null},onClick:e=>this.setState({selected:"multipleQuery"})},"multipleQuery"),React.createElement("button",{className:""+this.getButtonClass("countQuery"),style:{fontWeight:this.isSelected("countQuery")?"bold":null},onClick:e=>this.setState({selected:"countQuery"})},"countQuery"))),React.createElement("div",{className:"edit flex-max full"},React.createElement("div",{className:"cm-container full",style:{visibility:this.getVisibility("singleQuery")}},React.createElement("textarea",{ref:this.singleRef})),React.createElement("div",{className:"cm-container full",style:{visibility:this.getVisibility("multipleQuery")}},React.createElement("textarea",{ref:this.multipleRef})),React.createElement("div",{className:"cm-container full",style:{visibility:this.getVisibility("countQuery")}},React.createElement("textarea",{ref:this.countRef}))))}}class DatabaseView extends ReactComponent{renderGrid(){var e=this.props.ctrl;return React.createElement(Grid,{classList:["flex-max"],columns:[{name:"name",title:"name",width:100},{name:"type",title:"type",width:60},{name:"key",title:"key",width:60},{name:"auto",title:"auto",width:60},{name:"nullable",title:"nullable",width:60},{name:"dbType",title:"dbType",width:200},{name:"comment",title:"comment",width:100}],rows:e.tableInfo,getRowKey:e=>e.name})}render(){var e=this.props.ctrl,t=this.props.document;return React.createElement("div",{className:"DatabaseView frame"},React.createElement("div",{className:"client frame"},React.createElement("div",{className:"frame__container"},React.createElement("div",{className:"divTableInfo full flex-column"},e.tableInfo&&this.renderGrid(),e.tableInfo&&React.createElement(Button,{onClick:e.onCreateTableClick},"Create Table")))),React.createElement(TreeWidget,{classList:["sidebar"],items:t.treeWidgetItems,onItemSelect:e.onTableSelect2}))}}class TableView extends ReactComponent{renderRows(){const e=this.props.ctrl;return e.columns.map(e=>React.createElement("tr",{key:e.model.getName()},React.createElement("td",null,e.model.getAttr("name")),React.createElement("td",null,e.model.getAttr("caption")),React.createElement("td",null,e.model.getAttr("type")),React.createElement("td",null,e.model.getAttr("key")),React.createElement("td",null,e.model.getAttr("auto")),React.createElement("td",null,e.model.getAttr("nullable"))))}render(){const e=this.props.ctrl;return React.createElement("div",{className:this.getCssClassNames()},React.createElement("div",{className:"client frame"},React.createElement("div",{className:"frame__container flex-column"},React.createElement(Grid,{classList:["flex-max"],columns:[{name:"name",title:"name",width:100},{name:"caption",title:"caption",width:100},{name:"type",title:"type",width:60},{name:"key",title:"key",width:60},{name:"auto",title:"auto",width:60},{name:"nullable",title:"nullable",width:60}],rows:e.columns.map(e=>e.model.getAttributes()),getRowKey:e=>e.name}),React.createElement(Button,{onClick:e.onCreateFormButtonClick},"Create Form"))))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class VisualView extends DocumentView{constructor(e){super(e),_defineProperty(this,"onControllerSave",async e=>{const t=this.props.ctrl;await t.onControllerSave(this.cm.getValue())}),_defineProperty(this,"onChange",async(e,t)=>{await this.rerender()}),this.textarea=React.createRef(),this.cm=null}getTextarea(){return this.textarea?this.textarea.current:null}componentDidMount(){var e=this.props.ctrl;e.data.js&&(this.cm=DocumentView.createCM(this.getTextarea(),e.data.js),this.cm.on("change",this.onChange))}componentDidUpdate(){var e=this.props.ctrl;this.getTextarea()&&e.data.js&&!this.cm&&(this.cm=DocumentView.createCM(this.getTextarea(),e.data.js))}componentWillUnmount(){this.cm&&this.cm.off("change",this.onChange)}isChanged(){return!!this.cm&&this.props.ctrl.data.js!==this.cm.getValue()}render(){var e=this.props.ctrl;return React.createElement("div",{className:"VisualView full"},React.createElement("div",{className:"full flex-column"},React.createElement("div",{className:"toolbar"},React.createElement(Button,{onClick:e.onCreateModelBack},"Model.back.js"),!e.data.js&&React.createElement(Button,{onClick:e.onCreateCustomController},"Controller.front.js"),!e.data.jsx&&React.createElement(Button,{onClick:e.onCreateCustomView},"View.jsx"),!e.data.less&&React.createElement(Button,{onClick:e.onCreateCustomStyle},"View.less"),e.data.js&&React.createElement(Button,{onClick:this.onControllerSave,enabled:this.isChanged()},"Save")),React.createElement("div",{className:"edit flex-max full"},React.createElement("div",{className:"cm-container full"},e.data.js&&React.createElement("textarea",{ref:this.textarea})))))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class PropertyGrid extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onChange",(e,t)=>{this.props.onChange&&this.props.onChange(e,t)}),this.state={}}getObj(){return this.state.object?this.state.object.obj:null}getOptions(){return this.state.object?this.state.object.options:null}renderInput(t){var e=this.getObj();return React.createElement(TextBox,{name:t,value:e[t],spellCheck:"false",onChange:e=>this.onChange(t,e),autocomplete:"off"})}renderSelect(t){var e=this.getObj();const a=this.getOptions();return React.createElement(ComboBox,{name:t,value:e[t],items:a[t].map(e=>({value:e,title:e})),onChange:e=>this.onChange(t,e)})}renderRows(){var e=this.getObj();const t=this.getOptions();return Object.keys(e).map(e=>React.createElement("tr",{key:e},React.createElement("td",null,e),React.createElement("td",null,void 0!==t[e]?this.renderSelect(e):this.renderInput(e))))}render(){return React.createElement("div",{className:"PropertyGrid full frame"},React.createElement("div",{className:"frame__container"},React.createElement("table",{className:"PropertyGrid__table",cellPadding:0,cellSpacing:0},React.createElement("tbody",null,this.getObj()&&this.renderRows()))))}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class TreeItem extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onDivMouseDown",e=>{var t=this.props.item;const a=this.props.tree;a.select(t)}),_defineProperty(this,"onDivDoubleClick",e=>{var t=this.props.item;const a=this.props.tree;a.onDoubleClick(t)}),_defineProperty(this,"onNodeMouseDown",e=>{var t=this.props.item;const a=this.props.tree;var l=this.state.opened;e.stopPropagation(),this.setState(e=>({opened:!e.opened})),l||a.onOpen(t)}),this.state={opened:void 0!==e.item.opened&&e.item.opened},this.li=React.createRef()}isSelected(){return this.props.tree.getSelectedItem()===this.props.item}isOpened(){return this.state.opened}getElement(){return this.li.current}open(){console.log("TreeItem.open",this.props.item.getTitle()),this.state.opened=!0,this.parent?this.parent.open():console.log("this.parent",this.parent)}render(){const e=this.props.tree,t=this.props.item,a=t.items;var l=!(!a||!a.length),n=t.node||l,c=t.getStyle?t.getStyle():null,r=t.getTitle();return React.createElement("li",{key:r,ref:this.li,className:this.isOpened()?"opened":null},React.createElement("div",{className:this.isSelected()?"active":null,style:{paddingLeft:this.props.paddingLeft},onMouseDown:this.onDivMouseDown,onDoubleClick:this.onDivDoubleClick},React.createElement("span",{className:n?"node":"leaf",onMouseDown:this.onNodeMouseDown})," ",React.createElement("span",{style:c},r)),l&&React.createElement("ul",null,a.map(t=>React.createElement(TreeItem,{key:t.getTitle(),tree:e,item:t,paddingLeft:this.props.paddingLeft+15,onCreate:e=>{e.parent=this,t.view=e}}))))}}class TreeWidget extends ReactComponent{constructor(e){super(e),this.state={selectedItem:null}}async select(t){if(console.log("TreeWidget.select",t?t.getTitle():null),!this.isSelected(t))return new Promise(e=>{this.setState({selectedItem:t},()=>{this.props.onItemSelect&&this.props.onItemSelect(t),e()})})}onDoubleClick(e){this.props.onItemDoubleClick&&this.props.onItemDoubleClick(e)}onOpen(e){this.props.onItemOpen&&this.props.onItemOpen(e)}isSelected(e){return this.state.selectedItem===e}getSelectedItem(){return this.state.selectedItem}scrollToSelected(){console.log("TreeWidget.scrollToSelected",this.getSelectedItem().getTitle()),this.getSelectedItem().view.getElement().scrollIntoView()}render(){console.log("TreeWidget.render");const e=this.props.items;return React.createElement("div",{className:this.getCssClassNames()},React.createElement("ul",null,e.map(t=>React.createElement(TreeItem,{key:t.getTitle(),tree:this,item:t,paddingLeft:5,onCreate:e=>t.view=e}))))}}
//# sourceMappingURL=editor-jsx.ba108b421270c7e2cd426989a7363618.js.map
