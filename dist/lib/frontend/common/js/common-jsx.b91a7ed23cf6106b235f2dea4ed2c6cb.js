window.QForms={};class ReactComponent extends React.Component{constructor(e){super(e),e.onCreate&&e.onCreate(this,this.props.name),this.allowRerender=!0}getElement(){return this.el.current}getParent(){return this.props.parent}checkParent(){if(!this.props.parent)throw new Error(this.constructor.name+": no parent")}getClassList(){return[this.getCssBlockName(),...this.props.classList||[],...this.state&&this.state.classList?this.state.classList:[]]}addCssClass(e){-1===this.state.classList.indexOf(e)&&this.state.classList.push(e)}removeCssClass(e){this.state.classList.splice(this.state.classList.indexOf(e),1)}getCssBlockName(){return this.constructor.name}getCssClassNames(){return this.getClassList().join(" ")}rerender(s=!0){return this.canRerender()?new Promise(e=>{const t=Date.now();this.forceUpdate(()=>{s&&console.log(this.constructor.name+".rerender time:",Date.now()-t),e()})}):Promise.resolve()}canRerender(){return!!this.allowRerender&&(!this.props.parent||this.props.parent.canRerender())}disableRerender(){console.log(this.constructor.name+".disableRerender"),this.allowRerender=!1}enableRerender(){console.log(this.constructor.name+".enableRerender"),this.allowRerender=!0}componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount(this,this.props.name)}isEnabled(){return void 0!==this.props.enabled?this.props.enabled:void 0===this.props.disabled||!this.props.disabled}isDisabled(){return!this.isEnabled()}}window.QForms.ReactComponent=ReactComponent;class AddIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}))}}class ArrowIcon extends React.Component{render(){return React.createElement("svg",{viewBox:"0 0 10 6"},React.createElement("path",{d:"M1.429.253a.819.819 0 0 0-1.184 0 .883.883 0 0 0 0 1.22l4.142 4.274A.821.821 0 0 0 5 6a.821.821 0 0 0 .612-.253l4.143-4.273a.883.883 0 0 0 0-1.221.819.819 0 0 0-1.184 0L5 3.937 1.429.253z"}))}}class CancelIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none",opacity:".87"}),React.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}))}}class CloseIcon extends React.Component{render(){return React.createElement("svg",{width:"10px",height:"10px",viewBox:"0 0 10 10"},React.createElement("line",{x1:"2",y1:"2",x2:"8",y2:"8",stroke:"#aaa",strokeWidth:1,strokeMiterlimit:"10"}),React.createElement("line",{x1:"8",y1:"2",x2:"2",y2:"8",stroke:"#aaa",strokeWidth:1,strokeMiterlimit:"10"}))}}class CloseIcon2 extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))}}class DateIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V10h16v11zm0-13H4V5h16v3z"}))}}class DeleteIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"}))}}class DoneIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}))}}class EditIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}))}}class LeftIcon extends React.Component{render(){var e=this.props.size||24;return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:e,width:e,viewBox:"0 0 24 24",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M15.61 7.41L14.2 6l-6 6 6 6 1.41-1.41L11.03 12l4.58-4.59z"}))}}class MoreVertIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))}}class OpenInNewIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}))}}class PasswordIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("g",null,React.createElement("path",{d:"M0,0h24v24H0V0z",fill:"none"})),React.createElement("g",null,React.createElement("g",null,React.createElement("path",{d:"M2,17h20v2H2V17z M3.15,12.95L4,11.47l0.85,1.48l1.3-0.75L5.3,10.72H7v-1.5H5.3l0.85-1.47L4.85,7L4,8.47L3.15,7l-1.3,0.75 L2.7,9.22H1v1.5h1.7L1.85,12.2L3.15,12.95z M9.85,12.2l1.3,0.75L12,11.47l0.85,1.48l1.3-0.75l-0.85-1.48H15v-1.5h-1.7l0.85-1.47 L12.85,7L12,8.47L11.15,7l-1.3,0.75l0.85,1.47H9v1.5h1.7L9.85,12.2z M23,9.22h-1.7l0.85-1.47L20.85,7L20,8.47L19.15,7l-1.3,0.75 l0.85,1.47H17v1.5h1.7l-0.85,1.48l1.3,0.75L20,11.47l0.85,1.48l1.3-0.75l-0.85-1.48H23V9.22z"}))))}}class PhoneIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"}))}}class RefreshIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}))}}class RightIcon extends React.Component{render(){var e=this.props.size||24;return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:e,width:e,viewBox:"0 0 24 24",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}))}}class SaveIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}))}}class SettingsIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}))}}class TimeIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000"},React.createElement("g",null,React.createElement("rect",{fill:"none",height:"24",width:"24",x:"0"})),React.createElement("g",null,React.createElement("g",null,React.createElement("path",{d:"M12,2C6.5,2,2,6.5,2,12s4.5,10,10,10s10-4.5,10-10S17.5,2,12,2z M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8 S16.41,20,12,20z M12.5,7H11v6l5.2,3.2l0.8-1.3l-4.5-2.7V7z"}))))}}class VisibilityIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}))}}class VisibilityOffIcon extends React.Component{render(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000"},React.createElement("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),React.createElement("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5l2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4l1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"}))}}class DropDownIcon extends ReactComponent{render(){return React.createElement("div",{className:this.getCssClassNames(),style:{width:this.props.size,height:this.props.size}},React.createElement("svg",{viewBox:"0 0 10 10"},React.createElement("circle",{cx:"5",cy:"5",r:"5",style:{fill:"gray"}}),React.createElement("polyline",{points:"2,4 5,7 8,4",fill:"none",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"})))}}window.QForms.DropDownIcon=DropDownIcon;class Button extends ReactComponent{constructor(e){super(e),this.state={disabled:!1},this.el=React.createRef()}isDisabled(){return void 0!==this.props.enabled?!this.props.enabled:this.state.disabled}isVisible(){return void 0===this.props.visible||this.props.visible}getStyle(){return{display:this.isVisible()?null:"none",width:this.props.width}}disable(){this.setState({disabled:!0})}enable(){this.setState({disabled:!1})}render(){return React.createElement("button",{className:this.getCssClassNames(),ref:this.el,id:this.props.id,type:this.props.type,name:this.props.name,disabled:this.isDisabled(),onClick:this.props.onClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.props.onKeyDown,style:this.getStyle()},this.props.title||this.props.children)}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.Button=Button;class CheckBox extends ReactComponent{constructor(e){if(super(e),_defineProperty(this,"onChange",e=>{this.props.readOnly||this.setState(e=>(this.props.onChange&&this.props.onChange(!e.checked),{checked:!e.checked}))}),_defineProperty(this,"onClick",e=>{this.props.readOnly||(this.props.onChange&&this.props.onChange(!0),this.setState({checked:!0}))}),void 0!==this.props.checked&&null!==this.props.checked&&"boolean"!=typeof this.props.checked)throw new Error("wrong checked prop: "+this.props.checked);this.state={checked:"boolean"==typeof this.props.checked?this.props.checked:null}}getValue(){return this.state.checked}shouldComponentUpdate(e,t){return this.state.checked="boolean"==typeof e.checked?e.checked:null,!0}render(){return null===this.state.checked?React.createElement("span",{style:{width:"16px",height:"16px",display:"inline-block",textAlign:"center",cursor:"default"},onClick:this.onClick},"?"):React.createElement("input",{type:"checkbox",checked:this.state.checked,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.onChange})}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.CheckBox=CheckBox;class ComboBox extends ReactComponent{constructor(e){if(super(e),_defineProperty(this,"onChange",async e=>{this.setState({value:e.target.value}),this.props.onChange&&await this.props.onChange(e.target.value)}),_defineProperty(this,"onMouseDown",async e=>{this.props.onMouseDown&&await this.props.onMouseDown(e)}),!e.items)throw new Error("no ComboBox items");this.state={value:this.getInitialValue()}}getInitialValue(){let e=null;if(void 0!==this.props.value&&null!==this.props.value?(e=this.props.value,this.props.items.find(e=>e.value===this.props.value)||this.props.nullable&&""===e||(console.error("no item for value:",this.props.value,typeof this.props.value),console.log("items:",this.props.items))):e=this.props.items.length?this.props.items[0].value:"",null===e)throw new Error("null is wrong value for ComboBox");return e}getValue(){return this.state.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return React.createElement("select",{className:this.getCssClassNames(),onChange:this.onChange,value:this.state.value,disabled:this.props.readOnly,size:this.props.size,style:this.props.style,id:this.props.id,onDoubleClick:this.props.onDoubleClick,onMouseDown:this.onMouseDown},this.props.nullable&&React.createElement("option",{value:""},this.props.placeholder),this.props.items&&this.props.items.map(e=>React.createElement("option",{key:e.value,value:e.value},e.title||e.value)))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.ComboBox=ComboBox;class PhoneBox extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onKeyPress",e=>{["+","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.preventDefault(),"+"===e.key&&e.target.value.length&&Math.abs(e.target.selectionEnd-e.target.selectionStart)!==e.target.value.length&&e.preventDefault()}),_defineProperty(this,"onChange",e=>{var t=e.target.selectionStart,s=e.target.selectionEnd,n=e.target.value.length;t===s&&t===n&&(e=PhoneBox.clearValue(e.target.value),e=PhoneBox.ifNoCodeAddRussianCode(e),this.state.value=PhoneBox.formatPhoneNumber(e),this.setState({value:this.state.value}),this.props.onChange&&this.props.onChange(e))}),this.el=React.createRef(),this.state={value:PhoneBox.formatPhoneNumber(this.props.value||"")}}getValue(){return PhoneBox.clearValue(this.state.value)}shouldComponentUpdate(e,t){return void 0!==e.value&&(this.state.value=PhoneBox.formatPhoneNumber(e.value)),!0}render(){return React.createElement("input",{ref:this.el,className:this.getCssClassNames(),type:"text",id:this.props.id,name:this.props.name,readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,spellCheck:this.props.spellCheck,autoComplete:this.props.autocomplete,value:this.state.value,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange,onKeyPress:this.onKeyPress})}static clearValue(e){return e.replace(/[^\+0-9]/g,"")}static ifNoCodeAddRussianCode(e){if(""!==e){if(e.match(/^8/))return e.replace(/^8/,"+7");if("+"!==e[0])return"+7"+e}return e}static formatPhoneNumber(e){var t=PhoneBox.clearValue(e),e=/(^\+7)(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/.exec(t);if(e){if(e[5])return`${e[1]} ${e[2]} ${e[3]}-${e[4]}-`+e[5];if(e[4])return`${e[1]} ${e[2]} ${e[3]}-`+e[4];if(e[3])return`${e[1]} ${e[2]} `+e[3];if(e[2])return e[1]+" "+e[2];if(e[1])return""+e[1]}return t}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Radio extends ReactComponent{constructor(e){if(console.log("Radio.constructor",e.value),super(e),_defineProperty(this,"onChange",async e=>{this.setState({value:e.target.value}),this.props.onChange&&await this.props.onChange(e.target.value)}),!e.name)throw new Error("no name");this.state={value:this.getInitialValue()},console.log("value:",this.getValue())}getInitialValue(){let e=null;return void 0!==this.props.value&&null!==this.props.value&&(e=this.props.value,this.props.items.find(e=>e.value===this.props.value)||(console.error("no item for value:",this.props.value,typeof this.props.value),console.log("items:",this.props.items))),e}getValue(){return this.state.value}renderItem(e,t){return[React.createElement("input",{type:"radio",name:this.props.name,id:""+this.props.name+t,value:e.value,onChange:this.onChange,checked:e.value===this.getValue(),readOnly:this.isReadOnly(),disabled:this.isReadOnly()}),React.createElement("label",{htmlFor:""+this.props.name+t},e.title||e.value)]}isReadOnly(){return void 0!==this.props.readOnly&&this.props.readOnly}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){const e=this.props.items||[];return React.createElement("div",{className:this.getCssClassNames()},e.map((e,t)=>this.renderItem(e,t)))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class TextArea extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onChange",e=>{this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e.target.value)}),this.state={value:this.props.value||""}}getValue(){return this.state.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return React.createElement("textarea",{className:this.getCssClassNames(),readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,rows:this.props.rows,cols:this.props.cols,value:this.state.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur})}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.TextArea=TextArea;class TextBox extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onChange",e=>{this._setValue(e.target.value)}),this.el=React.createRef(),this.state={value:this.props.value||""}}getValue(){return this.state.value}_setValue(e){this.state.value=e,this.forceUpdate(),this.props.onChange&&this.props.onChange(e)}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}render(){return React.createElement("input",{ref:this.el,className:this.getCssClassNames(),type:this.props.type||"text",id:this.props.id,name:this.props.name,readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,spellCheck:this.props.spellCheck,autoComplete:this.props.autocomplete,required:this.props.required,value:this.state.value,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange})}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.TextBox=TextBox;class TimeBox extends ReactComponent{constructor(e){if(super(e),_defineProperty(this,"onKeyPress",e=>{["0","1","2","3","4","5","6","7","8","9"].includes(e.key)||(console.log("cancel",e.key),e.preventDefault())}),_defineProperty(this,"onChange",e=>{const t=e.target,s=t.selectionStart,n=t.selectionEnd;if(!(5<t.value.length)){const a=s===n&&s===t.value.length;e=this.formatValue(t.value);this.setState({value:e},()=>{if(a||(t.selectionStart=s,t.selectionEnd=n),this.props.onChange){let t;try{t=this.getValue()}catch(e){console.log(e.message),t=NaN}this.props.onChange(t)}})}}),_defineProperty(this,"onBlur",e=>{if(this.props.onBlur){let t;try{t=this.getValue()}catch(e){console.log(e.message),t=NaN}this.props.onBlur(t)}}),e.value&&"number"!=typeof e.value)throw new Error("need number type, got "+typeof e.value);this.state={value:TimeBox.getStringValue(e.value)},this.el=React.createRef()}formatValue(e){let t="",s="";const n=e.replace(":","");switch(n.length){case 0:break;case 1:case 2:t=n;break;case 3:t=n.substr(0,2),s=n.substr(2,1);break;case 4:t=n.substr(0,2),s=n.substr(2,2)}return[t,...s?[s]:[]].join(":")}getValue(){return TimeBox.getIntegerValue(this.state.value)}setValue(e){this.setState({value:TimeBox.getStringValue(e)})}static getStringValue(s){if(null===s)return"";if(void 0===s)return"";{let e=Math.floor(s/60),t=Math.floor(s-60*e);return e<10&&(e="0"+e),t<10&&(t="0"+t),e+":"+t}}static getIntegerValue(e){if(""===e)return null;var t=e.split(":");if(!t[0])throw new Error("no hours: "+e);if(!t[1])throw new Error("no minutes: "+e);if(2!==t[0].length)throw new Error("hours incomplete: "+e);if(2!==t[1].length)throw new Error("minutes incomplete: "+e);var s=parseInt(t[0]),t=parseInt(t[1]);if(23<s)throw new Error(`hours out of range: ${t}, `+e);if(59<t)throw new Error(`minutes out of range: ${t}, `+e);return 60*s+t}static splitTime(e){var t=Math.floor(e/60);return[t,e-60*t]}shouldComponentUpdate(e,t){return this.props.value!==e.value?(this.state.value=TimeBox.getStringValue(e.value),!0):this.props.readOnly!==e.readOnly||(this.props.placeholder!==e.placeholder||this.state.value!==t.value)}render(){return React.createElement("input",{ref:this.el,className:this.getCssClassNames(),type:"text",id:this.props.id,readOnly:this.props.readOnly,placeholder:this.props.placeholder,value:this.state.value,onChange:this.onChange,onKeyPress:this.onKeyPress,onBlur:this.onBlur})}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.TimeBox=TimeBox;class Box extends ReactComponent{constructor(e){console.log("Box.constructor",e),super(e),_defineProperty(this,"update",()=>{console.log("Box.update"),this.setState({backgroundColor:"green"})}),this.state={backgroundColor:"purple"}}componentDidMount(){console.log("Box.componentDidMount")}componentWillUnmount(){console.log("Box.componentWillUnmount")}shouldComponentUpdate(e,t){return console.log("Box.shouldComponentUpdate",e,t),!0}componentDidUpdate(){console.log("Box.componentDidUpdate")}render(){return console.log("Box.render"),React.createElement("div",{className:"Box"},React.createElement(Button,{name:"one"}),React.createElement(Button,{name:"two"}),React.createElement(Button,{name:"three"}))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.Box=Box;class DatePicker extends ReactComponent{constructor(e){if(super(e),_defineProperty(this,"onClick",e=>{if(console.log("DatePicker.onClick",e.target),"TD"===e.target.nodeName&&e.target.classList.contains("selectable"))return this.onDateClick(e.target)}),_defineProperty(this,"onMouseDown",e=>{if(this.props.onMouseDown)return this.props.onMouseDown(e)}),_defineProperty(this,"onNextClick",e=>{this.setState(e=>{const t=new Date(e.selectedMonth[0],e.selectedMonth[1]);return t.setMonth(t.getMonth()+1),{selectedMonth:[t.getFullYear(),t.getMonth()]}})}),_defineProperty(this,"onPrevClick",e=>{this.setState(e=>{const t=new Date(e.selectedMonth[0],e.selectedMonth[1]);return t.setMonth(t.getMonth()-1),{selectedMonth:[t.getFullYear(),t.getMonth()]}})}),this.props.minDate&&!(this.props.minDate instanceof Array))throw new Error("minDate must be array");this.state={selectedMonth:this.calcSelectedMonth()},this.MONTH=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]}static createDateFromArr(e){return new Date(e[0],e[1],e[2])}isVisible(){return!1!==this.props.visible}calcSelectedMonth(){if(this.props.selectedDate)return[this.props.selectedDate[0],this.props.selectedDate[1]];{const e=[Helper.today().getTime()];this.props.minDate&&e.push(DatePicker.createDateFromArr(this.props.minDate).getTime());const t=new Date(Math.min(...e));return[t.getFullYear(),t.getMonth()]}}static getTodayArr(){return DatePicker.dateToArray(new Date)}static dateToArray(e){return[e.getFullYear(),e.getMonth(),e.getDate()]}static getDay(e){let t=e.getDay()-1;return-1===t&&(t=6),0===t&&(t=7),t}createSelectedDate(){if(!this.isDateSelected())throw new Error("date not selected");return new Date(...this.props.selectedDate)}isDateSelected(){return!!this.props.selectedDate}getFirstDateOfTable(){const e=new Date(this.state.selectedMonth[0],this.state.selectedMonth[1],1);return e.setDate(e.getDate()-DatePicker.getDay(e)),e}createMinDate(){if(!this.props.minDate)throw new Error("no min date");return new Date(this.props.minDate[0],this.props.minDate[1],this.props.minDate[2])}isMinDate(){return!!this.props.minDate}isPrevAllowed(){const e=new Date(this.state.selectedMonth[0],this.state.selectedMonth[1]);return e.setMonth(e.getMonth()-1),this.isMonthAllowed(e)}isMonthAllowed(e){if(this.isMinDate()){const t=new Date(this.props.minDate[0],this.props.minDate[1]);return e.getTime()>=t.getTime()}return!0}onDateClick(e){this.props.onDateSelected&&this.props.onDateSelected(JSON.parse(e.dataset.date))}render(){const a=this.getFirstDateOfTable(),o=Helper.today(),r=this.isMinDate()?this.createMinDate():null,i=this.isDateSelected()?this.createSelectedDate():null,l=this.props.highlightedDate?new Date(...this.props.highlightedDate):null;return React.createElement("table",{className:this.getCssClassNames()+" "+(this.isVisible()?"visible":""),onClick:this.onClick,onMouseDown:this.onMouseDown},React.createElement("caption",{className:this.getCssBlockName()+"__caption"},React.createElement("div",{className:this.getCssBlockName()+"__caption-content"},React.createElement("div",{className:this.getCssBlockName()+"__caption-link "+(this.isPrevAllowed()?"enabled":""),onClick:this.onPrevClick},React.createElement(LeftIcon,{size:18})),React.createElement("span",{className:this.getCssBlockName()+"__caption-title"},this.MONTH[this.state.selectedMonth[1]]+", "+this.state.selectedMonth[0]),React.createElement("div",{className:this.getCssBlockName()+"__caption-link enabled",onClick:this.onNextClick},React.createElement(RightIcon,{size:18})))),React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:this.getCssBlockName()+"__th"},"Пн"),React.createElement("th",{className:this.getCssBlockName()+"__th"},"Вт"),React.createElement("th",{className:this.getCssBlockName()+"__th"},"Ср"),React.createElement("th",{className:this.getCssBlockName()+"__th"},"Чт"),React.createElement("th",{className:this.getCssBlockName()+"__th"},"Пт"),React.createElement("th",{className:this.getCssBlockName()+"__th weekend"},"Сб"),React.createElement("th",{className:this.getCssBlockName()+"__th weekend"},"Вс"))),React.createElement("tbody",null,Array.from(Array(6).keys()).map(e=>React.createElement("tr",{key:e},Array.from(Array(7).keys()).map(e=>{const t=[];5!==e&&6!==e||t.push("weekend"),this.isSelectToday()&&a.getTime()===o.getTime()&&t.push("today"),a.getMonth()!==this.state.selectedMonth[1]&&t.push("out"),(!r||a.getTime()>=r.getTime())&&t.push("selectable"),i&&a.getTime()===i.getTime()&&t.push("selected"),l&&l.getTime()===a.getTime()&&t.push("highlight");var s=a.getDate().toString(),n=JSON.stringify(DatePicker.dateToArray(a)),e=this.props.getDateStyle?this.props.getDateStyle(a):null;return a.setDate(a.getDate()+1),React.createElement("td",{key:s,className:this.getCssBlockName()+"__td  "+t.join(" "),style:e,"data-date":n},s)})))))}isSelectToday(){return!1!==this.props.selectToday}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.DatePicker=DatePicker;class DropdownButton extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onButtonClick",e=>{this.setState(e=>({open:!e.open}))}),_defineProperty(this,"onButtonBlur",e=>{this.state.open&&this.setState({open:!1})}),_defineProperty(this,"onKeyDown",e=>{"Escape"===e.key&&this.state.open&&(this.setState({open:!1}),e.stopPropagation())}),_defineProperty(this,"onUlMouseDown",e=>{e.preventDefault()}),_defineProperty(this,"onLiClick",async e=>{const t=e.currentTarget;this.setState({open:!1},()=>{this.props.onClick&&this.props.onClick(t)})}),this.state={open:!1,disabled:!1}}isEnabled(){return void 0!==this.props.enabled?this.props.enabled:!this.state.disabled}render(){return React.createElement("div",{className:this.getCssClassNames()+" "+(this.state.open&&"show")},React.createElement(Button,{classList:[this.getCssBlockName()+"__button"],onClick:this.onButtonClick,onBlur:this.onButtonBlur,enabled:this.isEnabled(),onKeyDown:this.onKeyDown},this.props.title||this.props.children),React.createElement("ul",{className:this.getCssBlockName()+"__dropdown",onMouseDown:this.onUlMouseDown},this.props.actions&&this.props.actions.map(e=>React.createElement("li",{className:this.getCssBlockName()+"__item "+(!1===e.enabled?"disabled":""),key:e.name,"data-action":e.name,onClick:!1!==e.enabled?this.onLiClick:null},e.title))))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.DropdownButton=DropdownButton;class DropdownDatePicker extends ReactComponent{constructor(e){if(super(e),_defineProperty(this,"onInputClick",e=>{this.props.readOnly||this.setState(e=>({open:!e.open}))}),_defineProperty(this,"onInputKeyDown",e=>{"Escape"===e.key&&this.state.open&&(this.setState({open:!1}),e.stopPropagation())}),_defineProperty(this,"onCloseDown",async e=>{this.setState({value:null}),this.props.onChange&&this.props.onChange(null)}),_defineProperty(this,"onBlur",e=>{this.state.open&&this.setState({open:!1})}),_defineProperty(this,"onDatePickerMouseDown",e=>{e.preventDefault()}),_defineProperty(this,"onDatePickerDateSelected",e=>{e=new Date(e[0],e[1],e[2]);this.setState({open:!1,value:e}),this.props.onChange&&this.props.onChange(e)}),this.state={open:!1,value:e.value||null},e.value&&!(e.value instanceof Date))throw new Error("need Date type, got "+typeof e.value)}getFormat(){return this.props.format||"{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}"}getStringValue(){var t,s=this.getValue();if(s){let e=this.getFormat();return ApplicationController.isDebugMode()&&(t=Helper.formatDate(s,"{hh}:{mm}:{ss}"),"{DD}.{MM}.{YYYY}"===e&&"00:00:00"!==t&&(e="{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}")),Helper.formatDate(s,e)}return""}getMinDate(){return this.props.getMinDate?this.props.getMinDate():!1===this.props.oldDates?DatePicker.getTodayArr():null}getSelectedMonth(){return this.getValue()?[this.getValue().getFullYear(),this.getValue().getMonth()]:null}getSelectedDate(){return this.getValue()?[this.getValue().getFullYear(),this.getValue().getMonth(),this.getValue().getDate()]:null}getValue(){return this.state.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}getClassList(){return[...super.getClassList(),...this.props.readOnly?["read-only"]:[]]}render(){return React.createElement("div",{className:this.getCssClassNames()},React.createElement("input",{className:this.getCssBlockName()+"__input",readOnly:!0,onClick:this.onInputClick,onBlur:this.onBlur,value:this.getStringValue(),placeholder:this.props.placeholder,onKeyDown:this.onInputKeyDown}),React.createElement("div",{className:this.getCssBlockName()+"__close "+(""===this.getStringValue()||this.props.readOnly?"":"visible"),onMouseDown:this.onCloseDown},React.createElement(CloseIcon,null)),React.createElement("div",{className:this.getCssBlockName()+"__icon"},React.createElement(DateIcon,null)),this.state.open&&React.createElement(DatePicker,{classList:[this.getCssBlockName()+"__date-picker"],minDate:this.getMinDate(),selectedMonth:this.getSelectedMonth(),selectedDate:this.getSelectedDate(),onMouseDown:this.onDatePickerMouseDown,onDateSelected:this.onDatePickerDateSelected,selectToday:this.props.selectToday,highlightedDate:this.props.highlightedDate}))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.DropdownDatePicker=DropdownDatePicker;class Grid extends ReactComponent{constructor(e){console.log("Grid.constructor",e),super(e),_defineProperty(this,"onCellMouseDown",async e=>{var t,s,n;console.log("Grid.onCellMouseDown",this.isLink()),e.preventDefault(),this.isDisabled()||(this.getElement().focus(),t=e.button,[n,s]=JSON.parse(e.currentTarget.dataset.rc),n=this.props.rows[n],e=e.currentTarget.dataset.row,await this.selectCell(e,s),0===t&&this.props.onClick&&this.props.onClick(n,e))}),_defineProperty(this,"onRowMouseDown",async e=>{console.log("Grid.onRowMouseDown",this.isLink());e=e.currentTarget.dataset.row;await this.selectRow(e)}),_defineProperty(this,"onCellDoubleClick",async e=>{var t=e.button,[s]=JSON.parse(e.currentTarget.dataset.rc),s=this.props.rows[s],e=e.currentTarget.dataset.row;0===t&&this.props.onDoubleClick&&await this.props.onDoubleClick(s,e)}),_defineProperty(this,"onRowDoubleClick",async e=>{var t=parseInt(e.currentTarget.dataset.r),t=this.props.rows[t],e=e.currentTarget.dataset.row;this.props.onDoubleClick&&await this.props.onDoubleClick(t,e)}),_defineProperty(this,"onKeyDown",async e=>{if(!this.isDisabled())switch(e.keyCode){case 37:e.preventDefault(),await this.onLeft();break;case 38:e.preventDefault(),await this.onUp();break;case 39:e.preventDefault(),await this.onRight();break;case 40:e.preventDefault(),await this.onDown();break;case 13:e.preventDefault(),await this.onEnter();break;case 46:e.preventDefault(),await this.onDelete();break;case 67:e.ctrlKey&&(e.preventDefault(),await this.onCopy())}}),_defineProperty(this,"onResizeDoubleClick",async e=>{console.log("Grid.onResizeDoubleClick",e.target);e=parseInt(e.target.dataset.i),e=this.props.columns[e];this.state.columnWidth[e.name]!==this.getMaxColumnWidth(e)&&(this.state.columnWidth[e.name]=this.getMaxColumnWidth(e),this.state.resized=Date.now(),await this.rerender())}),_defineProperty(this,"onCellViewCreate",e=>{var t=e.props.column.name;void 0===this.columns[t]&&(this.columns[t]=[]),this.columns[t].push(e)}),_defineProperty(this,"onCellViewUnmount",e=>{var t=e.props.column.name,e=this.columns[t].indexOf(e);if(-1===e)throw new Error("cannot find FieldView in Grid.columns");this.columns[t].splice(e,1)}),_defineProperty(this,"onBodyScroll",async e=>{this.head.current.scrollLeft=e.target.scrollLeft}),_defineProperty(this,"onLinkClick",async e=>{console.log("Grid.onLinkClick",e.ctrlKey),e.ctrlKey||e.preventDefault()}),this.state={key:this.props.selectedKey||null,column:this.props.selectedKey&&this.props.columns&&this.props.columns.length?0:null,columnWidth:{},resized:Date.now()},this.columns={},this.el=React.createRef(),this.head=React.createRef()}getActiveColumn(){return this.state.column}setActiveColumn(e){this.state.column=e}getActiveRowKey(){return this.state.key}setActiveRowKey(e){this.state.key=e}isRowActive(e,t){return this.getActiveRowKey()===t}async onCopy(){console.log("Grid.onCopy");var e=this.findRow(this.getActiveRowKey())[this.props.columns[this.getActiveColumn()].name];await Helper.copyTextToClipboard(e)}findRow(t){return this.props.rows.find(e=>this.getRowKey(e)===t)}async onLeft(){console.log("Grid.onLeft");var e=this.getActiveColumn();0<=e-1&&(this.setActiveColumn(e-1),await this.rerender())}async onUp(){console.log("Grid.onUp");var e=this.getActiveRowKey(),e=this.findRow(e),e=this.props.rows.indexOf(e);0<=e-1&&(e=this.props.rows[e-1],e=this.getRowKey(e),this.setActiveRowKey(e),await this.rerender())}async onRight(){console.log("Grid.onRight");var e=this.getActiveColumn();e+1<=this.props.columns.length-1&&(this.setActiveColumn(e+1),await this.rerender())}async onDown(){console.log("Grid.onDown");var e=this.getActiveRowKey(),e=this.findRow(e),e=this.props.rows.indexOf(e);e+1<=this.props.rows.length-1&&(e=this.props.rows[e+1],e=this.getRowKey(e),this.setActiveRowKey(e),await this.rerender())}async onEnter(){console.log("Grid.onEnter");var e=this.getActiveRowKey(),t=this.findRow(e);this.props.onDoubleClick&&await this.props.onDoubleClick(t,e)}async onDelete(){console.log("Grid.onDelete");var e=this.getActiveRowKey(),t=this.findRow(e);this.props.onDeleteKeyDown&&await this.props.onDeleteKeyDown(t,e)}async selectCell(e,t){this.getActiveRowKey()===e&&this.getActiveColumn()===t||(this.setActiveRowKey(e),this.setActiveColumn(t),this.props.onSelectionChange?await this.props.onSelectionChange(e):await this.rerender())}async selectRow(e){this.getActiveRowKey()!==e&&(this.setActiveRowKey(e),this.props.onSelectionChange?await this.props.onSelectionChange(e):await this.rerender())}getMaxColumnWidth(e){return Math.max(...this.columns[e.name].map(e=>e.getSpanOffsetWidth()))+10+2}getColumnWidth(e){e=this.props.columns[e];return void 0!==this.state.columnWidth[e.name]?this.state.columnWidth[e.name]:e.width}renderColumns(){return this.props.columns.map((e,t)=>React.createElement("div",{className:this.getCssBlockName()+"__th",key:e.name,style:{width:this.getColumnWidth(t)}},React.createElement("div",{className:"ellipsis"},e.title||e.name),React.createElement("span",{className:"Grid__resize","data-i":t,onDoubleClick:this.onResizeDoubleClick})))}renderRows(){return this.props.rows.map((e,t)=>{var s=this.getRowKey(e);return React.createElement(GridRow,{key:s,rowKey:s,grid:this,row:e,i:t,active:this.isRowActive(t,s),activeColumn:this.getActiveColumn(),updated:this.props.updated,resized:this.state.resized})})}getRowKey(e){return this.props.getRowKey?this.props.getRowKey(e):this.props.rows.indexOf(e).toString()}renderCell(e,t){let s;return this.props.renderGridCellView&&(s=this.props.renderGridCellView(e,t,this.onCellViewCreate,this.onCellViewUnmount)),s||React.createElement(GridCell,{grid:this,row:e,column:t,onCreate:this.onCellViewCreate,onUnmount:this.onCellViewUnmount})}shouldComponentUpdate(e,t){return!this.props.updated||!!(e.updated-this.props.updated)}render(){return React.createElement("div",{className:this.getCssClassNames()+" "+(this.isDisabled()?"disabled":""),ref:this.el,tabIndex:0,onKeyDown:this.onKeyDown},React.createElement("div",{className:this.getCssBlockName()+"__head",ref:this.head},React.createElement("div",{className:this.getCssBlockName()+"__table"},React.createElement("div",{className:this.getCssBlockName()+"__tr"},this.props.columns&&this.renderColumns(),!!this.props.extraColumn&&React.createElement("div",{className:this.getCssBlockName()+"__th"})))),React.createElement("div",{className:this.getCssBlockName()+"__body",onScroll:this.onBodyScroll},React.createElement("div",{className:this.getCssBlockName()+"__table"},this.props.rows&&this.renderRows())))}isLink(){return!!this.props.createLinkCallback}}window.QForms.Grid=Grid;class GridCell extends ReactComponent{constructor(e){super(e),this.span=React.createRef()}getSpanOffsetWidth(){return this.span.current?this.span.current.offsetWidth:0}renderCellValue(e){const t=this.props.grid.props.decodeValue?Helper.decodeValue(e):e;return"boolean"==typeof t?t.toString():t}render(){var e=this.props.row,t=this.props.column;return React.createElement("div",{className:this.getCssClassNames()+" ellipsis"},React.createElement("span",{ref:this.span},this.renderCellValue(e[t.name])))}}window.QForms.GridCell=GridCell;class GridRow extends ReactComponent{isCellActive(e){return this.props.active&&this.props.activeColumn===e}shouldComponentUpdate(e,t){return!this.props.updated||(!!(e.updated-this.props.updated)||(!!(e.resized-this.props.resized)||(this.props.active!==e.active||!(!this.props.active||this.props.activeColumn===e.activeColumn))))}render(){const s=this.props.grid,n=this.props.row,a=this.props.i,o=this.props.rowKey;var e=s.props.createLinkCallback?s.props.createLinkCallback(o):null;return React.createElement("a",{className:s.getCssBlockName()+"__tr "+(this.props.active?"active":""),"data-key":o,href:e,onClick:s.onLinkClick},s.props.columns.map((e,t)=>React.createElement("div",{key:e.name,className:s.getCssBlockName()+"__td "+(this.isCellActive(t)?"active":""),style:{width:s.getColumnWidth(t)},"data-rc":`[${a},${t}]`,"data-row":o,onMouseDown:s.onCellMouseDown,onDoubleClick:s.onCellDoubleClick},s.renderCell(n,e))),!!s.props.extraColumn&&React.createElement("div",{className:s.getCssBlockName()+"__td","data-r":a,"data-row":o,onMouseDown:s.onRowMouseDown,onDoubleClick:s.onRowDoubleClick}))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.GridRow=GridRow;class Image extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onImgClick",async e=>(console.log("Image.onImgClick"),this.props.onClick?this.props.onClick():void this.setState(e=>e.classList?{classList:null}:{classList:["Image_full"]}))),this.img=React.createRef(),this.state={classList:null}}getNaturalSize(){return[this.img.current.naturalWidth,this.img.current.naturalHeight]}render(){return React.createElement("img",{className:this.getCssClassNames(),ref:this.img,src:this.props.src,onClick:this.onImgClick})}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.Image=Image;class Menu extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onMenuClick",async e=>{await this.toggleMenu(e.currentTarget.dataset.menu)}),_defineProperty(this,"onBlur",async e=>{await this.closeMenu(e.currentTarget.dataset.menu)}),_defineProperty(this,"onMouseDown",e=>{e.preventDefault()}),_defineProperty(this,"onMenuItemClick",async e=>{e.persist();var{menu:t,type:s,name:e}=e.target.dataset;await this.closeMenu(t),this.props.onClick&&this.props.onClick(t,s,e)}),this.state={}}toggleMenu(t){return new Promise(e=>{this.setState(e=>({[t]:!e[t]}),e)})}closeMenu(t){return new Promise(e=>this.setState({[t]:!1},e))}render(){return React.createElement("div",{className:"Menu"},this.props.items&&this.props.items.map(t=>React.createElement("div",{key:t.name,className:this.state[t.name]?"active":null},React.createElement("button",{"data-menu":t.name,onClick:this.onMenuClick,onBlur:this.onBlur},t.title),React.createElement("div",{onMouseDown:this.onMouseDown,onClick:this.onMenuItemClick},t.items.map(e=>React.createElement("a",{key:e.name,"data-menu":t.name,"data-type":e.type,"data-name":e.name},e.title))))))}}window.QForms.Menu=Menu;class Modal extends ReactComponent{render(){return React.createElement("div",{className:this.getCssClassNames()},React.createElement("div",{className:this.getCssBlockName()+"__container"},this.props.children))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.Modal=Modal;class Password extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onChange",e=>{this._setValue(e.target.value)}),_defineProperty(this,"onCloseClick",e=>{this._setValue(""),this.getInputElement().focus()}),_defineProperty(this,"onIconClick",e=>{this.setState(e=>({type:"password"===e.type?"text":"password"})),this.getInputElement().focus()}),this.el=React.createRef(),this.inputEl=React.createRef(),this.state={value:this.props.value||"",type:"password"}}getInputElement(){return this.inputEl.current}getValue(){return this.state.value}_setValue(e){this.state.value=e,this.forceUpdate(),this.props.onChange&&this.props.onChange(e)}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}isCloseVisible(){return""!==this.state.value}render(){return React.createElement("div",{ref:this.el,className:this.getCssClassNames()},React.createElement("input",{ref:this.inputEl,className:this.getCssBlockName()+"__input",type:this.state.type,id:this.props.id,name:this.props.name,readOnly:this.props.readOnly,disabled:this.props.disabled,placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,spellCheck:this.props.spellCheck,autoComplete:this.props.autocomplete,value:this.state.value,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange}),React.createElement("div",{className:this.getCssBlockName()+"__close "+(this.isCloseVisible()?"visible":""),onClick:this.onCloseClick},React.createElement(CloseIcon,null)),React.createElement("div",{className:this.getCssBlockName()+"__icon",onClick:this.onIconClick},"password"===this.state.type?React.createElement(VisibilityIcon,null):React.createElement(VisibilityOffIcon,null)))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Select extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onKeyDown",async e=>{this.state.visible&&(this.setState({visible:!1}),e.stopPropagation())}),_defineProperty(this,"onInputMouseDown",async e=>{if(!this.props.readOnly)if(this.props.onMouseDown)await this.props.onMouseDown(e);else{if(!this.state.visible){const[t]=this.el.current.querySelectorAll("li.selected");t&&(e=t.offsetTop-this.dropdown.current.getBoundingClientRect().height/2+t.getBoundingClientRect().height/2,console.log("scrollTop:",e),this.dropdown.current.scrollTop=e,console.log("this.dropdown.current.scrollTop",this.dropdown.current.scrollTop))}this.setState(e=>({visible:!e.visible}))}}),_defineProperty(this,"onInputBlur",async e=>{console.log("Select.onInputBlur",e.target),this.setState({visible:!1})}),_defineProperty(this,"onDropdownMouseDown",async e=>{e.preventDefault()}),_defineProperty(this,"onDropdownClick",async e=>{console.log("Select.onDropdownClick",e.target.offsetTop);const t=JSON.parse(e.target.dataset.value);this.setState({value:t,visible:!1},async()=>{this.props.onChange&&await this.props.onChange(t.toString())})}),_defineProperty(this,"onCloseClick",async e=>{this.setState({value:""}),this.props.onChange&&await this.props.onChange(""),this.getElement()}),this.el=React.createRef(),this.dropdown=React.createRef(),this.state={value:this.getInitialValue(),visible:!1}}getInitialValue(){let e=null;if(void 0!==this.props.value&&null!==this.props.value?(e=this.props.value,this.getItems().find(e=>e.value===this.props.value)||this.isNullable()&&""===e||(console.error("no item for value:",this.props.value,typeof this.props.value),console.log("items:",this.getItems()))):e=!this.isNullable()&&this.props.items.length?this.props.items[0].value:"",null===e)throw new Error("null is wrong value for Select");return e}getValue(){return this.state.value}isNullable(){return void 0===this.props.nullable||this.props.nullable}getVisibility(){return this.state.visible?"visible":"hidden"}getItems(){return this.props.items||[]}getValueTitle(t){if(""===t)return"";var e=this.getItems().find(e=>e.value===t);if(!e)throw new Error("cannot find item by value: "+t);return e.title||e.value}shouldComponentUpdate(e,t){return this.state.value=e.value,!0}isCloseVisible(){return!this.props.readOnly&&""!==this.state.value}render(){return React.createElement("div",{ref:this.el,className:this.getCssClassNames()},React.createElement("input",{className:this.getCssBlockName()+"__input",readOnly:!0,disabled:this.props.readOnly,placeholder:this.props.placeholder,onBlur:this.onInputBlur,value:this.getValueTitle(this.getValue()),onMouseDown:this.onInputMouseDown,onKeyDown:this.onKeyDown}),React.createElement("div",{className:this.getCssBlockName()+"__close "+(this.isCloseVisible()?"visible":""),onClick:this.onCloseClick},React.createElement(CloseIcon,null)),React.createElement("div",{className:this.getCssBlockName()+"__icon "+(this.state.visible?"Select__icon_up":"")},React.createElement(ArrowIcon,null)),React.createElement("ul",{ref:this.dropdown,className:this.getCssBlockName()+"__dropdown",style:{visibility:this.getVisibility()},onMouseDown:this.onDropdownMouseDown,onClick:this.onDropdownClick},this.isNullable()&&React.createElement("li",{className:this.getCssBlockName()+"__item","data-value":'""'}," "),this.getItems().map(e=>React.createElement("li",{key:e.value,className:this.getCssBlockName()+"__item ellipsis "+(this.getValue()===e.value?"selected":""),"data-value":JSON.stringify(e.value)},e.title||"#"+e.value))))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Slider extends ReactComponent{constructor(e){if(super(e),_defineProperty(this,"onPrevClick",e=>{this.setState(e=>{let t=e.image-1;return t<0&&(t=this.props.images.length-1),{image:t}})}),_defineProperty(this,"onNextClick",e=>{this.setState(e=>{let t=e.image+1;return t>this.props.images.length-1&&(t=0),{image:t}})}),_defineProperty(this,"onImageClick",e=>{console.log("Slider.onImageClick"),this.state.classList?this.setState({classList:null}):this.setState({classList:["full"]})}),_defineProperty(this,"onCloseClick",e=>{this.setState({classList:null})}),!this.props.images)throw new Error("Slider: no images");this.state={image:0,classList:null}}render(){var e=this.props.images||[];return React.createElement("div",{className:this.getCssClassNames()},React.createElement("img",{className:"Slider_image",src:e[this.state.image],onClick:this.onImageClick}),1<e.length&&React.createElement("div",{className:"Slider__label"},0<e.length?this.state.image+1:0,"/",e.length),1<e.length&&React.createElement("div",{className:"Slider__arrow left",onClick:this.onPrevClick},React.createElement(LeftIcon,null)),1<e.length&&React.createElement("div",{className:"Slider__arrow right",onClick:this.onNextClick},React.createElement(RightIcon,null)),React.createElement("div",{className:"Slider__close",onClick:this.onCloseClick},React.createElement(CloseIcon2,null)))}}window.QForms.Slider=Slider;class Statusbar extends ReactComponent{constructor(e){super(e),this.state={}}setLastQueryTime(e){this.setState({lastQueryTime:e})}render(){return React.createElement("div",{className:"Statusbar"},React.createElement("div",null,"Last query time: ",this.state.lastQueryTime?this.state.lastQueryTime+" ms":"-"))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.Statusbar=Statusbar;class Tab extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onLiMouseDown",e=>{e.target.classList.contains("close")||(e=parseInt(e.currentTarget.dataset.i),this.props.getActive?this.props.onTabMouseDown&&this.props.onTabMouseDown(e):e!==this.getActive()&&this.selectTab(e))}),_defineProperty(this,"onLiClick",e=>{e.target.classList.contains("close")&&(e=parseInt(e.currentTarget.dataset.i),this.props.onTabClose&&this.props.onTabClose(e))}),this.state={active:0}}getActive(){return this.props.getActive?this.props.getActive():this.state.active}selectTab(e){if(e!==this.getActive()){const t=Date.now();this.setState({active:e},()=>console.log("selectTab time:",Date.now()-t))}}renderTitles(){return this.props.tabs.map((e,t)=>React.createElement("li",{key:e.name,className:t===this.getActive()?"active":null,onMouseDown:this.onLiMouseDown,onClick:this.onLiClick,"data-i":t},React.createElement("span",null,e.title),this.props.canClose&&React.createElement("span",{className:"close"},"×")))}renderContents(){return this.props.tabs.map((e,t)=>React.createElement("div",{key:e.name,className:t===this.getActive()?"active":null},e.content))}render(){return React.createElement("div",{className:this.getCssClassNames()},React.createElement("ul",null,this.props.tabs&&this.renderTitles()),React.createElement("div",null,this.props.tabs&&this.renderContents()))}}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}window.QForms.Tab=Tab;class Tab2 extends ReactComponent{constructor(e){super(e),_defineProperty(this,"onLiMouseDown",e=>{e.target.classList.contains("close")||(e=parseInt(e.currentTarget.dataset.i),this.props.getActive?this.props.onTabMouseDown&&this.props.onTabMouseDown(e):e!==this.getActive()&&this.selectTab(e))}),_defineProperty(this,"onLiClick",e=>{e.target.classList.contains("close")&&(e=parseInt(e.currentTarget.dataset.i),this.props.onTabClose&&this.props.onTabClose(e))}),this.state={active:0}}getActive(){return this.props.getActive?this.props.getActive():this.state.active}selectTab(e){if(e!==this.getActive()){const t=Date.now();this.setState({active:e},()=>console.log("selectTab time:",Date.now()-t))}}renderTitles(){return this.props.tabs.map((e,t)=>React.createElement("li",{key:e.name,className:this.getCssBlockName()+"__button "+(t===this.getActive()?"active":""),onMouseDown:this.onLiMouseDown,onClick:this.onLiClick,"data-i":t},React.createElement("span",null,e.title),this.props.canClose&&React.createElement("span",{className:"close"},"×")))}renderContents(){return this.props.tabs.map((e,t)=>React.createElement("div",{key:e.name,className:this.getCssBlockName()+"__page "+(t===this.getActive()?"active":"")},e.content))}render(){return React.createElement("div",{className:this.getCssClassNames()},React.createElement("ul",{className:this.getCssBlockName()+"__buttons"},this.props.tabs&&this.renderTitles()),React.createElement("div",{className:this.getCssBlockName()+"__pages"},this.props.tabs&&this.renderContents()))}}window.QForms.Tab=Tab;class Tooltip extends ReactComponent{render(){return React.createElement("div",{className:`Tooltip ${this.props.type} `+(this.props.hidden?"hidden":"")},"alert"!==this.props.type&&React.createElement("div",null,"tooltip"),React.createElement("span",{className:this.props.position},this.props.tip||"tip"))}}window.QForms.Tooltip=Tooltip;
//# sourceMappingURL=common-jsx.b91a7ed23cf6106b235f2dea4ed2c6cb.js.map
