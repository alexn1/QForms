{"version":3,"sources":["EventEmitter.js","LoginFrontHostApp.js","ViewerFrontHostApp.js","WebSocketClient.js","Controller/Controller.js","Controller/AlertController/AlertController.js","Controller/ConfirmController/ConfirmController.js","Controller/LoginController/LoginController.js","Controller/ModalController/ModalController.js","Controller/ModalController/ImageDialogController/ImageDialogController.js","Controller/ModelController/ModelController.js","Controller/ModelController/ApplicationController/ApplicationController.js","Controller/ModelController/FieldController/FieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormCheckBoxFieldController/RowFormCheckBoxFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormCheckBoxListFieldController/RowFormCheckBoxListFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormComboBoxFieldController/RowFormComboBoxFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormDateFieldController/RowFormDateFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormDateTimeFieldController/RowFormDateTimeFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormFileFieldController/RowFormFileFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormImageFieldController/RowFormImageFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormLinkFieldController/RowFormLinkFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormPasswordFieldController/RowFormPasswordFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormPhoneFieldController/RowFormPhoneFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormRadioFieldController/RowFormRadioFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormTextAreaFieldController/RowFormTextAreaFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormTextBoxFieldController/RowFormTextBoxFieldController.js","Controller/ModelController/FieldController/RowFormFieldController/RowFormTimeFieldController/RowFormTimeFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormCheckBoxFieldController/TableFormCheckBoxFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormComboBoxFieldController/TableFormComboBoxFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormDateFieldController/TableFormDateFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormDateTimeFieldController/TableFormDateTimeFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormLinkFieldController/TableFormLinkFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormPhoneFieldController/TableFormPhoneFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormTextAreaFieldController/TableFormTextAreaFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormTextBoxFieldController/TableFormTextBoxFieldController.js","Controller/ModelController/FieldController/TableFormFieldController/TableFormTimeFieldController/TableFormTimeFieldController.js","Controller/ModelController/FormController/FormController.js","Controller/ModelController/FormController/RowFormController/RowFormController.js","Controller/ModelController/FormController/TableFormController/TableFormController.js","Controller/ModelController/PageController/PageController.js","Model/Model.js","Model/Application/Application.js","Model/Column/Column.js","Model/DataSource/DataSource.js","Model/DataSource/SqlDataSource/SqlDataSource.js","Model/Database/Database.js","Model/Field/Field.js","Model/Field/CheckBoxField/CheckBoxField.js","Model/Field/CheckBoxListField/CheckBoxListField.js","Model/Field/ComboBoxField/ComboBoxField.js","Model/Field/DateField/DateField.js","Model/Field/DateTimeField/DateTimeField.js","Model/Field/FileField/FileField.js","Model/Field/ImageField/ImageField.js","Model/Field/LabelField/LabelField.js","Model/Field/LinkField/LinkField.js","Model/Field/PasswordField/PasswordField.js","Model/Field/PhoneField/PhoneField.js","Model/Field/RadioField/RadioField.js","Model/Field/TextAreaField/TextAreaField.js","Model/Field/TextBoxField/TextBoxField.js","Model/Field/TimeField/TimeField.js","Model/Form/Form.js","Model/Form/RowForm/RowForm.js","Model/Form/TableForm/TableForm.js","Model/Page/Page.js","Model/Table/Table.js"],"names":["EventEmitter","constructor","this","list","on","name","cb","push","off","i","indexOf","Error","splice","emit","e","length","result","Promise","allSettled","map","status","reason","LoginFrontHostApp","FrontHostApp","data","console","log","super","run","loginController","LoginController","create","rootElement","document","querySelector","getViewClassCssBlockName","Helper","createReactComponent","getViewClass","ctrl","getText","text","getData","ViewerFrontHostApp","options","applicationController","application","Application","init","ApplicationController","rootElementName","createView","connect","err","logError","onWindowPopState","error","values","type","source","message","stack","href","window","location","platformVersion","versions","platform","appVersion","app","logErrorUrl","fetch","method","headers","Content-Type","body","JSON","stringify","catch","alert","resolve","reject","root","childElementCount","alertCtrl","AlertController","onClose","ReactDOM","unmountComponentAtNode","confirm","ConfirmController","QForms","WebSocketClient","protocol","url","host","createUriParamsString","webSocket","refreshTimeoutId","RECONNECT_TIMEOUT","REFRESH_TIMEOUT","params","route","uuid","userId","version","getApp","getModel","Object","keys","key","encodeURIComponent","join","WebSocket","onclose","code","onopen","bind","onmessage","onMessage","startRefreshTimeout","onRefreshTimeout","send","setTimeout","resetRefreshTimeout","clearTimeout","reconnect","async","getHostApp","getDomain","getName","parse","packet","getView","disableRerender","emitResult","enableRerender","rerender","Controller","view","onViewCreate","createElement","React","onCreate","AlertView","close","onOkButtonClick","onCloseClick","onKeyDown","ConfirmView","onYesClick","frontHostApp","CustomClass","getClassByName","Class","LoginView","getFrontHostApp","ModalController","id","getId","closeModal","ImageDialogController","src","ImageDialogView","getSrc","onImageClick","ModelController","model","parent","deinited","deinit","getFullName","getParent","getTitle","getCaption","isAttr","viewClassName","getAttr","eval","lastId","activePage","modals","statusbar","homePageName","webSocketClient","isDebugMode","Search","getObj","onRequest","pageData","pages","createPage","modal","getGlobalParams","title","documentElement","classList","add","inIframe","activePageName","getActivePageName","ApplicationView","setLastQueryTime","time","remoteAppVersion","createVersionNotificationIfNotExists","div","innerHTML","versionNotification","className","getCssBlockName","append","undefined","pageModel","Page","pc","PageController","getNextId","openPage","pageController","findPageControllerByPageNameAndKey","onPageSelect","request","action","page","newMode","activeElement","focus","isModal","addModal","addPage","removeModal","getNewId","closePage","pageName","getKey","onActionClick","getMenuItemsProp","menu","items","item","caption","getUser","login","onStatusbarCreate","onLogout","getRootPath","onMenuItemClick","history","pushState","createLink","state","invalidate","filter","forEach","yesButton","yes","noButton","no","openModal","nodeEnv","user","rpc","getBaseUrl","FieldController","getPage","form","getForm","generalClassName","getClassName","GeneralClass","valueToString","value","Date","toISOString","toString","stringToValue","stringValue","fieldType","getType","trim","date","invalidDate","num","Number","isNaN","notNumber","getViewStyle","row","isVisible","isAutoFocus","getAutocomplete","getFormat","RowFormFieldController","parseError","changed","getRow","getValue","setValue","refill","resetErrors","refreshChangedState","copyValueToModel","putValue","widgetValue","onChange","fireEvent","substring","setValueFromWidget","isValidateOnChange","validate","isValid","onFieldChange","onBlur","isEditable","isValidateOnBlur","getValueForWidget","isChanged","getError","calcChangedState","getPlaceholder","getWidget","isNotNull","getNullErrorText","required","getMode","isReadOnly","isParseError","getErrorMessage","hasColumn","fieldRawValue","valueToRaw","dsRawValue","getRawValue","let","original","modified","getDefaultDataSource","getRowWithChanges","substr","setError","renderView","validateOnChange","validateOnBlur","onChangePure","RowFormCheckBoxFieldController","RowFormCheckBoxFieldView","RowFormCheckBoxListFieldController","dataSource","getDataSource","onListInsert","onListUpdate","onListDelete","RowFormCheckBoxListFieldView","getRows","getItemFromRow","getValueValue","getDisplayValue","RowFormComboBoxFieldController","getComboBoxDataSource","RowFormComboBoxFieldView","getItems","onEditButtonClick","itemEditPage","onCreateButtonClick","newRowMode","itemCreateForm","createPageName","onInsert","inserts","decodeValue","onItemSelect","button","preventDefault","selectedKey","selectMode","onSelect","RowFormDateFieldController","RowFormDateFieldView","RowFormDateTimeFieldController","args","widget2","defaultValue","parseError2","error2","RowFormDateTimeFieldView","getValueForTime","getHours","getMinutes","h","m","resetErrors2","TimeBox","splitTime","setHours","onView2Create","onChange2","isValidateOnChange2","setValueFromView2","validate2","onBlur2","getPlaceholder2","getStringValue","getDefaultValue","setDefaultValue2","getIntegerValue","setValue2","getTimeErrorText","field","timeNotValid","getError2","isParseError2","setError2","getErrorMessage2","isValid2","isValidateOnBlur2","RowFormFileFieldController","RowFormFileFieldView","RowFormImageFieldController","RowFormImageFieldView","RowFormLinkFieldController","RowFormLinkFieldView","onClick","RowFormPasswordFieldController","RowFormPasswordFieldView","RowFormPhoneFieldController","RowFormPhoneFieldView","getPhoneFormatErrorText","phoneNumberFormatError","RowFormRadioFieldController","RowFormRadioFieldView","RowFormTextAreaFieldController","RowFormTextAreaFieldView","RowFormTextBoxFieldController","RowFormTextBoxFieldView","RowFormTimeFieldController","RowFormTimeFieldView","TableFormFieldController","TableFormCheckBoxFieldController","TableFormCheckBoxFieldView","TableFormComboBoxFieldController","TableFormComboBoxFieldView","rawValue","cbRow","findRowByRawValue","TableFormDateFieldController","TableFormDateFieldView","formatDate","TableFormDateTimeFieldController","TableFormDateTimeFieldView","TableFormLinkFieldController","TableFormLinkFieldView","TableFormPhoneFieldController","TableFormPhoneFieldView","TableFormTextAreaFieldController","TableFormTextAreaFieldView","TableFormTextBoxFieldController","TableFormTextBoxFieldView","TableFormTimeFieldController","TableFormTimeFieldView","FormController","customClassName","fields","onFormChange","getUpdated","updated","now","getField","getSelectedRowKey","RowFormController","mode","hasNew","valid","onModelRefresh","onModelInsert","onModelUpdate","calcState","onFormInsert","onFormUpdate","clearFieldsError","onSaveClick","update","onDiscardClick","changedFields","discard","hasDefaultSqlDataSource","onFormDiscard","onRefreshClick","refresh","onEditClick","onCancelClick","RowFormView","getActiveRow","withChanges","isActionEnabled","isViewMode","isEditMode","TableFormController","grid","TableFormView","onModelDelete","onGridCreate","onNewClick","new","onDeleteClick","getActiveRowKey","areYouSure","delete","onGridCellDblClick","isSelectMode","selectRow","edit","onGridLinkClick","onGridDeleteKeyDown","fillDefaultValues","insert","database","table","DataSource","keyToParams","setActiveRowKey","updates","newKey","deletes","onGridSelectionChange","isRowSelected","onFrameChanged","frame","parseInt","setFrame","onNextClick","getFrame","onPreviousClick","canPrev","canNext","ds","getFramesCount","forms","onSaveAndCloseClick","getOptions","onClosePageClick","onOpenPageClick","link","createOpenInNewLink","open","hasRowFormWithDefaultSqlDataSource","formController","getParams","PageView","pathname","encodeURI","find","arr","keyPart","selectedRowKey","onSelectClick","onResetClick","Model","class","getCol","hasOwnProperty","dataSources","createDataSources","deinitDataSources","hasActions","actions","databases","theme","Database","addDatabase","logout","start","doHttpRequest2","remotePlatformVersion","getDatabase","getVirtualPath","virtualPath","errorMessage","promises","getNodeEnv","isDevelopment","Column","includes","rows","rowsByKey","news","changes","Map","setRows","getTable","onTableInsert","onTableUpdate","onTableDelete","onTableRefresh","fillRowsByKey","addRow","getRowKey","addRows","getRowsLength","column","discardRowColumn","has","get","changeRowColumn","newValue","set","size","isRowColumnChanged","getKeyValues","keyColumns","reduce","removeRow","newRow","getSingleRow","Form","getRowByIndex","clear","paramName","getChangesByKey","hasNewRows","copyNewValues","newValues","updateRow","columnName","getColumn","onDataSourceInsert","onDataSourceDelete","onDataSourceUpdate","reuslt","sourceRow","isSurrogate","moveRow","offset","moveArrItem","event","onDataSourceRefresh","SqlDataSource","count","lastFrame","insertEx","updateEx","getPageParams","select","getLimit","fill","more","hasMore","Array","Math","ceil","getCount","getLastFrame","tables","Table","addTable","Field","replaceThis","replace","split","fillDefaultValue","js","templateToJsString","module","valueToPageParams","isParam","paramValue","setParam","RowForm","rawToValue","encodeValue","readOnly","notNull","isNullable","getWidth","width","param","CheckBoxField","CheckBoxListField","displayColumn","valueColumn","dataSourceName","ComboBoxField","DateField","raw","addTimezoneOffset","v","cloneDate","removeTimezoneOffset","DateTimeField","FileField","ImageField","LabelField","LinkField","PasswordField","PhoneField","RadioField","TextAreaField","getCols","cols","TextBoxField","TimeField","decodeRow","isNewMode","createRow","fillParams","TableForm","createForms","deinitForms","FormClass","hasRowFormWithDefaultDs","hasRowForm","hasTableForm","keyParams","columns","addColumn","emitInsert","emitUpdate","emitDelete","emitRefresh"],"mappings":"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","file":"viewer.2c369616d17592d9b2a13be29b6cab2e.js","sourcesContent":["class EventEmitter {\n    constructor() {\n        this.list = {};\n    }\n    on(name, cb) {\n        // console.log('EventEmitter.on', name);\n        if (!this.list[name]) {\n            this.list[name] = [];\n        }\n        this.list[name].push(cb);\n    }\n    off(name, cb) {\n        // console.log('EventEmitter.off', name);\n        const i = this.list[name].indexOf(cb);\n        if (i === -1) {\n            throw new Error(`cannot find cb for ${name}`);\n        }\n        // console.log(i);\n        this.list[name].splice(i, 1);\n    }\n    async emit(name, e) {\n        // console.log('EventEmitter.emit', name, e);\n        if (this.list[name] && this.list[name].length) {\n            const results = await Promise.allSettled(this.list[name].map(cb => cb(e)));\n            // console.log('results:', results);\n            for (const result of results) {\n                if (result.status === 'rejected') {\n                    throw result.reason;\n                }\n            }\n        }\n    }\n}\n","class LoginFrontHostApp extends FrontHostApp {\n    constructor(data) {\n        console.log('LoginFrontHostApp.constructor', data);\n        super();\n        this.data = data;\n    }\n    async run() {\n        console.log('LoginFrontHostApp.run');\n        const loginController = LoginController.create(this);\n        const rootElement = document.querySelector(`.${loginController.getViewClassCssBlockName()}__root`);\n        const loginView = Helper.createReactComponent(rootElement, loginController.getViewClass(), {ctrl: loginController});\n    }\n    getText() {\n        return this.data.text;\n    }\n    getData() {\n        return this.data;\n    }\n}\n","class ViewerFrontHostApp extends FrontHostApp {\n    constructor(options = {}) {\n        if (!options.data) throw new Error('no data');\n        super();\n        this.options = options;\n        this.applicationController = null;\n    }\n    async run() {\n        console.log('ViewerFrontHostApp.run', this.getData());\n\n        // application\n        const application = new Application(this.getData());\n        application.init();\n\n        // applicationController\n        const applicationController = this.applicationController = ApplicationController.create(application, this);\n        applicationController.init();\n\n        // view\n        const rootElementName = `.${applicationController.getViewClass().name}__root`;\n        const rootElement = document.querySelector(rootElementName);\n        if (!rootElement) {\n            throw new Error(`no root element: ${rootElementName}`);\n        }\n        applicationController.createView(rootElement);\n\n        // connect\n        try {\n            await applicationController.connect();\n        } catch (err) {\n            this.logError(err);\n        }\n    }\n    async onWindowPopState(e) {\n        // console.log('ViewerFrontHostApp.onWindowPopState', e.state);\n        await this.applicationController.onWindowPopState(e);\n    }\n    logError(err) {\n        console.error('FrontHostApp.logError', err);\n        const values = {\n            type   : 'error',\n            source : 'client',\n            message: err.message,\n            stack  : err.stack,\n            data   : {\n                href           : window.location.href,\n                platformVersion: this.getData().versions.platform,\n                appVersion     : this.getData().versions.app,\n            }\n        };\n        console.log(`POST ${this.getData().logErrorUrl}`, values);\n        fetch(this.getData().logErrorUrl, {\n            method : 'POST',\n            headers: {'Content-Type': 'application/json;charset=utf-8'},\n            body   : JSON.stringify(values)\n        }).catch(err => {\n            console.error(err.message);\n        });\n    }\n    getData() {\n        if (!this.options.data) throw new Error('no data');\n        return this.options.data;\n    }\n    alert(options) {\n        console.log('ViewerFrontHostApp.alert', options);\n        return new Promise((resolve, reject) => {\n            try {\n                const root = document.querySelector('.alert-root');\n                if (root.childElementCount === 0) {\n                    const ctrl = this.alertCtrl = new AlertController({\n                        ...options,\n                        onClose: result => {\n                            this.alertCtrl = null;\n                            ReactDOM.unmountComponentAtNode(root);\n                            resolve(result);\n                        }});\n                    // console.log('ctrl:', ctrl);\n                    const view = Helper.createReactComponent(root, ctrl.getViewClass(), {ctrl});\n                    // console.log('view', view);\n                } else {\n                    reject(new Error('alert already exists'));\n                }\n            } catch (err) {\n                reject(err);\n            }\n        });\n    }\n    confirm(options) {\n        console.log('ViewerFrontHostApp.confirm', options);\n        return new Promise((resolve, reject) => {\n            try {\n                const root = document.querySelector('.alert-root');\n                if (root.childElementCount === 0) {\n                    const ctrl = this.alertCtrl = new ConfirmController({\n                        ...options,\n                        onClose: result => {\n                            this.alertCtrl = null;\n                            ReactDOM.unmountComponentAtNode(root);\n                            resolve(result);\n                        }});\n                    // console.log('ctrl:', ctrl);\n                    const view = Helper.createReactComponent(root, ctrl.getViewClass(), {ctrl});\n                    // console.log('view', view);\n                } else {\n                    reject(new Error('confirm already exists'));\n                }\n            } catch (err) {\n                reject(err);\n            }\n        });\n    }\n}\n\nwindow.QForms.ViewerFrontHostApp = ViewerFrontHostApp;\n","class WebSocketClient {\n    constructor(options = {}) {\n        // console.log('WebSocketClient.constructor', options);\n        this.options = options;\n        if (!options.applicationController) throw new Error('no options.applicationController');\n        if (!options.protocol) throw new Error('no options.protocol');\n        this.url = `${options.protocol}://${window.location.host}/?${this.createUriParamsString(options)}`;\n        this.webSocket         = null;\n        this.refreshTimeoutId  = null;\n        this.RECONNECT_TIMEOUT = 10;        // sec\n        this.REFRESH_TIMEOUT   = 60*60;     // sec\n    }\n    createUriParamsString(options) {\n        const params = {\n            route  : options.route,\n            uuid   : options.uuid,\n            userId : options.userId,\n            version: this.getApp().getModel().getData().versions.app\n        };\n        return Object.keys(params).map(key => `${key}=${encodeURIComponent(params[key])}`).join('&');\n    }\n    connect() {\n        console.log('WebSocketClient.connect', this.url);\n        return new Promise((resolve, reject) => {\n            this.webSocket = new WebSocket(this.url);\n            this.webSocket.onclose = async e => {\n                this.webSocket = null;\n                reject(new Error(`Connection failed ${e.code}`));\n            };\n            this.webSocket.onopen = e => {\n                this.webSocket.onclose   = this.onClose.bind(this);\n                this.webSocket.onmessage = this.onMessage.bind(this);\n                this.startRefreshTimeout();\n                resolve(e);\n            };\n        });\n    }\n    async onRefreshTimeout() {\n        // console.log('WebSocketClient.onRefreshTimeout');\n        this.refreshTimeoutId = null;\n        this.send('ping');\n        this.startRefreshTimeout();\n    }\n    send(data) {\n        console.log('WebSocketClient.send', data);\n        this.webSocket.send(data);\n    }\n    startRefreshTimeout() {\n        this.refreshTimeoutId = setTimeout(this.onRefreshTimeout.bind(this), this.REFRESH_TIMEOUT * 1000);\n    }\n    resetRefreshTimeout() {\n        if (this.refreshTimeoutId) {\n            clearTimeout(this.refreshTimeoutId);\n            this.refreshTimeoutId = null;\n        }\n    }\n    async reconnect() {\n        console.log('WebSocketClient.reconnect');\n        try {\n            await this.connect();\n        } catch (err) {\n            console.error(err);\n            console.log(`waiting ${this.RECONNECT_TIMEOUT} sec for socket reconnect...`);\n            setTimeout(async () => await this.reconnect(), this.RECONNECT_TIMEOUT * 1000);\n        }\n    }\n\n    async onClose(e) {\n        console.error('WebSocketClient.onClose', e);\n        this.getApp().getHostApp().logError(new Error(`websocket close ${this.getApp().getModel().getDomain()}/${this.getApp().getModel().getName()}`));\n        this.resetRefreshTimeout();\n        this.webSocket.onclose = null;\n        this.webSocket.onmessage = null;\n        this.webSocket = null;\n        await this.reconnect();\n    }\n    async onMessage(e) {\n        console.log('WebSocketClient.onMessage', JSON.parse(e.data));\n        const packet = JSON.parse(e.data);\n        if (packet.type === 'result') {\n            this.getApp().getView().disableRerender();\n            await this.getApp().getModel().emitResult(packet.data);\n            this.getApp().getView().enableRerender();\n            this.getApp().getView().rerender();\n        }\n    }\n    getApp() {\n        return this.options.applicationController;\n    }\n}\n","class Controller extends EventEmitter {\n    constructor() {\n        super();\n        this.view = null;\n    }\n    onViewCreate = view => {\n        // console.log('Controller.onViewCreate');\n        this.view = view;\n    }\n    async rerender() {\n        if (this.view) {\n            return await this.view.rerender();\n        }\n        console.error(`${this.constructor.name}.rerender no view`);\n    }\n    getView() {\n        return this.view;\n    }\n    getViewClass() {\n        throw new Error(`${this.constructor.name}.getViewClass not implemented`);\n    }\n    createElement() {\n        return React.createElement(this.getViewClass(), {\n            ctrl    : this,\n            onCreate: this.onViewCreate\n        });\n    }\n}\n","class AlertController extends Controller {\n    constructor(options) {\n        super();\n        this.options = options;\n        if (!options.message) throw new Error('no message');\n        if (!options.onClose) throw new Error('no onClose');\n    }\n    getViewClass() {\n        return AlertView;\n    }\n    close(result) {\n        this.options.onClose(result);\n    }\n    onOkButtonClick = async e => {\n        this.close(true);\n    }\n    onCloseClick = async e => {\n        this.close(false);\n    }\n    onKeyDown = async e => {\n        if (e.key === 'Escape') {\n            this.close(false);\n        }\n    }\n}\n","class ConfirmController extends Controller {\n    constructor(options) {\n        super();\n        this.options = options;\n        if (!options.message) throw new Error('no message');\n        if (!options.onClose) throw new Error('no onClose');\n    }\n    getViewClass() {\n        return ConfirmView;\n    }\n    close(result) {\n        this.options.onClose(result);\n    }\n    onYesClick = e => {\n        this.close(true);\n    }\n    onCloseClick = e => {\n        this.close(false);\n    }\n    onKeyDown = async e => {\n        if (e.key === 'Escape') {\n            this.close(false);\n        }\n    }\n}\n","class LoginController extends Controller {\n    constructor(frontHostApp) {\n        super();\n        console.log(`${this.constructor.name}.constructor`);\n        this.frontHostApp = frontHostApp;\n    }\n    static create(frontHostApp) {\n        const data = frontHostApp.getData();\n        if (!data.name) throw new Error('no app name');\n        const CustomClass = FrontHostApp.getClassByName(`${data.name}LoginController`);\n        const Class = CustomClass ? CustomClass : LoginController;\n        return new Class(frontHostApp);\n    }\n    getViewClass() {\n        return LoginView;\n    }\n    getText() {\n        return this.frontHostApp.getText();\n    }\n    getFrontHostApp() {\n        return this.frontHostApp;\n    }\n    getViewClassCssBlockName() {\n        return this.getViewClass().name;\n    }\n}\n","class ModalController extends Controller {\n    constructor(options = {}) {\n        super();\n        if (!options.app) throw new Error('no app');\n        if (!options.id) throw new Error('no id');\n        this.options = options;\n    }\n    getId() {\n        return this.options.id;\n    }\n    getApp() {\n        return this.options.app;\n    }\n    async close() {\n        await this.getApp().closeModal(this);\n        if (this.options.onClose) {\n            this.options.onClose();\n        }\n    }\n}\n","class ImageDialogController extends ModalController {\n    constructor(options) {\n        // console.log('ImageDialogController.constructor', options);\n        super(options);\n        if (!options.src) throw new Error('no src');\n    }\n    getViewClass() {\n        console.log('ImageDialogController.getViewClass');\n        return ImageDialogView;\n    }\n    getSrc() {\n        return this.options.src;\n    }\n    onCloseClick = async e => {\n        await this.close();\n    }\n    onKeyDown = async e => {\n        if (e.key === 'Escape') {\n            await this.close();\n        }\n    }\n    onImageClick = async e => {\n        console.log('ImageDialogController.onImageClick');\n        await this.close();\n    }\n}\n","class ModelController extends Controller {\n    constructor(model, parent) {\n        super();\n        this.model    = model;\n        this.parent   = parent;\n        this.deinited = false;\n    }\n    init() {\n    }\n    deinit() {\n        if (this.deinited) throw new Error(`${this.model.getFullName()}: controller already deinited`);\n        this.deinited = true;\n    }\n    getModel() {\n        return this.model;\n    }\n    getParent() {\n        return this.parent;\n    }\n    getTitle() {\n        return this.getModel().getCaption();\n    }\n    getViewClass() {\n        // console.log(`${this.constructor.name}.getViewClass`, this.getModel().getAttr('viewClass'));\n        const model = this.getModel();\n        if (!model.isAttr('viewClass')) throw new Error(`${this.constructor.name} not supports view`);\n        const viewClassName = model.getAttr('viewClass');\n        return viewClassName ? eval(viewClassName) : null;\n    }\n}\n\nwindow.QForms.ModelController = ModelController;\n","class ApplicationController extends ModelController {\n    constructor(model, frontHostApp) {\n        // console.log('ApplicationController.constructor', model, view);\n        super(model, null);\n        this.frontHostApp = frontHostApp;\n        this.lastId = 0;\n        this.activePage = null;     // active non modal page\n        this.modals = [];\n        this.statusbar  = null;\n        this.homePageName = null;\n        this.webSocketClient = null;\n    }\n    static create(model, frontHostApp) {\n        // console.log('ApplicationController.create', 'debug:', ApplicationController.isDebugMode());\n        const CustomClass = FrontHostApp.getClassByName(`${model.getName()}ApplicationController`);\n        const Class = CustomClass ? CustomClass : ApplicationController;\n        return new Class(model, frontHostApp);\n    }\n    static isDebugMode() {\n        return Search.getObj()['debug'] === '1';\n    }\n    init() {\n        // console.log('ApplicationController.init');\n        super.init();\n        // this.model.on('logout' , this.onLogout);\n        this.model.on('request', this.onRequest);\n        const pageData = this.model.data.pages[0];\n        this.activePage = pageData ? this.createPage(pageData, {\n            modal : false,\n            params: this.getGlobalParams()\n        }) : null;\n        document.title = this.getTitle();\n        document.documentElement.classList.add(Helper.inIframe() ? 'iframe' : 'not-iframe');\n        const activePageName = this.getActivePageName();\n        this.homePageName = activePageName ? activePageName : document.title;\n    }\n    deinit() {\n        // this.model.off('logout', this.onLogout);\n        this.model.off('request', this.onRequest);\n        super.deinit();\n    }\n    getViewClass() {\n        return super.getViewClass() || ApplicationView;\n    }\n    createView(rootElement) {\n        // console.log('ApplicationController.createView');\n        this.view = Helper.createReactComponent(rootElement, this.getViewClass(), {ctrl: this});\n        if (this.statusbar) {\n            this.statusbar.setLastQueryTime(this.model.getAttr('time'));\n        }\n    }\n    onRequest = async e => {\n        console.log('onRequest', e);\n        if (this.statusbar) {\n            this.statusbar.setLastQueryTime(e.time);\n        }\n        // console.log('e.remoteAppVersion', e.remoteAppVersion);\n        // console.log('this.getModel().getData().versions.app', this.getModel().getData().versions.app);\n        if (this.getModel().getData().versions.app && this.getModel().getData().versions.app !== e.remoteAppVersion) {\n            this.createVersionNotificationIfNotExists();\n        }\n    }\n    createVersionNotificationIfNotExists() {\n        // console.log('ApplicationController.createVersionNotificationIfNotExists');\n        if (!document.querySelector('.version-notification')) {\n            const div = document.createElement('div');\n            div.innerHTML = this.getModel().getText().application.versionNotification;\n            div.className = 'version-notification';\n            document.querySelector(`.${this.getView().getCssBlockName()}__body`).append(div);\n        } else {\n            // console.log(`version notification already exists`);\n        }\n    }\n    getGlobalParams() {\n        return {\n            // foo: 'bar'\n        };\n    }\n    // options\n    // - modal      : boolean,\n    // - newMode    : boolean,\n    // - selectMode : boolean,\n    // - selectedKey: string,\n    // - onCreate   : function,\n    // - onSelect   : function,\n    // - onClose    : function,\n    // - params     : object,\n    createPage(pageData, options) {\n        if (options.modal === undefined) throw new Error('no options.modal');\n\n        // model\n        const pageModel = new Page(pageData, this.model, options);\n        pageModel.init();\n\n        // controller\n        const pc = PageController.create(pageModel, this, `c${this.getNextId()}`);\n        pc.init();\n\n        return pc;\n    }\n    async openPage(options) {\n        console.log('ApplicationController.openPage', options);\n        if (!options.name) throw new Error('no name');\n        if (options.key) throw new Error('openPage: key param is deprecated');\n\n        // if this page with this key is already opened, then show it\n        const pageController = this.findPageControllerByPageNameAndKey(options.name, null);\n        // console.log('pageController:', pageController);\n        if (pageController) {\n            this.onPageSelect(pageController);\n            return pageController;\n        }\n\n        const {page: pageData} = await this.model.request({\n            action : 'page',\n            page   : options.name,\n            newMode: !!options.newMode,\n            params : options.params || {}\n        });\n\n        // modal by default\n        if (options.modal === undefined) {\n            options.modal = true;\n        }\n        if (!options.onClose) {\n            const activeElement = document.activeElement;\n            options.onClose = () => {\n                if (activeElement) activeElement.focus();\n            };\n        }\n        const pc = this.createPage(pageData, options);\n        // console.log('pc:', pc);\n\n        // show\n        pc.isModal() ? this.addModal(pc) : this.addPage(pc);\n        await this.rerender();\n\n        return pc;\n    }\n    addModal(ctrl) {\n        this.modals.push(ctrl);\n    }\n    removeModal(ctrl) {\n        // console.log('ApplicationController.removeModal', ctrl);\n        const i = this.modals.indexOf(ctrl);\n        if (i === -1) throw new Error(`cannot find modal: ${ctrl.getId()}`);\n        this.modals.splice(i, 1);\n    }\n    getNextId() {\n        this.lastId++;\n        return this.lastId;\n    }\n    getNewId() {\n        return `c${this.getNextId()}`;\n    }\n    addPage(pc) {\n        if (this.activePage) {\n            this.closePage(this.activePage);\n        }\n        this.activePage = pc;\n        document.title = this.getTitle();\n    }\n    findPageControllerByPageNameAndKey(pageName, key) {\n        if (this.activePage && this.activePage.model.getName() === pageName && this.activePage.model.getKey() === key) {\n            return this.activePage;\n        }\n        return null;\n    }\n    onPageSelect(pc) {\n        console.log('ApplicationController.onPageSelect', pc.model.getName());\n    }\n    async closePage(pageController) {\n        console.log('ApplicationController.closePage', pageController.model.getFullName());\n        if (this.modals.indexOf(pageController) > -1) {\n            this.modals.splice(this.modals.indexOf(pageController), 1);\n        } else if (this.activePage === pageController) {\n            this.activePage = null;\n            document.title = '';\n        } else  {\n            throw new Error('page not found');\n        }\n        await this.rerender();\n        pageController.deinit();\n        pageController.model.deinit();\n    }\n    async onActionClick(name) {\n        console.log('ApplicationController.onActionClick', name);\n    }\n    getMenuItemsProp() {\n        // console.log('ApplicationController.getMenuItemsProp');\n        return [\n            // pages & actions\n            ...(this.model.data.menu ? Object.keys(this.model.data.menu).map(key => ({\n                name : key,\n                title: key,\n                items: this.model.data.menu[key].map(item => ({\n                    type : item.type,\n                    name : item.page || item.action,\n                    title: item.caption\n                }))\n            })) : []),\n            // user\n            ...(this.model.getUser() ? [{\n                name : 'user',\n                title: `${this.model.getDomain()}/${this.model.getUser().login}`,\n                items: [\n                    {\n                        type : 'custom',\n                        name : 'logout',\n                        title: 'Logout'\n                    }\n                ]\n            }] : [])\n        ];\n    }\n    onStatusbarCreate = statusbar => {\n        this.statusbar = statusbar;\n    }\n    onLogout = async () => {\n        console.log('ApplicationController.onLogout');\n        const result = await this.model.request({action: 'logout'});\n        location.href = this.getRootPath();\n    }\n    onMenuItemClick = async (menu, type, name) => {\n        console.log('ApplicationController.onMenuItemClick', menu, type, name);\n        if (type === 'page') {\n            await this.openPage({name: name, modal: false});\n            history.pushState({pageName: name}, '', PageController.createLink({page: name}));\n        } else if (type === 'action') {\n            try {\n                const result = await this.onActionClick(name);\n                if (!result) {\n                    throw new Error(`no handler for action '${name}'`);\n                }\n            } catch (err) {\n                console.error(err);\n                await this.alert({message: err.message});\n            }\n        } else if (type === 'custom' && name === 'logout') {\n            await this.onLogout();\n        } else {\n            throw new Error(`unknown menu type/name: ${type}/${name}`);\n        }\n    }\n    /*getFocusCtrl() {\n        if (this.modals.length > 0) {\n            return this.modals[this.modals.length - 1];\n        }\n        return this.activePage;\n    }*/\n    getActivePageName() {\n        if (this.activePage) {\n            return this.activePage.getModel().getName();\n        }\n        return null;\n    }\n    async onWindowPopState(e) {\n        console.log('ApplicationController.onWindowPopState', e.state);\n        await this.openPage({\n            name : e.state ? e.state.pageName : this.homePageName,\n            modal: false\n        });\n    }\n    getTitle() {\n        // console.log('ApplicationController.getTitle', this.activePage);\n        if (this.activePage) {\n            return `${this.activePage.getTitle()} - ${this.getModel().getCaption()}`;\n        }\n        return this.getModel().getCaption();\n    }\n    invalidate() {\n        if (this.activePage) this.activePage.invalidate();\n        this.modals.filter(ctrl => ctrl instanceof PageController).forEach(page => page.invalidate());\n    }\n    async alert(options) {\n        if (!options.title) {\n            options.title = this.getModel().getText().application.alert;\n        }\n        const activeElement = document.activeElement;\n        try {\n            return await this.frontHostApp.alert(options);\n        } finally {\n            if (activeElement) activeElement.focus();\n        }\n    }\n    async confirm(options) {\n        if (!options.title) {\n            options.title = this.getModel().getText().application.confirm;\n        }\n        if (!options.yesButton) {\n            options.yesButton = this.getModel().getText().confirm.yes;\n        }\n        if (!options.noButton) {\n            options.noButton = this.getModel().getText().confirm.no;\n        }\n        const activeElement = document.activeElement;\n        try {\n            return await this.frontHostApp.confirm(options);\n        } finally {\n            if (activeElement) activeElement.focus();\n        }\n    }\n    getRootPath() {\n        return '/';\n    }\n    async openModal(ctrl) {\n        this.addModal(ctrl);\n        await this.rerender();\n    }\n    async closeModal(ctrl) {\n        this.removeModal(ctrl);\n        await this.rerender();\n    }\n    getHostApp() {\n        return this.frontHostApp;\n    }\n    async connect() {\n        const data = this.getModel().getData();\n        this.webSocketClient = new WebSocketClient({\n            applicationController: this,\n            protocol             : data.nodeEnv === 'development' ? 'ws' : 'wss',\n            route                : data.route,\n            uuid                 : data.uuid,\n            userId               : data.user ? data.user.id : null,\n        });\n        await this.webSocketClient.connect();\n    }\n    async rpc(name, params) {\n        const result = await this.getModel().rpc(name, params);\n        /*if (result.errorMessage) {\n            this.getHostApp().logError(new Error(result.errorMessage));\n            await this.alert({\n                title     : this.getModel().getText().application.error,\n                titleStyle: {color: 'red'},\n                message   : result.errorMessage\n            });\n        }*/\n        return result;\n    }\n    getDomain() {\n        return this.getModel().getDomain();\n    }\n    getBaseUrl() {\n        return `/${this.getDomain()}`;\n    }\n}\n\nwindow.QForms.ApplicationController = ApplicationController;\n","class FieldController extends ModelController {\n    /*constructor(model, parent) {\n        super(model, parent);\n    }*/\n    static create(model, parent) {\n        // console.log('FieldController.create', model.getFullName(), parent.model.getClassName());\n        const page = model.getPage();\n        const form = model.getForm();\n        const CustomClass = FrontHostApp.getClassByName(`${page.getName()}${form.getName()}${model.getName()}FieldController`);\n        const generalClassName = `${parent.model.getClassName()}${model.getClassName()}Controller`;\n        const GeneralClass = FrontHostApp.getClassByName(generalClassName);\n        if (!GeneralClass) throw new Error(`no class ${generalClassName}`);\n        const Class = CustomClass ? CustomClass : GeneralClass;\n        return new Class(model, parent);\n    }\n    valueToString(value) {\n        // console.log('Field.valueToString', this.model.getFullName(), typeof value, value);\n        switch (typeof value) {\n            case 'string':\n                return value;\n            case 'object':\n                if (value === null) return '';\n                if (value instanceof Date) return value.toISOString();\n                return JSON.stringify(value, null, 4);\n            case 'number':\n            case 'boolean':\n                return value.toString();\n            case 'undefined':\n                return '';\n            default: throw new Error(`${this.model.getFullName()}: unknown value type: ${typeof value}, value: ${value}`);\n        }\n    }\n    stringToValue(stringValue) {\n        // console.log('FieldController.stringToValue', this.model.getFullName(), stringValue);\n        // if (stringValue === undefined) return undefined;\n        // if (stringValue === null) return null;\n        const fieldType = this.model.getType();\n        // console.log('fieldType:', fieldType);\n        if (stringValue.trim() === '') return null;\n        if (fieldType === 'object' || fieldType === 'boolean') {\n            return JSON.parse(stringValue);\n        } else if (fieldType === 'date') {\n            const date = new Date(stringValue);\n            if (date.toString() === 'Invalid Date') throw new Error(`${this.getApp().getModel().getText().error.invalidDate}: ${stringValue}`);\n            return date;\n        } else if (fieldType === 'number') {\n            const num = Number(stringValue);\n            if (isNaN(num)) throw new Error(this.getApp().getModel().getText().error.notNumber);\n            return num;\n        }\n        return stringValue;\n    }\n    getViewStyle(row) {\n        return null;\n    }\n    async openPage(options) {\n        return await this.getParent().openPage(options);\n    }\n    getForm() {\n        return this.parent;\n    }\n    getPage() {\n        return this.parent.parent;\n    }\n    getApp() {\n        return this.parent.parent.parent;\n    }\n    isVisible() {\n        return this.getModel().getAttr('visible') === 'true';\n    }\n    isAutoFocus() {\n        return this.getModel().getAttr('autoFocus') === 'true';\n    }\n    getAutocomplete() {\n        return this.getModel().getAttr('autocomplete') || null;\n    }\n    getFormat() {\n        return this.getModel().getAttr('format');\n    }\n}\nwindow.QForms.FieldController = FieldController;\n","class RowFormFieldController extends FieldController {\n    constructor(model, parent) {\n        super(model, parent);\n        this.state = {\n            value     : null,\n            parseError: null,\n            error     : null,\n            changed   : false,\n        };\n    }\n    init() {\n        const row = this.getRow();\n        const value = this.model.getValue(row);\n        this.setValue(value);\n        // console.log(this.model.getFullName(), value);\n    }\n    refill() {\n        // console.log('RowFormFieldController.refill', this.model.getFullName());\n        if (!this.view) return;\n        const value = this.model.getValue(this.getRow());\n        this.setValue(value);\n        this.resetErrors();\n        this.refreshChangedState();\n    }\n    getRow() {\n        return this.model.getForm().getRow();\n    }\n    copyValueToModel() {\n        // console.log('RowFormFieldController.copyValueToModel', this.model.getFullName());\n        this.getModel().setValue(this.getRow(), this.getValue());\n    }\n    /*_onChange(widgetValue) {\n\n    }*/\n    putValue(widgetValue) {\n        // console.log('RowFormFieldController.putValue', widgetValue);\n        this.onChange(widgetValue, false);\n    }\n    onChange = async (widgetValue, fireEvent = true) => {\n        console.log('RowFormFieldController.onChange', JSON.stringify(typeof widgetValue === 'string' ? widgetValue.substring(0, 100) : widgetValue));\n        // this._onChange(widgetValue);\n\n        this.resetErrors();\n        this.rerender();\n\n        // get value from widget\n        try {\n            this.setValueFromWidget(widgetValue);\n        } catch (err) {\n            console.error(`${this.model.getFullName()}: cannot parse view value: ${err.message}`);\n            this.state.parseError = err.message;\n        }\n\n        // validate\n        if (!this.state.parseError && this.isValidateOnChange()) {\n            this.validate();\n            if (this.isValid()) {\n                this.copyValueToModel();\n            }\n        }\n\n        // changed\n        this.refreshChangedState();\n\n        // event\n        if (fireEvent) {\n            try {\n                this.emit('change', {value: widgetValue});\n            } catch (err) {\n                console.error('unhandled change event error:', this.model.getFullName(), err);\n            }\n            this.parent.onFieldChange({source: this});\n        }\n    }\n    onBlur = (widgetValue, fireEvent = true) => {\n        console.log('RowFormFieldController.onBlur', this.model.getFullName(), JSON.stringify(widgetValue));\n        if (!this.isEditable()) return;\n\n        // this.resetErrors();\n        this.rerender();    // to clear field focus class\n\n        if (!this.isValidateOnBlur()) return;\n\n        // get value from widget\n        try {\n            this.setValueFromWidget(widgetValue);\n        } catch (err) {\n            console.error(`${this.model.getFullName()}: cannot parse view value: ${err.message}`);\n            this.state.parseError = err.message;\n        }\n\n        // validate\n        if (!this.state.parseError && this.isValidateOnBlur()) {\n            this.validate();\n            if (this.isValid()) {\n                this.copyValueToModel();\n            }\n        }\n\n        // changed\n        this.refreshChangedState();\n\n        // event\n        if (fireEvent) {\n            try {\n                this.emit('change', {value: widgetValue});\n            } catch (err) {\n                console.error('unhandled change event error:', this.model.getFullName(), err);\n            }\n            this.parent.onFieldChange({source: this});\n        }\n    }\n    getValueForWidget() {\n        const value = this.getValue();\n        // console.log('value:', this.model.getFullName(), value, typeof value);\n        return this.valueToString(value);\n    }\n    setValueFromWidget(widgetValue) {\n        // console.log('RowFormFieldController.setValueFromWidget', this.model.getFullName(), typeof widgetValue, widgetValue);\n        if (typeof widgetValue !== 'string') throw new Error(`${this.model.getFullName()}: widgetValue must be string, but got ${typeof widgetValue}`);\n        const value = this.stringToValue(widgetValue);\n        // console.log('value:', value);\n        this.setValue(value);\n    }\n    setValue(value) {\n        // console.log('RowFormFieldController.setValue', this.model.getFullName(), value);\n        this.state.value = value;\n    }\n    getValue() {\n        return this.state.value;\n    }\n    isChanged() {\n        // console.log('RowFormFieldController.isChanged', this.model.getFullName(), this.state);\n        return this.state.changed;\n    }\n    isValid() {\n        return this.state.parseError === null && this.state.error === null;\n    }\n    validate() {\n        // console.log('RowFormFieldController.validate', this.model.getFullName());\n        if (this.isVisible()) {\n            this.state.error = this.getError();\n        }\n    }\n    refreshChangedState() {\n        this.state.changed = this.calcChangedState(this.getRow());\n    }\n    getPlaceholder() {\n        // console.log('RowFormFieldController.getPlaceholder', this.model.getFullName(), this.model.getAttr('placeholder'));\n        if (this.model.getAttr('placeholder')) return this.model.getAttr('placeholder');\n        if (ApplicationController.isDebugMode()) {\n            const value = this.getValue();\n            if (value === undefined) return 'undefined';\n            if (value === null) return 'null';\n            if (value === '') return 'empty string';\n        }\n    }\n    getError() {\n        // console.log('RowFormFieldController.getError', this.model.getFullName());\n\n        // parse validator\n        if (this.view && this.view.getWidget()) {\n            try {\n                const widgetValue = this.view.getWidget().getValue();\n            } catch (err) {\n                return `can't parse value: ${err.message}`;\n            }\n        }\n\n        // null validator\n        const value = this.getValue();\n        if (this.getModel().isNotNull() && (value === null || value === undefined)) {\n            return this.getNullErrorText();\n        }\n\n        return null;\n    }\n    getNullErrorText() {\n        return this.getModel().getApp().getText().form.required;\n    }\n    isEditable() {\n        return this.parent.getMode() === 'edit' && !this.model.isReadOnly();\n    }\n    isParseError() {\n        return this.state.parseError !== null;\n    }\n    calcChangedState(row) {\n        // console.log('RowFormFieldController.calcChangedState', this.model.getFullName());\n        if (!row) throw new Error('FieldController: no row');\n        if (this.isParseError()) {\n            console.log(`FIELD CHANGED ${this.model.getFullName()}: parse error: ${this.getErrorMessage()}`);\n            return true;\n        }\n        if (!this.isValid()) {\n            console.log(`FIELD CHANGED ${this.model.getFullName()}: not valid: ${this.getErrorMessage()}`);\n            return true;\n        }\n        if (this.model.hasColumn()) {\n            const fieldRawValue = this.model.valueToRaw(this.getValue());\n            const dsRawValue = this.model.getRawValue(row);\n            if (fieldRawValue !== dsRawValue) {\n                console.log(`FIELD CHANGED ${this.model.getFullName()}`, JSON.stringify(dsRawValue), JSON.stringify(fieldRawValue));\n                return true;\n            }\n            if (this.model.isChanged(row)) {\n                let original = row[this.model.getAttr('column')];\n                let modified = this.model.getDefaultDataSource().getRowWithChanges(row)[this.model.getAttr('column')];\n                if (original) original = original.substr(0, 100);\n                if (modified) modified = modified.substr(0, 100);\n                console.log(`MODEL CHANGED ${this.model.getFullName()}:`, original, modified);\n                return true;\n            }\n        }\n        return false;\n    }\n    setError(error) {\n        this.state.error = error;\n    }\n    resetErrors() {\n        this.setError(null);\n        this.state.parseError = null;\n    }\n    getErrorMessage() {\n        if (this.state.parseError) {\n            return this.state.parseError;\n        }\n        return this.state.error;\n    }\n    renderView() {\n        return React.createElement(this.getViewClass(), {\n            onCreate: this.onViewCreate,\n            ctrl: this,\n        });\n    }\n    isValidateOnChange() {\n        return this.getModel().validateOnChange();\n    }\n    isValidateOnBlur() {\n        return this.getModel().validateOnBlur();\n    }\n    onChangePure = async (value, fireEvent = true) => {\n        console.log('RowFormFieldController.onChangePure', JSON.stringify(value));\n\n        // value\n        this.setValue(value);\n        this.resetErrors();\n        this.rerender();\n\n        // validate\n        if (this.isValidateOnChange()) {\n            this.validate();\n            if (this.isValid()) {\n                this.copyValueToModel();\n            }\n        }\n\n        // changed\n        this.refreshChangedState();\n\n        // event\n        if (fireEvent) {\n            try {\n                this.emit('change', {value});\n            } catch (err) {\n                console.error('unhandled change event error:', this.getModel().getFullName(), err);\n            }\n            this.parent.onFieldChange({source: this});\n        }\n    }\n}\nwindow.QForms.RowFormFieldController = RowFormFieldController;\n","class RowFormCheckBoxFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormCheckBoxFieldView;\n    }\n    getValueForWidget() {\n        return this.getValue();\n    }\n    setValueFromWidget(widgetValue) {\n        this.setValue(widgetValue);\n    }\n}\n\nwindow.QForms.RowFormCheckBoxFieldController = RowFormCheckBoxFieldController;\n","class RowFormCheckBoxListFieldController extends RowFormFieldController {\n    init() {\n        // console.log('RowFormCheckBoxListFieldController.init', this.getModel().getFullName());\n        super.init();\n        const dataSource = this.model.getDataSource();\n        dataSource.on('insert', this.onListInsert);\n        dataSource.on('update', this.onListUpdate);\n        dataSource.on('delete', this.onListDelete);\n    }\n    deinit() {\n        const dataSource = this.model.getDataSource();\n        dataSource.off('insert', this.onListInsert);\n        dataSource.off('update', this.onListUpdate);\n        dataSource.off('delete', this.onListDelete);\n        super.deinit();\n    }\n    getViewClass() {\n        return super.getViewClass() || RowFormCheckBoxListFieldView;\n    }\n    getRows() {\n        return this.model.getDataSource().getRows();\n    }\n    onListInsert = async e => {\n        console.log('RowFormCheckBoxListFieldController.onListInsert');\n        await this.rerender();\n    }\n    onListUpdate = async e => {\n        // console.log('RowFormCheckBoxListFieldController.onListUpdate');\n        await this.rerender();\n    }\n    onListDelete = async e => {\n        await this.rerender();\n    }\n    getValueForWidget() {\n        // console.log('RowFormCheckBoxListFieldController.getValueForWidget');\n        const value = this.getValue();\n        // console.log('value:', value);\n        return value;\n    }\n    setValueFromWidget(widgetValue) {\n        this.setValue(widgetValue);\n    }\n    getItemFromRow(row) {\n        return {\n            value: this.valueToString(this.getModel().getValueValue(row)),\n            title: this.getModel().getDisplayValue(row)\n        };\n    }\n}\n\nwindow.QForms.RowFormCheckBoxListFieldController = RowFormCheckBoxListFieldController;\n","class RowFormComboBoxFieldController extends RowFormFieldController {\n    init() {\n        // console.log('RowFormComboBoxFieldController.init', this.getModel().getFullName());\n        super.init();\n        const dataSource = this.model.getComboBoxDataSource();\n        dataSource.on('insert', this.onListInsert);\n        dataSource.on('update', this.onListUpdate);\n        dataSource.on('delete', this.onListDelete);\n    }\n    deinit() {\n        const dataSource = this.model.getComboBoxDataSource();\n        dataSource.off('insert', this.onListInsert);\n        dataSource.off('update', this.onListUpdate);\n        dataSource.off('delete', this.onListDelete);\n        super.deinit();\n    }\n    getViewClass() {\n        return super.getViewClass() || RowFormComboBoxFieldView;\n    }\n    getItems() {\n        try {\n            return this.getRows().map(row => ({\n                value: this.valueToString(this.getModel().getValueValue(row)),\n                title: this.getModel().getDisplayValue(row)\n            }));\n        } catch (err) {\n            err.message = `${this.getModel().getFullName()}: ${err.message}`;\n            throw err;\n        }\n    }\n    getRows() {\n        return this.model.getComboBoxDataSource().getRows();\n    }\n    getPlaceholder() {\n        if (this.model.getAttr('placeholder')) return this.model.getAttr('placeholder');\n        return ApplicationController.isDebugMode() ? '[null]' : null;\n    }\n    onEditButtonClick = async e => {\n        console.log('RowFormComboBoxFieldController.onEditButtonClick');\n        const itemEditPage = this.getModel().getAttr('itemEditPage');\n        const value = this.getValue();\n        // console.log('itemEditPage', itemEditPage);\n        // console.log('value:', value);\n        if (itemEditPage && value) {\n            await this.openPage({\n                name: itemEditPage,\n                params: {\n                    key: value\n                }\n            });\n        }\n    }\n    onCreateButtonClick = async e => {\n        console.log('RowFormComboBoxFieldController.onCreateButtonClick');\n        const newRowMode = this.getModel().getAttr('newRowMode');\n        const itemCreateForm = this.getModel().getAttr('itemCreateForm');\n        if (!itemCreateForm) throw new Error('no itemCreateForm');\n\n        let createPageName;\n        if (newRowMode === 'editPage') {\n            createPageName = this.getModel().getAttr('itemEditPage');\n        } else if (newRowMode === 'createPage') {\n            createPageName = this.getModel().getAttr('itemCreatePage');\n        } else {\n            throw new Error(`wrong newRowMode value: ${newRowMode}`);\n        }\n\n        // page\n        const pc = await this.openPage({\n            name: createPageName,\n            newMode: true\n        });\n\n        // form\n        const form = pc.getModel().getForm(itemCreateForm);\n        const onInsert = async e => {\n            form.off('insert', onInsert);\n            const [key] = e.inserts;\n            const [id] = Helper.decodeValue(key);\n            // console.log('id:', id);\n            await this.onChange(id.toString());\n        }\n        form.on('insert', onInsert);\n    }\n    onListInsert = async e => {\n        console.log('RowFormComboBoxFieldController.onListInsert');\n        await this.rerender();\n    }\n    onListUpdate = async e => {\n        // console.log('RowFormComboBoxFieldController.onListUpdate');\n        await this.rerender();\n    }\n    onListDelete = async e => {\n        await this.rerender();\n    }\n    onItemSelect = async e => {\n        // console.log('RowFormComboBoxFieldController.onItemSelect');\n        if (e.button === 0) {\n            e.preventDefault();\n            const id = this.getValue();\n            const selectedKey = id ? JSON.stringify([id]) : null;\n            await this.openPage({\n                name       : this.getModel().getAttr('itemSelectPage'),\n                selectMode : true,\n                selectedKey: selectedKey,\n                onSelect   : async key => {\n                    if (key) {\n                        const [id] = Helper.decodeValue(key);\n                        // console.log('id:', id);\n                        if (this.getValue() !== id) {\n                            await this.getView().onChange(id.toString());\n                        }\n                    } else {\n                        if (this.getValue() !== null) {\n                            await this.getView().onChange('');\n                        }\n                    }\n                }\n            });\n        }\n    }\n}\n\nwindow.QForms.RowFormComboBoxFieldController = RowFormComboBoxFieldController;\n","class RowFormDateFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormDateFieldView;\n    }\n    getValueForWidget() {\n        return this.getValue();\n    }\n    setValueFromWidget(widgetValue) {\n        this.setValue(widgetValue);\n    }\n}\nwindow.QForms.RowFormDateFieldController = RowFormDateFieldController;\n","class RowFormDateTimeFieldController extends RowFormFieldController {\n    constructor(...args) {\n        super(...args);\n        this.widget2 = null;\n        this.defaultValue = 0;\n        this.state.parseError2 = null;\n        this.state.error2 = null;\n    }\n    getViewClass() {\n        return super.getViewClass() || RowFormDateTimeFieldView;\n    }\n    getValueForWidget() {\n        return this.getValue();\n    }\n    getValueForTime() {\n        // console.log('RowFormDateTimeFieldController.getValueForTime', this.model.getFullName(), this.defaultValue, TimeBox.getStringValue(this.defaultValue));\n        const date = this.getValue();\n        if (date) {\n            const value = date.getHours() * 60 + date.getMinutes();\n            // console.log('value:', value);\n            if (value !== this.defaultValue) {\n                // console.log('not equal to default value', value, this.defaultValue);\n                return value;\n            }\n        }\n        return null;\n    }\n    setValueFromWidget(widgetValue) {\n        if (widgetValue === null) {\n            this.state.parseError2 = null;\n            this.resetErrors2();\n            if (this.widget2) this.widget2.setValue(null);\n        } else {\n            const [h, m] = TimeBox.splitTime(this.defaultValue);\n            widgetValue.setHours(h, m);\n        }\n        this.setValue(widgetValue);\n    }\n    onView2Create = widget2 => {\n        // console.log('RowFormDateTimeFieldController.onView2Create', widget2);\n        this.widget2 = widget2;\n    }\n    /*_onChange(widgetValue) {\n        // console.log('RowFormDateTimeFieldController._onChange', this.widget2);\n        if (widgetValue !== null) {\n            setTimeout(() => {\n                const input = this.widget2.getInputElement();\n                input.focus();\n                input.setSelectionRange(0, input.value.length);\n            }, 0);\n        }\n    }*/\n    onChange2 = (widgetValue, fireEvent = true) => {\n        // console.log('RowFormDateTimeFieldController.onChange2', widgetValue);\n        this.resetErrors();\n        this.resetErrors2();\n        this.rerender();\n\n        if (!this.isValidateOnChange2()) return;\n\n        try {\n            this.setValueFromView2(widgetValue);\n        } catch (err) {\n            console.log(`${this.model.getFullName()}: cannot parse time: ${err.message}`);\n            this.state.parseError2 = err.message;\n        }\n\n        // validate\n        if (!this.state.parseError2) {\n            this.validate2();\n            if (this.isValid()) {\n                this.copyValueToModel();\n            }\n        }\n\n        // changed\n        this.refreshChangedState();\n\n        // event\n        if (fireEvent) {\n            try {\n                this.emit('change', {value: widgetValue});\n            } catch (err) {\n                console.error('unhandled change event error:', this.model.getFullName(), err);\n            }\n            this.parent.onFieldChange({source: this});\n        }\n    }\n    onBlur2 = (widgetValue, fireEvent = true) => {\n        console.log('RowFormDateTimeFieldController.onBlur2', widgetValue);\n        if (!this.isEditable()) return;\n\n        this.resetErrors2();\n        this.rerender();\n\n        // get value from widget\n        try {\n            this.setValueFromView2(widgetValue);\n        } catch (err) {\n            console.log(`${this.model.getFullName()}: cannot parse time: ${err.message}`);\n            this.state.parseError2 = err.message;\n        }\n\n        // validate\n        if (!this.state.parseError2) {\n            this.validate2();\n            if (this.isValid()) {\n                this.copyValueToModel();\n            }\n        }\n\n        // changed\n        this.refreshChangedState();\n\n        // event\n        if (fireEvent) {\n            try {\n                this.emit('change', {value: widgetValue});\n            } catch (err) {\n                console.error('unhandled change event error:', this.model.getFullName(), err);\n            }\n            this.parent.onFieldChange({source: this});\n        }\n    }\n    getPlaceholder2() {\n        return TimeBox.getStringValue(this.defaultValue);\n    }\n    getDefaultValue() {\n        return this.defaultValue;\n    }\n    setDefaultValue2(defaultValue) {\n        // console.log('RowFormDateTimeFieldController.setDefaultValue2', this.widget2 ? this.widget2.getValue() : null);\n        if (typeof defaultValue === 'string') {\n            this.defaultValue = TimeBox.getIntegerValue(defaultValue);\n        } else {\n            if (defaultValue >= 24 * 60) throw new Error(`wrong default value: ${defaultValue}`);\n            this.defaultValue = defaultValue;\n        }\n        if (this.widget2 && this.widget2.getValue() === null && this.state.value) {\n            this.setValue2(null);\n        }\n    }\n    setValueFromView2(widgetValue) {\n        if (isNaN(widgetValue)) throw new Error(this.getTimeErrorText());\n        this.setValue2(widgetValue);\n    }\n    getTimeErrorText() {\n        return this.getModel().getApp().getText().field.timeNotValid;\n    }\n    setValue2(widgetValue) {\n        const value = widgetValue !== null ? widgetValue : this.defaultValue;\n        const [h, m] = TimeBox.splitTime(value);\n        this.state.value.setHours(h, m);\n    }\n    validate2() {\n        // console.log('RowFormFieldController.validate', this.model.getFullName());\n        this.state.error2 = this.getError2();\n    }\n    getError2() {\n        // console.log('RowFormFieldController.getError', this.model.getFullName());\n\n        // parse validator\n        if (this.widget2) {\n            try {\n                const widgetValue = this.widget2.getValue();\n            } catch (err) {\n                return `can't parse time: ${err.message}`;\n            }\n        }\n\n        return null;\n    }\n    isParseError2() {\n        return this.state.parseError2 !== null;\n    }\n    resetErrors2() {\n        this.setError2(null);\n        this.state.parseError2 = null;\n    }\n    setError2(error2) {\n        this.state.error2 = error2;\n    }\n    getErrorMessage2() {\n        if (this.state.parseError2) {\n            return this.state.parseError2;\n        }\n        return this.state.error2;\n    }\n    isValid2() {\n        return this.state.parseError2 === null && this.state.error2 === null;\n    }\n    refill() {\n        // console.log('RowFormDateTimeFieldController.refill');\n        if (!this.widget2) return;\n        super.refill();\n        this.widget2.setValue(this.getValueForTime());\n        this.resetErrors2();\n        this.refreshChangedState();\n    }\n    isParseError() {\n        return super.isParseError() || this.isParseError2();\n    }\n    isValid() {\n        return super.isValid() && this.isValid2();\n    }\n    getErrorMessage() {\n        if (super.getErrorMessage() === null && this.getErrorMessage2() === null) return null;\n        return [\n            ...(super.getErrorMessage() ? [super.getErrorMessage()] : []),\n            ...(this.getErrorMessage2() ? [this.getErrorMessage2()] : [])\n        ].join(', ');\n    }\n    isValidateOnChange2() {\n        return true;\n    }\n    isValidateOnBlur2() {\n        return false;\n    }\n}\nwindow.QForms.RowFormDateTimeFieldController = RowFormDateTimeFieldController;\n","class RowFormFileFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormFileFieldView;\n    }\n}\nwindow.QForms.RowFormFileFieldController = RowFormFileFieldController;\n","class RowFormImageFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormImageFieldView;\n    }\n}\nwindow.QForms.RowFormImageFieldController = RowFormImageFieldController;\n","class RowFormLinkFieldController extends  RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormLinkFieldView;\n    }\n    onClick = e => {\n        console.log('RowFormLinkFieldController.onClick', e);\n        this.emit({source: this});\n    }\n}\nwindow.QForms.RowFormLinkFieldController = RowFormLinkFieldController;\n","class RowFormPasswordFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormPasswordFieldView;\n    }\n}\nwindow.QForms.RowFormPasswordFieldController = RowFormPasswordFieldController;\n","class RowFormPhoneFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormPhoneFieldView;\n    }\n    getPhoneFormatErrorText() {\n        return this.getModel().getApp().getText().form.phoneNumberFormatError;\n    }\n\n    getError() {\n        const error = super.getError();\n        if (error) return error;\n\n        // russian phone format validator\n        const value = this.getValue();\n        if (value && value.substr(0,2) === '+7' && value.length < 12) {\n            return this.getPhoneFormatErrorText();\n        }\n\n        return null;\n    }\n}\nwindow.QForms.RowFormPhoneFieldController = RowFormPhoneFieldController;\n","class RowFormRadioFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormRadioFieldView;\n    }\n    getItems() {\n        try {\n            return this.getRows().map(row => ({\n                // value: this.valueToString(this.getModel().getValueValue(row)),\n                value: this.getModel().getValueValue(row),\n                title: this.getModel().getDisplayValue(row)\n            }));\n        } catch (err) {\n            err.message = `${this.getModel().getFullName()}: ${err.message}`;\n            throw err;\n        }\n    }\n    getRows() {\n        return this.getModel().getDataSource().getRows();\n    }\n}\n","class RowFormTextAreaFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormTextAreaFieldView;\n    }\n}\nwindow.QForms.RowFormTextAreaFieldController = RowFormTextAreaFieldController;\n","class RowFormTextBoxFieldController extends RowFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || RowFormTextBoxFieldView;\n    }\n}\nwindow.QForms.RowFormTextBoxFieldController = RowFormTextBoxFieldController;\n","class RowFormTimeFieldController extends RowFormFieldController {\n    constructor(...args) {\n        super(...args);\n        this.defaultValue = null;\n    }\n    getViewClass() {\n        return super.getViewClass() || RowFormTimeFieldView;\n    }\n    getValueForWidget() {\n        return this.getValue();\n    }\n    setValueFromWidget(widgetValue) {\n        if (isNaN(widgetValue)) throw new Error('wrong time');\n        this.setValue(widgetValue);\n    }\n    getDefaultValue() {\n        return this.defaultValue;\n    }\n    setDefaultValue2(defaultValue) {\n        if (typeof defaultValue === 'string') {\n            this.defaultValue = TimeBox.getIntegerValue(defaultValue);\n        } else {\n            if (defaultValue >= 24*60) throw new Error(`wrong default value: ${defaultValue}`);\n            this.defaultValue = defaultValue;\n        }\n    }\n    getPlaceholder() {\n        // console.log('CarReservefromTimeController.getPlaceholder', this.defaultValue);\n        if (this.defaultValue !== null) return TimeBox.getStringValue(this.defaultValue);\n        return super.getPlaceholder();\n    }\n}\nwindow.QForms.RowFormTimeFieldController = RowFormTimeFieldController;\n","class TableFormFieldController extends FieldController {\n    getValueForWidget(row) {\n        // console.log('TableFormFieldController.getValueForWidget');\n        return this.valueToString(this.model.getValue(row));\n    }\n}\nwindow.QForms.TableFormFieldController = TableFormFieldController;\n","class TableFormCheckBoxFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormCheckBoxFieldView;\n    }\n    getValueForWidget(row) {\n        return this.model.getValue(row);\n    }\n}\nwindow.QForms.TableFormCheckBoxFieldController = TableFormCheckBoxFieldController;\n","class TableFormComboBoxFieldController extends TableFormFieldController {\n\n    init() {\n        super.init();\n        const dataSource = this.getModel().getComboBoxDataSource();\n        dataSource.on('insert', this.onListUpdate);\n        dataSource.on('update', this.onListUpdate);\n        dataSource.on('delete', this.onListUpdate);\n    }\n\n    deinit() {\n        const dataSource = this.getModel().getComboBoxDataSource();\n        dataSource.off('insert', this.onListUpdate);\n        dataSource.off('update', this.onListUpdate);\n        dataSource.off('delete', this.onListUpdate);\n        super.deinit();\n    }\n\n    getViewClass() {\n        return super.getViewClass() || TableFormComboBoxFieldView;\n    }\n\n    getValueForWidget(row) {\n        const value = this.model.getValue(row);\n        const rawValue = this.model.valueToRaw(value);\n        if (rawValue === undefined || rawValue === 'null') return '';\n        const cbRow = this.model.findRowByRawValue(rawValue);\n        if (cbRow) {\n            return this.valueToString(this.model.getDisplayValue(cbRow));\n        }\n        return `[no row for id: ${rawValue}]`;\n    }\n\n    onListUpdate = async e => {\n        // console.log('TableFormComboBoxFieldController.onListUpdate', this.getModel().getFullName());\n        this.getForm().invalidate();\n        await this.getForm().rerender();\n    }\n\n}\nwindow.QForms.TableFormComboBoxFieldController = TableFormComboBoxFieldController;\n","class TableFormDateFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormDateFieldView;\n    }\n    getValueForWidget(row) {\n        const value = this.model.getValue(row);\n        if (value) return Helper.formatDate(value, this.getFormat() || '{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}');\n        return '';\n    }\n}\nwindow.QForms.TableFormDateFieldController = TableFormDateFieldController;\n","class TableFormDateTimeFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormDateTimeFieldView;\n    }\n    getValueForWidget(row) {\n        const value = this.model.getValue(row);\n        if (value) return Helper.formatDate(value, this.getFormat() || '{DD}.{MM}.{YYYY} {hh}:{mm}:{ss}');\n        return '';\n    }\n}\nwindow.QForms.TableFormDateTimeFieldController = TableFormDateTimeFieldController;\n","class TableFormLinkFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormLinkFieldView;\n    }\n    onClick = e => {\n        console.log('TableFormLinkFieldController.onClick', e);\n        e.preventDefault();\n        this.emit('click', {source: this});\n    }\n}\nwindow.QForms.TableFormLinkFieldController = TableFormLinkFieldController;\n","class TableFormPhoneFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormPhoneFieldView;\n    }\n}\n","class TableFormTextAreaFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormTextAreaFieldView;\n    }\n}\nwindow.QForms.TableFormTextAreaFieldController = TableFormTextAreaFieldController;\n","class TableFormTextBoxFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormTextBoxFieldView;\n    }\n    /*beginEdit(view) {\n        view.firstElementChild.style.MozUserSelect = 'text';\n        view.firstElementChild.contentEditable = true;\n        const range = document.createRange();\n        range.selectNodeContents(view.firstElementChild);\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n        view.firstElementChild.focus();\n        return true;\n    }*/\n\n    /*endEdit(view) {\n        view.firstElementChild.style.MozUserSelect = 'none';\n        view.firstElementChild.contentEditable = false;\n    }*/\n}\nwindow.QForms.TableFormTextBoxFieldController = TableFormTextBoxFieldController;\n","class TableFormTimeFieldController extends TableFormFieldController {\n    getViewClass() {\n        return super.getViewClass() || TableFormTimeFieldView;\n    }\n    getValueForWidget(row) {\n        const value = this.model.getValue(row);\n        return TimeBox.getStringValue(value);\n    }\n}\nwindow.QForms.TableFormTimeFieldController = TableFormTimeFieldController;\n","class FormController extends ModelController {\n    static create(model, parent) {\n        // console.log('FormController.create', model.getFullName());\n        const page = model.getPage();\n        const customClassName = `${page.getName()}${model.getName()}FormController`;\n        const CustomClass = FrontHostApp.getClassByName(customClassName);\n        const GeneralClass = FrontHostApp.getClassByName(`${model.getClassName()}Controller`);\n        const Class = CustomClass ? CustomClass : GeneralClass;\n        return new Class(model, parent);\n    }\n    constructor(model, parent) {\n        super(model, parent);\n        this.fields = {};\n    }\n    init() {\n        for (const field of this.model.fields) {\n            const ctrl = this.fields[field.getName()] = FieldController.create(field, this);\n            ctrl.init();\n        }\n    }\n    deinit() {\n        // console.log('FormController.deinit:', this.model.getFullName());\n        for (const name in this.fields) {\n            this.fields[name].deinit();\n        }\n        super.deinit();\n    }\n    isValid() {\n        return true;\n    }\n    async openPage(options) {\n        return await this.getPage().openPage(options);\n    }\n    getPage() {\n        return this.parent;\n    }\n    isChanged() {\n        return false;\n    }\n    async onFieldChange(e) {\n        // console.log('FormController.onFieldChange', this.model.getFullName());\n        await this.getPage().onFormChange(e);\n    }\n    getUpdated() {\n        return this.state.updated;\n    }\n    invalidate() {\n        this.state.updated = Date.now();\n    }\n    async onActionClick(name, row) {\n        console.log('FormController.onActionClick', name, row);\n    }\n    getField(name) {\n        return this.fields[name];\n    }\n    getApp() {\n        return this.parent.parent;\n    }\n    getSelectedRowKey() {\n        return null;\n    }\n    isAutoFocus() {\n        for (const name in this.fields) {\n            if (this.fields[name].isAutoFocus()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isVisible() {\n        return this.getModel().getAttr('visible') === 'true';\n    }\n}\nwindow.QForms.FormController = FormController;\n","class RowFormController extends FormController {\n    constructor(model, parent) {\n        super(model, parent);\n        this.state = {\n            updated: Date.now(),\n            mode   : 'edit',\n            hasNew : false,\n            changed: false,\n            valid  : true\n        };\n    }\n\n    init() {\n        super.init();\n        this.model.on('refresh', this.onModelRefresh);\n        this.model.on('insert' , this.onModelInsert);\n        this.model.on('update' , this.onModelUpdate);\n        if (this.model.getDefaultDataSource().getClassName() === 'SqlDataSource') {\n            this.state.mode = 'view';\n        }\n        this.calcState();\n        if (this.state.hasNew) {\n            this.state.mode = 'edit';\n        }\n    }\n\n    deinit() {\n        // console.log('RowFormController.deinit', this.model.getFullName());\n        this.model.off('refresh', this.onModelRefresh);\n        this.model.off('insert' , this.onModelInsert);\n        this.model.off('update' , this.onModelUpdate);\n        super.deinit();\n    }\n\n    calcState() {\n        this.state.hasNew  = this.model.hasNew();\n        this.state.changed = this.isChanged();\n        this.state.valid   = this.isValid();\n        // console.log('hasNew:', hasNew);\n        // console.log('changed:', changed);\n        // console.log('valid:', valid);\n    }\n\n    refill() {\n        console.log('RowFormController.refill', this.model.getFullName());\n        for (const name in this.fields) {\n            this.fields[name].refill();\n        }\n    }\n\n    onModelRefresh = async e => {\n        console.log('RowFormController.onModelRefresh', this.model.getFullName());\n        if (!this.view) return;\n        this.refill();\n        this.invalidate();\n        this.rerender();\n    }\n\n    onModelInsert = async e => {\n        console.log('RowFormController.onModelInsert', this.model.getFullName());\n        this.refill();\n        this.invalidate();\n        this.calcState();\n        this.parent.onFormInsert(e);\n    }\n\n    onModelUpdate = async e => {\n        console.log('RowFormController.onModelUpdate', this.model.getFullName(), e);\n        this.refill();\n        this.invalidate();\n        this.calcState();\n        this.parent.onFormUpdate(e);\n    }\n\n    isValid() {\n        // console.log('RowFormController.isValid', this.model.getFullName());\n        for (const name in this.fields) {\n            const field = this.fields[name];\n            if (!field.isValid()) return false;\n        }\n        return true;\n    }\n    validate() {\n        // console.log('RowFormController.validate', this.getModel().getFullName());\n        for (const name in this.fields) {\n            this.fields[name].validate();\n        }\n        this.invalidate();\n    }\n    clearFieldsError() {\n        for (const name in this.fields) {\n            this.fields[name].setError(null);\n        }\n    }\n    onSaveClick = async () => {\n        console.log('RowFormController.onSaveClick');\n        this.validate();\n        this.calcState();\n        if (this.isValid()) {\n            try {\n                this.getApp().getView().disableRerender();\n                await this.model.update();\n                this.state.mode = 'view';\n                console.log('form model updated', this.getModel().getFullName());\n            } finally {\n                this.getApp().getView().enableRerender();\n                await this.getApp().getView().rerender();\n            }\n        } else {\n            console.error(`cannot update invalid row form: ${this.model.getFullName()}`);\n            await this.rerender();\n        }\n    }\n\n    onDiscardClick = () => {\n        console.log('RowFormController.onDiscardClick', this.model.getFullName());\n        const changedFields = [];\n        const row = this.model.getRow();\n        for (const name in this.fields) {\n            const field = this.fields[name];\n            if (field.isChanged(row) || !field.isValid()) {\n                changedFields.push(name);\n            }\n        }\n        // console.log('changedFields:', changedFields);\n        this.model.discard(changedFields);\n\n        // refill changed fields\n        changedFields.forEach(name => {\n            this.fields[name].refill();\n        });\n\n        // ui\n        this.calcState();\n        if (this.getModel().hasDefaultSqlDataSource()) {\n            this.state.mode = 'view';\n        }\n        this.rerender();\n\n        // event\n        this.parent.onFormDiscard(this);\n    }\n\n    onRefreshClick = async () => {\n        // console.log('RowFormController.onRefreshClick', this.model.getFullName());\n        await this.model.refresh();\n    }\n\n    isChanged() {\n        // console.log('RowFormController.isChanged', this.model.getFullName());\n        if (this.model.isChanged()) return true;\n        const row = this.model.getRow();\n        for (const name in this.fields) {\n            const field = this.fields[name];\n            if (field.isChanged(row)) return true;\n        }\n        return false;\n    }\n\n    async onFieldChange(e) {\n        // console.log('RowFormController.onFieldChange', this.model.getFullName());\n        this.calcState();\n        this.invalidate();\n        await super.onFieldChange(e);\n    }\n\n    onEditClick = e => {\n        console.log('RowFormController.onEditClick');\n        this.state.mode = 'edit';\n        this.rerender();\n    }\n    onCancelClick = e => {\n        console.log('RowFormController.onCancelClick');\n        this.state.mode = 'view';\n        this.rerender();\n    }\n    getViewClass() {\n        // console.log('RowFormController.getViewClass', this.model.getFullName());\n        return super.getViewClass() || RowFormView;\n    }\n    getActiveRow(withChanges) {\n        return this.model.getRow(withChanges);\n    }\n    getMode() {\n        return this.state.mode;\n    }\n    isActionEnabled(name) {\n        return this.isViewMode();\n    }\n    isEditMode() {\n        return this.getMode() === 'edit';\n    }\n    isViewMode() {\n        return this.getMode() === 'view';\n    }\n}\nwindow.QForms.RowFormController = RowFormController;\n","class TableFormController extends FormController {\n    constructor(model, parent) {\n        super(model, parent);\n        this.state = {\n            updated: Date.now()\n        };\n        this.grid = null;\n    }\n    getViewClass() {\n        return super.getViewClass() || TableFormView;\n    }\n    init() {\n        super.init();\n        // this.parent.on('hide', this.onHidePage);\n        // this.parent.on('show', this.onShowPage);\n        this.model.on('refresh', this.onModelRefresh);\n        this.model.on('update' , this.onModelUpdate);\n        this.model.on('delete' , this.onModelDelete);\n        this.model.on('insert' , this.onModelInsert);\n    }\n    deinit() {\n        // this.parent.off('hide', this.onHidePage);\n        // this.parent.off('show', this.onShowPage);\n        this.model.off('refresh', this.onModelRefresh);\n        this.model.off('update' , this.onModelUpdate);\n        this.model.off('delete' , this.onModelDelete);\n        this.model.off('insert' , this.onModelInsert);\n        super.deinit();\n    }\n    onGridCreate = grid => {\n        this.grid = grid;\n    }\n    onNewClick = async e => {\n        console.log('TableFormController.onNewClick');\n        await this.new();\n    }\n    onRefreshClick = async e => {\n        console.log('TableFormController.onRefreshClick', this.model.getFullName());\n        await this.model.refresh();\n        // console.error('refresh error handler:', err.message);\n        // alert(err.message);\n    }\n    onDeleteClick = async e => {\n        console.log('TableFormController.onDeleteClick', this.model.getFullName(), this.grid.getActiveRowKey());\n        const result = await this.getApp().confirm({message: this.model.getApp().getText().form.areYouSure});\n        if (result) {\n            await this.model.getDefaultDataSource().delete(this.grid.getActiveRowKey());\n        }\n    }\n    onGridCellDblClick = async (row, key) => {\n        // console.log('TableFormController.onGridCellDblClick', row);\n        // const bodyCell = e.bodyCell;\n        // const row = bodyCell.bodyRow.dbRow;\n        // console.log('row:', row);\n        // const key = this.model.getDefaultDataSource().getRowKey(row);\n        // console.log('key:', key);\n        switch (this.model.getAttr('editMethod')) {\n            // case 'table':\n            //     this.grid.gridColumns[bodyCell.qFieldName].beginEdit(bodyCell);\n            // break;\n            case 'form':\n                if (this.getPage().getModel().isSelectMode()) {\n                    await this.getPage().selectRow(key);\n                } else {\n                    await this.edit(key);\n                }\n            break;\n        }\n    }\n    onGridLinkClick = async key => {\n        console.log('TableFormController.onGridLinkClick', key);\n        await this.edit(key);\n    }\n    onGridDeleteKeyDown = async (row, key) => {\n        console.log('TableFormController.onGridDeleteKeyDown', row, key);\n        if (this.getModel().getAttr('deleteRowMode') !== 'disabled') {\n            const result = await this.getApp().confirm({message: this.model.getApp().getText().form.areYouSure});\n            if (result) {\n                await this.model.getDefaultDataSource().delete(key);\n            }\n        }\n    }\n    /*onHidePage = async () => {\n        this.grid.saveScroll();\n    }*/\n    /*onShowPage = async () => {\n        console.log('TableFormController.onShowPage', this.model.getFullName());\n        if (!this.grid.isHidden()) {\n            this.grid.restoreScroll();\n            this.grid.focus();\n            // console.log('document.activeElement:', document.activeElement);\n        }\n    }*/\n    async new() {\n        if (this.model.getAttr('newRowMode') === 'oneclick') {\n            const row = {};\n            this.model.fillDefaultValues(row);\n            await this.model.getDefaultDataSource().insert(row);\n        } else if (this.model.getAttr('newRowMode') === 'editform') {\n            if (!this.model.getAttr('itemEditPage')) {\n                throw new Error(`[${this.model.getFullName()}] itemEditPage is empty`);\n            }\n            await this.openPage({\n                name   : this.model.getAttr('itemEditPage'),\n                newMode: true,\n                modal  : true\n            });\n        } else if (this.model.getAttr('newRowMode') === 'createform') {\n            if (!this.model.getAttr('itemCreatePage')) {\n                throw new Error(`[${this.model.getFullName()}] itemCreatePage is empty`);\n            }\n            await this.openPage({\n                name   : this.model.getAttr('itemCreatePage'),\n                newMode: true,\n                modal  : true\n            });\n        } else if (this.model.getAttr('newRowMode') === 'oneclick editform') {\n            if (!this.model.getAttr('itemEditPage')) {\n                throw new Error(`[${this.model.getFullName()}] itemEditPage is empty`);\n            }\n            const row = {};\n            this.model.fillDefaultValues(row);\n            const result = await this.model.getDefaultDataSource().insert(row);\n            const database = this.model.getDefaultDataSource().getAttr('database');\n            const table = this.model.getDefaultDataSource().getAttr('table');\n            const [key] = result[database][table].insert;\n            await this.openPage({\n                name : this.model.getAttr('itemEditPage'),\n                // key  : key,\n                modal: true,\n                params: {\n                    ...DataSource.keyToParams(key)\n                }\n            });\n        } else if (this.model.getAttr('newRowMode') === 'oneclick createform') {\n            if (!this.model.getAttr('itemCreatePage')) {\n                throw new Error(`[${this.model.getFullName()}] itemCreatePage is empty`);\n            }\n            const row = {};\n            this.model.fillDefaultValues(row);\n            const result = await this.model.getDefaultDataSource().insert(row);\n            const database = this.model.getDefaultDataSource().getAttr('database');\n            const table = this.model.getDefaultDataSource().getAttr('table');\n            const [key] = result[database][table].insert;\n            await this.openPage({\n                name : this.model.getAttr('itemCreatePage'),\n                // key  : key,\n                modal: true,\n                params: {\n                    ...DataSource.keyToParams(key)\n                }\n            });\n        }\n    }\n    async edit(key) {\n        // console.log('TableForm.edit', this.model.getFullName(), key);\n        if (!this.model.getAttr('itemEditPage')) {\n            throw new Error(`${this.model.getFullName()}: itemEditPage is empty`);\n        }\n        try {\n            await this.openPage({\n                name : this.model.getAttr('itemEditPage'),\n                modal: true,\n                params: {\n                    ...DataSource.keyToParams(key)\n                }\n            });\n        } catch (err) {\n            // console.error(`${this.model.getFullName()}: edit form error handler:`, err);\n            // alert(`${this.model.getFullName()}: ${err.message}`);\n            err.message = `${this.model.getFullName()} edit: ${err.message}`;\n            throw err;\n        }\n    }\n    onModelRefresh = async e => {\n        console.log('TableFormController.onModelRefresh', this.model.getFullName(), e);\n        if (!this.view) return;\n        this.invalidate();\n        await this.rerender();\n    }\n    onModelInsert = async e => {\n        console.log('TableFormController.onModelInsert', this.model.getFullName(), e);\n        if (!this.view) return;\n        if (this.grid && e.source) {\n            for (const key of e.inserts) {\n                this.grid.setActiveRowKey(key);\n            }\n        }\n        this.invalidate();\n        await this.rerender();\n    }\n    onModelUpdate = async e => {\n        console.log('TableFormController.onModelUpdate', this.model.getFullName(), e, this.view);\n        if (!this.view) return;\n        if (this.grid) {\n            for (const key in e.updates) {\n                if (this.grid.getActiveRowKey() === key) {\n                    const newKey = e.updates[key];\n                    if (key !== newKey) {\n                        this.grid.setActiveRowKey(newKey);\n                    }\n                }\n            }\n        }\n        this.invalidate();\n        await this.rerender();\n    }\n    onModelDelete = async e => {\n        console.log('TableFormController.onModelDelete', this.model.getFullName(), e);\n        if (!this.view) return;\n        if (this.grid) {\n            for (const key of e.deletes) {\n                if (this.grid.getActiveRowKey() === key) {\n                    this.grid.setActiveRowKey(null);\n                }\n            }\n        }\n        this.invalidate();\n        await this.rerender();\n    }\n\n    onGridSelectionChange = async key => {\n        // console.log('TableFormController.onGridSelectionChange', key);\n        this.invalidate();\n        await this.getPage().rerender();\n    }\n    getActiveRow() {\n        const key = this.grid.getActiveRowKey();\n        if (!key) throw new Error(`${this.model.getFullName()}: no active row key`);\n        return this.model.getDefaultDataSource().getRow(key);\n    }\n    isRowSelected = () => {\n        // console.log('TableFormController.isRowSelected');\n        return !!this.grid && !!this.grid.getActiveRowKey();\n    }\n    onFrameChanged = async value => {\n        // console.log('TableFormController.onFrameChanged', parseInt(value));\n        const frame = parseInt(value);\n        this.model.getDefaultDataSource().setFrame(frame);\n        this.model.getDefaultDataSource().refresh();\n        await this.rerender();\n    }\n    onNextClick = async () => {\n        console.log('TableFormController.onNextClick');\n        const frame = this.model.getDefaultDataSource().getFrame() + 1;\n        this.model.getDefaultDataSource().setFrame(frame);\n        this.model.getDefaultDataSource().refresh();\n        await this.rerender();\n    }\n\n    onPreviousClick = async () => {\n        console.log('TableFormController.onPreviousClick');\n        const frame = this.model.getDefaultDataSource().getFrame() - 1;\n        this.model.getDefaultDataSource().setFrame(frame);\n        this.model.getDefaultDataSource().refresh();\n        this.rerender();\n    }\n    canPrev() {\n        return this.model.getDefaultDataSource().getFrame() > 1;\n    }\n    canNext() {\n        const ds = this.model.getDefaultDataSource();\n        return ds.getFrame() < ds.getFramesCount();\n    }\n    getSelectedRowKey() {\n        return this.grid ? this.grid.getActiveRowKey() : null;\n    }\n    isActionEnabled(name) {\n        return this.isRowSelected();\n    }\n}\nwindow.QForms.TableFormController = TableFormController;\n","class PageController extends ModelController {\n    constructor(model, parent, id) {\n        //console.log('PageController.constructor', model);\n        super(model, parent);\n        if (!id) throw new Error('no id');\n        this.id = id;\n        this.forms = [];\n    }\n\n    static create(model, parent, id, options) {\n        // console.log('PageController.create', model.getName());\n        const CustomClass = FrontHostApp.getClassByName(`${model.getName()}PageController`);\n        const Class = CustomClass ? CustomClass : PageController;\n        return new Class(model, parent, id, options);\n    }\n\n    init() {\n        for (const form of this.model.forms) {\n            const ctrl = FormController.create(form, this);\n            ctrl.init();\n            this.forms.push(ctrl);\n        }\n    }\n\n    deinit() {\n        console.log('PageController.deinit: ' + this.model.getFullName());\n        for (const form of this.forms) {\n            form.deinit();\n        }\n        super.deinit();\n    }\n\n    onSaveAndCloseClick = async () => {\n        console.log('PageController.onSaveAndCloseClick');\n        this.validate();\n        if (this.isValid()) {\n            try {\n                this.getApp().getView().disableRerender();\n                await this.getModel().update();\n                console.log('page model updated', this.getModel().getFullName());\n            } finally {\n                this.getApp().getView().enableRerender();\n            }\n            await this.getApp().closePage(this);\n            if (this.getModel().getOptions().onClose) {\n                this.getModel().getOptions().onClose();\n            }\n        } else {\n            await this.rerender();\n        }\n    }\n\n    onClosePageClick = async e => {\n        console.log('PageController.onClosePageClick', this.getModel().getFullName());\n        await this.close();\n    }\n\n    onOpenPageClick = async e => {\n        const name = this.getModel().getName();\n        const key = this.getModel().getKey();\n        const link = this.createOpenInNewLink(name, key);\n        // console.log('link', link);\n        window.open(link, '_blank');\n    }\n    createOpenInNewLink(name, key) {\n        return PageController.createLink({\n            page: name,\n            ...DataSource.keyToParams(key)\n        });\n    }\n    async close() {\n        // console.log('PageController.close', this.model.getFullName());\n        const changed = this.isChanged();\n        // console.log('changed:', changed);\n        // const valid = this.isValid();\n        // console.log('valid:', valid);\n        if (this.model.hasRowFormWithDefaultSqlDataSource() && changed) {\n            const result = await this.getApp().confirm({message: this.model.getApp().getText().form.areYouSure})\n            if (!result) return;\n        }\n        await this.getApp().closePage(this);\n        if (this.getModel().getOptions().onClose) {\n            this.getModel().getOptions().onClose();\n        }\n    }\n    validate() {\n        for (const form of this.forms) {\n            if (form instanceof RowFormController) {\n                form.validate();\n            }\n        }\n    }\n    isValid() {\n        // console.log('PageController.isValid', this.model.getFullName());\n        for (const form of this.forms) {\n            if (!form.isValid()) {\n                return false;\n            }\n        }\n        return true;\n    }\n    async onFormChange(e) {\n        // console.log('PageController.onFormChange', this.model.getFullName());\n        this.rerender();\n    }\n    onFormDiscard(formController) {\n        console.log('PageController.onFormDiscard', this.model.getFullName());\n        this.rerender();\n    }\n\n    onFormUpdate(e) {\n        console.log('PageController.onFormUpdate:', this.model.getFullName(), e);\n        this.rerender();\n    }\n\n    onFormInsert(e) {\n        console.log('PageController.onFormInsert:', this.model.getFullName());\n        // console.log('hasNew:', this.model.hasNew());\n        for (const form of this.forms) {\n            form.invalidate();\n        }\n        this.rerender();\n    }\n\n    async openPage(options) {\n        if (!options.params) {\n            options.params = {};\n        }\n        const params =  this.getModel().getParams();\n        for (const name in params) {\n            if (!options.params[name]) {\n                options.params[name] = params[name];\n            }\n        }\n        return await this.getApp().openPage(options);\n    }\n\n    isChanged() {\n        // console.log('PageController.isChanged', this.model.getFullName());\n        for (const form of this.forms) {\n            if (form.isChanged()) {\n                // console.log(`FORM CHANGED: ${form.model.getFullName()}`);\n                return true;\n            }\n        }\n        return false;\n    }\n    getApp() {\n        return this.parent;\n    }\n    getViewClass() {\n        return super.getViewClass() || PageView;\n    }\n    static createLink(params = null) {\n        // const query = window.location.search.split('?')[1];\n        // console.log('query:', query);\n        if (params) {\n            return [\n                window.location.pathname,\n                [\n                    // ...(query ? query.split('&') : []),\n                    ...(ApplicationController.isDebugMode() ? ['debug=1'] : []),\n                    ...Object.keys(params).map(name => `${name}=${encodeURI(params[name])}`)\n                ].join('&')\n            ].join('?');\n        }\n        return window.location.pathname;\n    }\n    getForm(name) {\n        return this.forms.find(form => form.model.getName() === name);\n    }\n    async onActionClick(name) {\n        console.log('PageController.onActionClick', name);\n    }\n    onKeyDown = async e => {\n        // console.log('PageController.onKeyDown', this.getModel().getFullName(), e);\n        if (e.key === 'Escape') {\n            if (this.isModal()) {\n                await this.close();\n            }\n        }\n    }\n    getTitle() {\n        const model = this.getModel();\n        const key = model.getKey();\n        let keyPart;\n        if (key) {\n            const arr = JSON.parse(key);\n            if (arr.length === 1 && typeof arr[0] === 'number') {\n                keyPart = `#${arr[0]}`;\n            } else {\n                keyPart = `${key}`;\n            }\n        }\n        return [\n            model.getCaption(),\n            ...(ApplicationController.isDebugMode() ? [`(${this.getId()})`] : []),\n            ...(keyPart ? [keyPart] : [])\n        ].join(' ');\n    }\n    getSelectedRowKey() {\n        for (const form of this.forms) {\n            const selectedRowKey = form.getSelectedRowKey();\n            if (selectedRowKey) return selectedRowKey;\n        }\n        return null;\n    }\n    onSelectClick = async e => {\n        console.log('PageController.onSelectClick');\n        await this.selectRow(this.getSelectedRowKey());\n    }\n    onResetClick = async e => {\n        console.log('PageController.onResetClick');\n        await this.selectRow(null);\n    }\n    async selectRow(key) {\n        console.log('PageController.selectRow', key);\n        await this.close();\n        await this.getModel().getOptions().onSelect(key);\n    }\n    invalidate() {\n        this.forms.forEach(form => form.invalidate());\n    }\n    getId() {\n        return this.id;\n    }\n    isModal() {\n        return this.getModel().isModal();\n    }\n    isAutoFocus() {\n        for (const form of this.forms) {\n            if (form.isAutoFocus()) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nwindow.QForms.PageController = PageController;\n","class Model extends EventEmitter {\n    constructor(data, parent) {\n        if (!data.name) throw new Error(`${data.class} no name`);\n        super();\n        this.data     = data;\n        this.parent   = parent;\n        this.deinited = false;\n    }\n    init() {\n    }\n    deinit() {\n        if (this.deinited) throw new Error(`${this.getFullName()}: model already deinited`);\n        this.deinited = true;\n    }\n    static getAttr(data, name) {\n        return data[name];\n    }\n    static getCol(data, name) {\n        return data[name];\n    }\n    static getName(data) {\n        return Model.getAttr(data, 'name');\n    }\n    static getClassName(data) {\n        return Model.getAttr(data, 'class');\n    }\n    isAttr(name) {\n        // return this.data[name] !== undefined;\n        return this.data.hasOwnProperty(name);\n    }\n    getAttr(name) {\n        return this.data[name];\n    }\n    getCol(name) {\n        return this.data[name];\n    }\n    getClassName() {\n        return this.getAttr('class');\n    }\n    getName() {\n        return this.getAttr('name');\n    }\n    getFullName() {\n        if (this.parent) {\n            return `${this.parent.getFullName()}.${this.getName()}`;\n        }\n        return this.getName();\n    }\n    getCaption() {\n        return this.getAttr('caption');\n    }\n    getDataSource(name) {\n        return this.dataSources.find(dataSource => dataSource.getName() === name);\n    }\n    createDataSources() {\n        for (const data of this.data.dataSources) {\n            try {\n                const Class = FrontHostApp.getClassByName(data.class);\n                if (!Class) throw new Error(`no class ${data.class} class`);\n                const dataSource = new Class(data, this);\n                dataSource.init();\n                this.dataSources.push(dataSource);\n            } catch (err) {\n                err.message = `${this.getFullName()}.${data.name}: ${err.message}`;\n                throw err;\n            }\n        }\n    }\n    deinitDataSources() {\n        for (const dataSource of this.dataSources) {\n            dataSource.deinit();\n        }\n    }\n    hasActions() {\n        return this.data.actions.length > 0;\n    }\n    getParent() {\n        return this.parent;\n    }\n    getData() {\n        return this.data;\n    }\n}\nwindow.QForms.Model = Model;\n","class Application extends Model {\n    constructor(data) {\n        super(data);\n        this.databases   = [];\n        this.dataSources = [];\n    }\n\n    init() {\n        // console.log('Application.init');\n        if (!this.data.theme) throw new Error('no theme attr');\n\n        // databases\n        for (const data of this.data.databases) {\n            const database = new Database(data, this);\n            database.init();\n            this.addDatabase(database);\n        }\n\n        // data sources\n        this.createDataSources();\n    }\n\n    deinit() {\n        this.deinitDataSources();\n        // TODO: add deinit on opened pages\n        super.deinit();\n    }\n\n    addDatabase(database) {\n        this.databases.push(database);\n    }\n\n    async logout() {\n        const data = await this.request({\n            'action': 'logout'\n        });\n        this.emit('logout', {source: this});\n    }\n\n    async request(options) {\n        // console.warn('Application.request', data);\n        const start = Date.now();\n        const [headers, body] = await FrontHostApp.doHttpRequest2(options);\n        if (!headers['qforms-platform-version']) throw new Error('no qforms-platform-version header');\n        if (!headers['qforms-app-version']) throw new Error('no qforms-app-version header');\n        this.emit('request', {\n            time: Date.now() - start,\n            remotePlatformVersion: headers['qforms-platform-version'],\n            remoteAppVersion: headers['qforms-app-version']\n        });\n        return body;\n    }\n\n    getDatabase(name) {\n        // console.log('Application.getDatabase', name);\n        const database = this.databases.find(database => database.getName() === name);\n        if (!database) throw new Error(`no database: ${name}`);\n        return database;\n    }\n\n    getText() {\n        return this.data.text;\n    }\n    getUser() {\n        return this.data.user;\n    }\n    getDomain() {\n        return this.getAttr('domain');\n    }\n    getVirtualPath() {\n        return this.data.virtualPath;\n    }\n    async rpc(name, params) {\n        console.log('Application.rpc', this.getFullName(), name, params);\n        if (!name) throw new Error('no name');\n        const result = await this.request({\n            uuid  : this.getAttr('uuid'),\n            action: 'rpc',\n            name  : name,\n            params: params\n        });\n        if (result.errorMessage) throw new Error(result.errorMessage);\n        return result;\n    }\n    emitResult(result, source = null) {\n        console.log('Application.emitResult', result, source);\n        const promises = [];\n        for (const database in result) {\n            promises.push(...this.getDatabase(database).emitResult(result[database], source));\n        }\n        // console.log('promises:', promises);\n        return Promise.allSettled(promises);\n    }\n    getNodeEnv() {\n        return this.data.nodeEnv;\n    }\n    isDevelopment() {\n        return this.getNodeEnv() === 'development';\n    }\n}\nwindow.QForms.Application = Application;\n","class Column  extends Model {\n    constructor(data, parent) {\n        super(data, parent);\n        if (!this.getAttr('type')) throw new Error(`column ${this.getFullName()}: no type`);\n        if (!['string', 'number', 'boolean', 'object', 'date'].includes(this.getAttr('type'))) {\n            throw new Error(`${this.getFullName()}: wrong column type: ${this.getAttr('type')}`);\n        }\n    }\n    init() {\n        // console.log('Column.init', this.getFullName());\n    }\n    getType() {\n        return this.getAttr('type');\n    }\n}\nwindow.QForms.Column = Column;\n","class DataSource extends Model {\n\n    constructor(data, parent) {\n        super(data, parent);\n        this.rows      = null;\n        this.rowsByKey = null;\t\t\t\t\t\t// for row search by key\n        this.news      = [];                        // new rows\n        this.changes   = new Map();\n    }\n\n    init() {\n        // console.log('DataSource.init', this.getFullName(), this.getClassName());\n        this.setRows(this.data.rows);\n        if (this.getAttr('table')) {\n            const table = this.getTable();\n            table.on('insert' , this.onTableInsert);\n            table.on('update' , this.onTableUpdate);\n            table.on('delete' , this.onTableDelete);\n            table.on('refresh', this.onTableRefresh);\n        }\n    }\n\n    deinit() {\n        if (this.getAttr('table')) {\n            const table = this.getTable();\n            table.off('insert' , this.onTableInsert);\n            table.off('update' , this.onTableUpdate);\n            table.off('delete' , this.onTableDelete);\n            table.off('refresh', this.onTableRefresh);\n        }\n        super.deinit();\n    }\n\n    setRows(rows) {\n        this.rows = rows;\n        this.fillRowsByKey();\n    }\n\n    addRow(row) {\n        this.rows.push(row);\n        const key = this.getRowKey(row);\n        this.rowsByKey[key] = row;\n    }\n\n    addRows(rows) {\n        for (let i = 0; i < rows.length; i++) {\n            this.rows.push(rows[i]);\n        }\n        this.fillRowsByKey();\n    }\n\n    getRowsLength() {\n        return this.rows.length;\n    }\n\n    fillRowsByKey() {\n        // console.log('DataSource.fillRowsByKey', this.getFullName())\n        this.rowsByKey = {};\n        for (let i = 0; i < this.rows.length; i++) {\n            const row = this.rows[i];\n            const key = this.getRowKey(row);\n            this.rowsByKey[key] = row;\n        }\n        // console.log('this.rowsByKey:', this.getFullName(), this.rowsByKey);\n    }\n\n    // deinit() {\n    //     console.log('DataSource.deinit', this.getFullName());\n    //     super.deinit();\n    // }\n\n    getType(column) {\n        // console.log('DataSource.getType', this.getClassName(), column);\n        throw new Error('DataSource column type not implemented');\n    }\n\n    discardRowColumn(row, column) {\n        if (this.changes.has(row) && this.changes.get(row)[column] !== undefined) {\n            delete this.changes.get(row)[column];\n        }\n    }\n\n    changeRowColumn(row, column, newValue) {\n        if (!this.changes.has(row)) this.changes.set(row, {});\n        this.changes.get(row)[column] = newValue;\n    }\n\n    setValue(row, column, value) {\n        // console.log('DataSource.setValue', this.getFullName(), column, value, typeof value);\n        if (value === undefined) throw new Error(`${this.getFullName()}: undefined is wrong value for data source`);\n        if (typeof value === 'object' && value !== null) {\n            throw new Error(`setValue: ${this.getFullName()}.${column}: object must be in JSON format`);\n        }\n        if (row[column] !== value) {\n            this.changeRowColumn(row, column, value);\n            if (row[column] === undefined && value === null) {  // workaround for new rows\n                this.discardRowColumn(row, column);\n            }\n        } else {\n            this.discardRowColumn(row, column);\n        }\n        if (this.changes.has(row) && !Object.keys(this.changes.get(row)).length) this.changes.delete(row);\n        // console.log('changes:', this.changes);\n    }\n\n    isChanged() {\n        // console.log('DataSource.isChanged', this.getFullName(), this.changes.size);\n        return !!this.changes.size;\n    }\n\n    hasNew() {\n        return !!this.news.length;\n    }\n\n    isRowColumnChanged(row, column) {\n        // console.log('DataSource.isRowColumnChanged', this.getFullName());\n        return row[column] !== this.getValue(row, column);\n    }\n\n    getValue(row, column) {\n        // console.log('DataSource.getValue', column);\n        let value;\n        if (this.changes.has(row) && this.changes.get(row)[column] !== undefined) {\n            value = this.changes.get(row)[column];\n        } else {\n            value = row[column];\n        }\n        if (value !== undefined && typeof value !== 'string') {\n            throw new Error(`getValue: ${this.getFullName()}.${column}: object must be in JSON format, value: ${value}`);\n        }\n        // console.log('DataSource.getValue:', value);\n        return value;\n    }\n\n    getKeyValues(row) {\n        return this.data.keyColumns.reduce((key, column) => {\n            key[column] = JSON.parse(row[column]);\n            return key;\n        }, {});\n    }\n\n    getRowKey(row) {\n        // console.log('DataSource.getRowKey', row);\n        const arr = [];\n        for (const column of this.data.keyColumns) {\n            if (row[column] === undefined) return null;\n            if (row[column] === null) throw new Error('wrong value null for data source value');\n            try {\n                const value = JSON.parse(row[column]);\n                arr.push(value);\n            } catch (err) {\n                console.log('getRowKey: cannot parse: ', row[column]);\n                throw err;\n            }\n        }\n        return JSON.stringify(arr);\n    }\n\n    removeRow(key) {\n        const row = this.getRow(key);\n        if (!row) throw new Error(`${this.getFullName()}: no row with key ${key} to remove`);\n        const i = this.rows.indexOf(row);\n        if (i === -1) throw new Error(`${this.getFullName()}: no row with i ${i} to remove`);\n        this.rows.splice(i, 1);\n        delete this.rowsByKey[key];\n    }\n\n    newRow(row) {\n        console.log('DataSource.newRow', this.getFullName(), row);\n        if (this.rows.length > 0) {\n            throw new Error('rows can be added to empty data sources only in new mode');\n        }\n        this.news.push(row);\n    }\n\n    getSingleRow(withChanges = false) {\n        if (this.news[0]) return this.news[0];\n        const row = this.rows[0];\n        if (!row) throw new Error('no single row');\n        if (withChanges) return this.getRowWithChanges(row);\n        return row;\n    }\n\n    getForm() {\n        return this.parent instanceof Form ? this.parent : null;\n    }\n\n    getPage() {\n        if (this.parent instanceof Page) return this.parent;\n        if (this.parent instanceof Form) return this.parent.getPage();\n        return null;\n    }\n\n    getApp() {\n        if (this.parent instanceof Application) return this.parent;\n        return this.parent.getApp();\n    }\n\n    /*getNamespace() {\n        if (this.parent instanceof Form) {\n            return this.parent.getPage().getName() + '.' + this.parent.getName() + '.' + this.getName();\n        }\n        if (this.parent instanceof Page) {\n            return this.parent.getName() + '.' + this.getName();\n        }\n        return this.getName();\n    }*/\n\n    getRow(key) {\n        return this.rowsByKey[key] || null;\n    }\n\n    /*getRowByKey(key) {\n        return this.rowsByKey[key] || null;\n    }*/\n\n    getRows() {\n        return this.rows;\n    }\n\n    getRowByIndex(i) {\n        return this.rows[i];\n    }\n\n    discard() {\n        console.log('DataSource.discard', this.getFullName());\n        if (!this.isChanged()) throw new Error(`no changes in data source ${this.getFullName()}`);\n        this.changes.clear();\n    }\n\n    static keyToParams(key, paramName = 'key') {\n        if (typeof key !== 'string') throw new Error('key not string');\n        const params = {};\n        const arr = JSON.parse(key);\n        if (arr.length === 1) {\n            params[paramName] = arr[0];\n        } else  if (arr.length > 1) {\n            for (let i = 0; i < arr.length; i++) {\n                params[`${paramName}${i + 1}`] = arr[i];\n            }\n        } else {\n            throw new Error(`invalid key: ${key}`);\n        }\n        return params;\n    }\n\n    getChangesByKey() {\n        const changes = {};\n        for (const row of this.changes.keys()) {\n            changes[this.getRowKey(row)] = this.changes.get(row);\n        }\n        return changes;\n    }\n\n    getRowWithChanges(row) {\n        if (this.changes.has(row)) {\n            return {...row, ...this.changes.get(row)};\n        }\n        return row;\n    }\n\n    hasNewRows() {\n        return this.news.length > 0;\n    }\n\n    static copyNewValues(row, newValues) {\n        for (const name in newValues) {\n            row[name] = newValues[name];\n        }\n    }\n\n    updateRow(key, newValues) {\n        console.log('DataSource.updateRow', this.getFullName(), key, newValues);\n        if (!key) throw new Error('no key');\n        const row = this.getRow(key);\n        if (!row) throw new Error(`${this.getFullName()}: no row with key ${key}`);\n        const newKey = this.getRowKey(newValues);\n        DataSource.copyNewValues(row, newValues);// copy new values to original row object\n        if (key !== newKey) {\n            delete this.rowsByKey[key];\n            this.rowsByKey[newKey] = row;\n        }\n        // console.log(`key: ${key} to ${newKey}`);\n        // console.log('this.rowsByKey:', this.rowsByKey);\n        // console.log('this.data.rows:', this.data.rows);\n    }\n\n    getTable() {\n        if (!this.getAttr('table')) throw new Error(`${this.getFullName()}: table attr empty`);\n        return this.getDatabase().getTable(this.getAttr('table'));\n    }\n\n    getDatabase() {\n        // console.log('DataSource.getDatabase', this.getFullName(), this.getAttr('database'));\n        if (!this.getAttr('database')) throw new Error(`${this.getFullName()}: database attr empty`);\n        return this.getApp().getDatabase(this.getAttr('database'));\n    }\n\n    getType(columnName) {\n        // console.log('DataSource.getType', columnName);\n        const type = this.getTable().getColumn(columnName).getType();\n        // console.log('type:', type);\n        return type;\n    }\n\n    async insert() {\n        console.log('DataSource.insert', this.news);\n        if (!this.news.length) throw new Error('no new rows to insert');\n        const inserts = [];\n        for (const row of this.news) {\n            const newValues = this.getRowWithChanges(row);\n            // console.log('newValues:', newValues);\n            DataSource.copyNewValues(row, newValues);\n            // console.log('row:', row);\n            const key = this.getRowKey(row);\n            if (!key) throw new Error('invalid insert row, no key');\n            // console.log('key:', key);\n            inserts.push(key);\n        }\n        this.changes.clear();\n        for (const row of this.news) {\n            this.addRow(row);\n        }\n        this.news = [];\n        console.log('rows:', this.getRows());\n        console.log('inserts:', inserts);\n\n        // events\n        if (this.parent.onDataSourceInsert) {\n            this.parent.onDataSourceInsert({source: this, inserts});\n        }\n        this.emit('insert', {source: this, inserts});\n        const database = this.getAttr('database');\n        const table = this.getAttr('table');\n        if (database && table) {\n            const result = {[database]: {\n                    [table]: {insert: inserts}\n                }};\n            await this.getApp().emitResult(result, this);\n            return result;\n        }\n        return null;\n    }\n\n    async delete(key) {\n        console.log('DataSource.delete', key);\n        if (!key) throw new Error('no key');\n        this.removeRow(key);\n\n        // events\n        const deletes = [key];\n        if (this.parent.onDataSourceDelete) {\n            this.parent.onDataSourceDelete({source: this, deletes});\n        }\n        this.emit('delete', {source: this, deletes});\n        const database = this.getAttr('database');\n        const table = this.getAttr('table');\n        if (database && table) {\n            const result = {[database]: {\n                    [table]: {delete: deletes}\n                }};\n            await this.getApp().emitResult(result, this);\n            return result;\n        }\n        return null;\n    }\n\n    async update() {\n        console.log('DataSource.update', this.getFullName());\n        if (this.news.length) {\n            await this.insert();\n            return;\n        }\n        if (!this.changes.size) throw new Error(`no changes: ${this.getFullName()}`);\n        const changes = this.getChangesByKey();\n        // console.log('changes:', changes);\n\n        // apply changes to rows\n        const updates = {};\n        for (const key in changes) {\n            // console.log('key:', key);\n            const row = this.getRow(key);\n            // console.log('row:', row);\n            const newValues = this.getRowWithChanges(row);\n            // console.log('newValues:', newValues);\n            const newKey = this.getRowKey(newValues);\n            // console.log('newKey:', newKey);\n            this.updateRow(key, newValues);\n            updates[key] = newKey;\n        }\n        this.changes.clear();\n\n        // events\n        if (this.parent.onDataSourceUpdate) {\n            this.parent.onDataSourceUpdate({source: this, updates});\n        }\n        this.emit('update', {source: this, updates});\n\n        const database = this.getAttr('database');\n        const table    = this.getAttr('table');\n        if (database && table) {\n            const reuslt = {[database]: {\n                    [table]: {\n                        update: updates\n                    }\n                }};\n            await this.getApp().emitResult(reuslt, this);\n            return reuslt;\n        }\n        return null;\n    }\n\n    onTableInsert = async e => {\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableUpdate`);\n        if (e.source === this) {\n            // console.error('onTableInsert stop self insert', this.getFullName());\n            return;\n        }\n        console.log('DataSource.onTableInsert', this.getFullName(), e);\n        if (!e.inserts.length) throw new Error(`${this.getFullName()}: no inserts`);\n\n        for (const key of e.inserts) {\n            if (this.getRow(key)) {\n                console.log('rows:', this.rows);\n                console.log('rowsByKey:', this.rowsByKey);\n                throw new Error(`${this.getFullName()}: row already in this data source: ${key}`);\n            }\n            const newValues = e.source.getRow(key);\n            const newRow = {};\n            DataSource.copyNewValues(newRow, newValues);\n            // console.log('newRow:', newRow);\n            this.addRow(newRow);\n        }\n\n        // events\n        if (this.parent.onDataSourceInsert) {\n            this.parent.onDataSourceInsert(e);\n        }\n        this.emit('insert', e);\n    }\n\n    onTableUpdate = async e => {\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableUpdate`);\n        if (e.source === this) {\n            // console.error('onTableUpdate stop self update', this.getFullName());\n            return;\n        }\n        console.log('DataSource.onTableUpdate', this.getFullName(), e);\n        if (!Object.keys(e.updates).length) throw new Error(`${this.getFullName()}: no updates`);\n        for (const key in e.updates) {\n            if (this.getRow(key)) {\n                const newKey = e.updates[key];\n                const sourceRow = e.source.getRow(newKey);\n                this.updateRow(key, sourceRow);\n            }\n        }\n\n        // events\n        if (this.parent.onDataSourceUpdate) {\n            this.parent.onDataSourceUpdate(e);\n        }\n        this.emit('update', e);\n    }\n\n    onTableDelete = async e => {\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableDelete`);\n        if (e.source === this) {\n            // console.error('onTableDelete stop self update', this.getFullName());\n            return;\n        }\n        console.log('DataSource.onTableDelete', this.getFullName(), e);\n        if (!e.deletes.length) throw new Error(`${this.getFullName()}: no deletes`);\n        for (const key of e.deletes) {\n            if (this.getRow(key)) {\n                this.removeRow(key);\n            }\n        }\n\n        // events\n        if (this.parent.onDataSourceDelete) {\n            this.parent.onDataSourceDelete(e);\n        }\n        this.emit('delete', e);\n    }\n\n    onTableRefresh = async e => {\n        throw new Error('DataSource.onTableRefresh: not implemented');\n    }\n\n    isSurrogate() {\n        return this.isAttr('database');\n    }\n\n    moveRow(row, offset) {\n        console.log('DataSource.moveRow');\n        Helper.moveArrItem(this.rows, row, offset);\n\n        // refresh event\n        const event = {source: this};\n        if (this.parent.onDataSourceRefresh) {\n            this.parent.onDataSourceRefresh(event);\n        }\n        this.emit('refresh', event);\n    }\n\n}\nwindow.QForms.DataSource = DataSource;\n","class SqlDataSource extends DataSource {\n    constructor(data, parent) {\n        super(data, parent);\n        this.frame  = 1;\n        this.count  = data.count !== undefined ? data.count : null;\n        this.lastFrame = 1;\n    }\n\n    /*init() {\n        super.init();\n    }*/\n\n    /*deinit() {\n        super.deinit();\n    }*/\n\n    async insert(row) {\n        console.log('SqlDataSource.insert', row);\n        const database = this.getAttr('database');\n        const table = this.getAttr('table');\n        if (table === '') throw new Error('no data source table to insert');\n\n        const result = await this.getApp().request({\n            uuid   : this.getApp().getAttr('uuid'),\n            action: 'insert',\n            page  : this.getForm().getPage().getName(),\n            form  : this.getForm().getName(),\n            row   : this.getRowWithChanges(row),\n        });\n\n        // key & values\n        const [key] = Object.keys(result[database][table].insertEx);\n        if (!key) throw new Error('no inserted row key');\n        const values = result[database][table].insertEx[key];\n        for (const column in values) {\n            row[column] = values[column];\n        }\n        // console.log('key:', key);\n        // console.log('row:', row);\n\n        // clear news & changes\n        this.news.splice(this.news.indexOf(row), 1);\n        // console.log('this.news:', this.news);\n        this.changes.clear();\n\n        // add new row to rows\n        this.addRow(row);\n\n        // events\n        const event = {source : this, inserts: result[database][table].insert};\n        if (this.parent.onDataSourceInsert) {\n            this.parent.onDataSourceInsert(event);\n        }\n        this.emit('insert', event);\n        await this.getApp().emitResult(result, this);\n\n        return result;\n    }\n\n    async update() {\n        console.log('SqlDataSource.update', this.getFullName());\n        const database = this.getAttr('database');\n        const table = this.getAttr('table');\n        if (table === '') throw new Error('no data source table to update');\n        if (this.news[0]) {\n            return await this.insert(this.news[0]);\n        }\n        if (!this.changes.size) throw new Error(`no changes: ${this.getFullName()}`);\n\n        // specific to SqlDataSource\n        const result = await this.getApp().request({\n            uuid   : this.getApp().getAttr('uuid'),\n            action : 'update',\n            page   : this.getForm().getPage().getName(),\n            form   : this.getForm().getName(),\n            changes: this.getChangesByKey(),\n        });\n\n\n        const [key] = Object.keys(result[database][table].updateEx);\n        if (!key) throw new Error('no updated row');\n        const newValues = result[database][table].updateEx[key];\n        // const newKey = this.getRowKey(newValues);\n\n        this.changes.clear();\n        this.updateRow(key, newValues);\n\n        // events\n        const event = {source: this, updates: result[database][table].update};\n        if (this.parent.onDataSourceUpdate) {\n            this.parent.onDataSourceUpdate(event);\n        }\n        this.emit('update', event);\n        await this.getApp().emitResult(result, this);\n        return result;\n    }\n\n    async delete(key) {\n        console.log('SqlDataSource.delete:', this.getFullName(), key);\n        if (!key) throw new Error('no key');\n        const database = this.getAttr('database');\n        const table = this.getAttr('table');\n        if (!table) {\n            throw new Error(`no table in SqlDataSource: ${this.getFullName()}`);\n        }\n        const result = await this.getApp().request({\n            uuid   : this.getApp().getAttr('uuid'),\n            action: '_delete',\n            page  : this.getForm().getPage().getName(),\n            form  : this.getForm().getName(),\n            params: {key},\n        });\n        await this.refill();\n\n        // events\n        const event = {source: this, deletes: result[database][table].delete};\n        if (this.parent.onDataSourceDelete) {\n            this.parent.onDataSourceDelete(event);\n        }\n        this.emit('delete', event);\n        await this.getApp().emitResult(result, this);\n\n        return result;\n    }\n\n    onTableUpdate = async e => {\n        console.log('SqlDataSource.onTableUpdate', this.getFullName(), e);\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableUpdate`);\n        if (e.source === this) {\n            // console.error('onTableUpdate stop self update', this.getFullName());\n            return;\n        }\n        // console.log('updates:', e.updates);\n        if (!Object.keys(e.updates).length) throw new Error(`${this.getFullName()}: no updates`);\n\n        // update rows\n        await this.refill();\n\n        // events\n        if (this.parent.onDataSourceUpdate) {\n            this.parent.onDataSourceUpdate(e);\n        }\n        this.emit('update', e);\n    }\n\n    onTableInsert = async (e) => {\n        console.log('SqlDataSource.onTableInsert', this.getFullName(), e);\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableInsert`);\n        if (e.source === this) {\n            // console.error('onTableInsert stop self insert', this.getFullName());\n            return;\n        }\n\n        // update rows\n        await this.refill();\n\n        // events\n        if (this.parent.onDataSourceInsert) {\n            this.parent.onDataSourceInsert(e);\n        }\n        this.emit('insert', e);\n    }\n\n    onTableDelete = async (e) => {\n        console.log('SqlDataSource.onTableDelete', this.getFullName(), e);\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableDelete`);\n        if (e.source === this) {\n            // console.error('onTableDelete stop self delete', this.getFullName());\n            return;\n        }\n        await this.refill();\n        if (this.parent.onDataSourceDelete) {\n            this.parent.onDataSourceDelete(e);\n        }\n        this.emit('delete', e);\n    }\n\n    onTableRefresh = async e => {\n        console.log('SqlDataSource.onTableRefresh', this.getFullName(), e);\n        if (this.deinited) throw new Error(`${this.getFullName()}: this data source deinited for onTableDelete`);\n        if (e.source) throw new Error('refresh is foreign result so source must be null');\n        await this.refill();\n        if (this.parent.onDataSourceRefresh) {\n            this.parent.onDataSourceRefresh(e);\n        }\n        this.emit('refresh', e);\n    }\n\n    getPageParams() {\n        const page = this.getPage();\n        return page ? page.getParams() : {};\n    }\n\n    async refresh() {\n        console.log('SqlDataSource.refresh', this.getFullName());\n        await this.refill();\n        if (this.parent.onDataSourceRefresh) {\n            this.parent.onDataSourceRefresh({source: this});\n        }\n    }\n\n    async refill() {\n        console.log('SqlDataSource.refill', this.getFullName());\n        if (this.isChanged()) throw new Error(`cannot refill changed data source: ${this.getFullName()}`);\n        const data = await this.select(this.getLimit() ? {frame : this.frame} : {});\n        this.count = data.count;\n        this.setRows(data.rows);\n        this.lastFrame = 1;\n    }\n\n    async fill(frame) {\n        if (this.isChanged()) throw new Error(`cannot fill changed data source: ${this.getFullName()}`);\n        const data = await this.select(this.getLimit() ? {frame} : {});\n        this.count = data.count;\n        this.addRows(data.rows);\n    }\n\n    async more() {\n        if (!this.hasMore()) throw new Error(`${this.getFullName()}: no more rows`);\n        this.lastFrame++;\n        await this.fill(this.lastFrame);\n    }\n\n    async select(params = {}) {\n        console.log('SqlDataSource.select', this.getFullName(), params);\n        const page = this.getPage();\n        const form = this.getForm();\n        const data = await this.getApp().request({\n            action        : 'select',\n            page          : page ? page.getName()           : null,\n            form          : form ? form.getName()           : null,\n            ds            : this.getName(),\n            params        : {\n                ...this.getPageParams(),\n                ...params,\n            }\n        });\n        if (!(data.rows instanceof Array)) throw new Error('rows must be array');\n        // if (data.time) console.log(`select time of ${this.getFullName()}:`, data.time);\n        return data;\n    }\n\n    /*async selectSingle(params = {}) {\n        console.log('SqlDataSource.selectSingle', this.getFullName(), params);\n        const page = this.getPage();\n        const form = this.getForm();\n        const data = await this.getApp().request({\n            action: 'selectSingle',\n            page  : page ? page.getName()           : null,\n            form  : form ? form.getName()           : null,\n            ds    : this.getName(),\n            params: {\n                ...this.getPageParams(),\n                ...params,\n            }\n        });\n        if (!data.row) throw new Error('selectSingle must return row');\n        // if (data.time) console.log(`select time of ${this.getFullName()}:`, data.time);\n        return data;\n    }*/\n\n    getFramesCount() {\n        if (this.count === null) throw new Error(`${this.getFullName()}: no count info`);\n        if (this.count === 0) return 1;\n        if (this.getLimit()) return Math.ceil(this.count / this.getLimit());\n        return 1;\n    }\n    getLimit() {\n        if (this.getAttr('limit')) return parseInt(this.getAttr('limit'));\n        return null;\n    }\n    getCount() {\n        if (this.count === null) throw new Error(`${this.getFullName()}: no count info`);\n        return this.count;\n    }\n    getFrame() {\n        return this.frame;\n    }\n    getLastFrame() {\n        return this.lastFrame;\n    }\n    setFrame(frame) {\n        this.frame = frame;\n    }\n    hasMore() {\n        return this.lastFrame < this.getFramesCount();\n    }\n}\nwindow.QForms.SqlDataSource = SqlDataSource;\n","class Database extends Model {\n    constructor(...args) {\n        super(...args);\n        this.tables = [];\n    }\n\n    init() {\n        // console.log('Database.init', this.getName());\n        for (const data of this.data.tables) {\n            const table = new Table(data, this);\n            table.init();\n            this.addTable(table);\n        }\n    }\n\n    addTable(table) {\n        this.tables.push(table);\n    }\n\n    getTable(name) {\n        const table = this.tables.find(table => table.getName() === name);\n        if (!table) throw new Error(`${this.getFullName()}: no table with name: ${name}`);\n        return table;\n    }\n\n    emitResult(result, source = null) {\n        console.log('Database.emitResult');\n        const promises = [];\n        for (const table in result) {\n            promises.push(...this.getTable(table).emitResult(result[table], source));\n        }\n        return promises;\n    }\n}\nwindow.QForms.Database = Database;\n","\n\nclass Field extends Model {\n    // constructor(data, parent) {\n    //     super(data, parent);\n    // }\n\n    init() {\n    }\n\n    replaceThis(value) {\n        return value.replace(/\\{([@\\w\\.]+)\\}/g, (text, name) => {\n            if (name.indexOf('.') === -1) return text;\n            let arr = name.split('.');\n            if (arr[0] === 'this') arr[0] = this.getPage().getName();\n            return `{${arr.join('.')}}`;\n        });\n    }\n\n    fillDefaultValue(row) {\n        // console.log('Field.fillDefaultValue', this.getFullName());\n        const column = this.getAttr('column');\n        if (!column) return;\n        const defaultValue = this.replaceThis(this.getAttr('defaultValue'));\n        const js = Helper.templateToJsString(defaultValue, this.getPage().getParams());\n        if (typeof js !== 'string') throw new Error(`${this.getFullName()}: defaultValue must be templated to js string`);\n        // console.log('js', this.getFullName(), js);\n        module.Helper\n        try {\n            const value = eval(js);\n            if (value !== undefined) {\n                row[column] = this.valueToRaw(value);\n            }\n        } catch (err) {\n            throw new Error(`[${this.getFullName()}] fillDefaultValue: ${err.toString()}`);\n        }\n    }\n\n    valueToPageParams(row) {\n        // console.log('Field.valueToPageParams', this.getFullName());\n        if (this.isParam()) {\n            // we need to dump value to param without meta info such as timezone prop\n            const value = this.getValue(row);\n            const rawValue = this.valueToRaw(value);\n            // console.log('value:', value);\n            // console.log('rawValue:', rawValue);\n            const paramValue = rawValue !== undefined ? Helper.decodeValue(rawValue) : undefined;\n            this.getPage().setParam(this.getFullName(), paramValue);\n        }\n    }\n\n    isChanged(row) {\n        // console.log('Field.isChanged', this.getFullName());\n        if (!this.getAttr('column')) throw new Error(`${this.getFullName()}: field has no column`);\n        return this.getDefaultDataSource().isRowColumnChanged(row, this.getAttr('column'));\n    }\n\n    hasColumn() {\n        return !!this.getAttr('column');\n    }\n\n    getValue(row) {\n        // console.log('Field.getValue', this.getFullName(), row);\n        if (!row && this.parent instanceof RowForm) {\n            row = this.parent.getRow();\n        }\n        if (!row) {\n            throw new Error(`${this.getFullName()}: need row`);\n        }\n        let rawValue;\n        if (this.getAttr('column')) {\n            rawValue = this.getRawValue(row);\n        } else if (this.getAttr('value')) {\n            const js = this.getAttr('value');\n            try {\n                rawValue = eval(js);\n            } catch (err) {\n                console.error(err);\n                throw new Error(`${this.getFullName()}: value eval error: ${err.message}`);\n            }\n        } else {\n            throw new Error(`${this.getFullName()}: no column and no value in field`);\n        }\n\n        // use rawValue\n        if (rawValue === undefined) return undefined;\n        if (rawValue === null) throw new Error(`[${this.getFullName()}]: null is wrong raw value`);\n        try {\n            return this.rawToValue(rawValue);\n        } catch (err) {\n            console.log('raw value decode error:', this.getFullName(), rawValue);\n            throw err;\n        }\n    }\n\n    setValue(row, value) {\n        // console.log('Field.setValue', this.getFullName(), value);\n        if (!this.getAttr('column')) throw new Error(`field has no column: ${this.getFullName()}`);\n        const rawValue = this.valueToRaw(value);\n        this.getForm().getDefaultDataSource().setValue(row, this.getAttr('column'), rawValue);\n        this.valueToPageParams(row);\n    }\n\n    rawToValue(rawValue) {\n        return Helper.decodeValue(rawValue);\n    }\n\n    valueToRaw(value) {\n        return Helper.encodeValue(value);\n    }\n\n    getRawValue(row) {\n        if (!this.hasColumn()) throw new Error(`${this.getFullName()}: no column`);\n        return this.getForm().getDefaultDataSource().getValue(row, this.getAttr('column'));\n    }\n\n    getDefaultDataSource() {\n        return this.getForm().getDefaultDataSource();\n    }\n\n    getType() {\n        if (this.getAttr('type')) {\n            return this.getAttr('type');\n        }\n        if (this.getAttr('column')) {\n            const dataSource = this.getDefaultDataSource();\n            if (dataSource.isSurrogate()) {\n                return dataSource.getType(this.getAttr('column'));\n            }\n            throw new Error('field type empty');\n        }\n        throw new Error('field type and column empty');\n    }\n\n    getForm() {\n        return this.parent;\n    }\n\n    getPage() {\n        return this.parent.parent;\n    }\n\n    getApp() {\n        return this.parent.parent.parent;\n    }\n\n    isReadOnly() {\n        return this.data.readOnly === 'true';\n    }\n    isNotNull() {\n        return this.data.notNull === 'true';\n    }\n    isNullable() {\n        return this.data.notNull === 'false';\n    }\n    getWidth() {\n        const width = parseInt(this.data.width);\n        if (isNaN(width)) return null;\n        if (width === 0) return 100;\n        return width;\n    }\n    getFullName() {\n        return `${this.getPage().getName()}.${this.getForm().getName()}.${this.getName()}`;\n    }\n    isParam() {\n        return this.data.param === 'true';\n    }\n    validateOnChange() {\n        if (this.data.validateOnChange !== undefined) {\n            return this.data.validateOnChange === 'true';\n        }\n        return true;\n    }\n    validateOnBlur() {\n        if (this.data.validateOnBlur !== undefined) {\n            return this.data.validateOnBlur === 'true';\n        }\n        return false;\n    }\n    getCaption() {\n        const caption = this.getAttr('caption');\n        if (caption === '') {\n            const columnName = this.getAttr('column');\n            if (columnName && this.parent.hasDefaultSqlDataSource()) {\n                const ds = this.parent.getDataSource('default');\n                if (ds.getAttr('table')) {\n                    const column = ds.getTable().getColumn(columnName);\n                    return column.getCaption();\n                }\n            }\n        }\n        return caption;\n    }\n}\nwindow.QForms.Field = Field;\n","class CheckBoxField extends Field {\n\n}\nwindow.QForms.CheckBoxField = CheckBoxField;\n","class CheckBoxListField extends Field {\n\n    getDisplayValue(row) {\n        let value = null;\n        if (row[this.data.displayColumn]) {\n            try {\n                value = Helper.decodeValue(row[this.data.displayColumn]);\n            } catch (err) {\n                console.log('cannot parse:', row[this.data.displayColumn]);\n                throw err;\n            }\n        } else {\n            value = this.data.displayColumn;\n            value = value.replace(/\\{([\\w\\.]+)\\}/g, (text, name) => {\n                return row.hasOwnProperty(name) ? (row[name] || '') : text;\n            });\n        }\n        return value;\n    }\n\n    getValueValue(row) {\n        if (!row[this.data.valueColumn]) {\n            throw new Error('no valueColumn in CheckBoxList data source');\n        }\n        return Helper.decodeValue(row[this.data.valueColumn]);\n    }\n\n    getDataSource() {\n        const name = this.data.dataSourceName;\n        if (!name) throw new Error(`${this.getFullName()}: no dataSourceName`);\n        if (this.getForm().getDataSource(name)) {\n            return this.getForm().getDataSource(name);\n        }\n        if (this.getPage().getDataSource(name)) {\n            return this.getPage().getDataSource(name);\n        }\n        if (this.getApp().getDataSource(name)) {\n            return this.getApp().getDataSource(name);\n        }\n        throw new Error(`${this.getFullName()}: no data source: ${name}`);\n    }\n\n    findRowByRawValue(rawValue) {\n        return this.getDataSource().getRows().find(row => row[this.data.valueColumn] === rawValue);\n    }\n}\nwindow.QForms.CheckBoxListField = CheckBoxListField;\n","class ComboBoxField extends Field {\n\n    getDisplayValue(row) {\n        let value = null;\n        if (row[this.data.displayColumn]) {\n            try {\n                value = Helper.decodeValue(row[this.data.displayColumn]);\n            } catch (err) {\n                console.log('cannot parse:', row[this.data.displayColumn]);\n                throw err;\n            }\n        } else {\n            value = this.data.displayColumn;\n            value = value.replace(/\\{([\\w\\.]+)\\}/g, (text, name) => {\n                return row.hasOwnProperty(name) ? (row[name] || '') : text;\n            });\n        }\n        return value;\n    }\n\n    getValueValue(row) {\n        if (!row[this.data.valueColumn]) {\n            throw new Error('no valueColumn in ComboBox data source');\n        }\n        return Helper.decodeValue(row[this.data.valueColumn]);\n    }\n\n    getComboBoxDataSource() {\n        const name = this.data.dataSourceName;\n        if (!name) throw new Error(`${this.getFullName()}: no dataSourceName`);\n        if (this.getForm().getDataSource(name)) {\n            return this.getForm().getDataSource(name);\n        }\n        if (this.getPage().getDataSource(name)) {\n            return this.getPage().getDataSource(name);\n        }\n        if (this.getApp().getDataSource(name)) {\n            return this.getApp().getDataSource(name);\n        }\n        throw new Error(`${this.getFullName()}: no data source: ${name}`);\n    }\n\n    findRowByRawValue(rawValue) {\n        return this.getComboBoxDataSource().getRows().find(row => row[this.data.valueColumn] === rawValue);\n    }\n}\nwindow.QForms.ComboBoxField = ComboBoxField;\n","class DateField extends Field {\n    getFormat() {\n        return this.getAttr('format');\n    }\n\n    rawToValue(raw) {\n        // console.log('DateField.rawToValue', this.getFullName(), raw);\n        const value = Helper.decodeValue(raw);\n        if (value && this.getAttr('timezone') === 'false') {\n            Helper.addTimezoneOffset(value);\n        }\n        // console.log('DateField.rawToValue:', raw, value);\n        return value;\n    }\n\n    valueToRaw(value) {\n        let rawValue;\n        if (value && this.getAttr('timezone') === 'false') {\n            const v = Helper.cloneDate(value);\n            Helper.removeTimezoneOffset(v);\n            rawValue = Helper.encodeValue(v);\n        } else {\n            rawValue = Helper.encodeValue(value);\n        }\n        // console.log('DateField.valueToRaw', rawValue);\n        return rawValue;\n    }\n}\nwindow.QForms.DateField = DateField;\n","class DateTimeField extends Field {\n    getFormat() {\n        return this.getAttr('format');\n    }\n    rawToValue(rawValue) {\n        const value = Helper.decodeValue(rawValue);\n        if (value && this.getAttr('timezone') === 'false') {\n            Helper.addTimezoneOffset(value);\n        }\n        // console.log('DateTimeField.rawToValue:', value);\n        return value;\n    }\n    valueToRaw(value) {\n        let rawValue;\n        if (value && this.getAttr('timezone') === 'false') {\n            const v = Helper.cloneDate(value);\n            Helper.removeTimezoneOffset(v);\n            // console.log('date without timezone:', v);\n            rawValue = Helper.encodeValue(v);\n        } else {\n            rawValue = Helper.encodeValue(value);\n        }\n        // console.log('DateTimeField.valueToRaw', rawValue);\n        return rawValue;\n    }\n}\nwindow.QForms.DateTimeField = DateTimeField;\n","class FileField extends Field {\n}\nwindow.QForms.FileField = FileField;\n","class ImageField extends Field {\n}\nwindow.QForms.ImageField = ImageField;\n","class LabelField extends Field {\n}\nwindow.QForms.LabelField = LabelField;\n","class LinkField extends Field {\n}\nwindow.QForms.LinkField = LinkField;\n","class PasswordField extends Field {\n\n}\nwindow.QForms.PasswordField = PasswordField;\n","class PhoneField extends Field {\n}\nwindow.QForms.PhoneField = PhoneField;\n","class RadioField extends Field {\n    getDisplayValue(row) {\n        const displayColumn = this.getAttr('displayColumn');\n        let value = null;\n        if (row[displayColumn]) {\n            try {\n                value = Helper.decodeValue(row[displayColumn]);\n            } catch (err) {\n                console.log('cannot parse:', row[displayColumn]);\n                throw err;\n            }\n        } else {\n            value = displayColumn;\n            value = value.replace(/\\{([\\w\\.]+)\\}/g, (text, name) => {\n                return row.hasOwnProperty(name) ? (row[name] || '') : text;\n            });\n        }\n        return value;\n    }\n\n    getValueValue(row) {\n        const valueColumn = this.getAttr('valueColumn');\n        if (!row[valueColumn]) {\n            throw new Error('no valueColumn in ComboBox data source');\n        }\n        return Helper.decodeValue(row[valueColumn]);\n    }\n\n    getDataSource() {\n        const name = this.getAttr('dataSourceName');\n        if (!name) throw new Error(`${this.getFullName()}: no dataSourceName`);\n        if (this.getForm().getDataSource(name)) {\n            return this.getForm().getDataSource(name);\n        }\n        if (this.getPage().getDataSource(name)) {\n            return this.getPage().getDataSource(name);\n        }\n        if (this.getApp().getDataSource(name)) {\n            return this.getApp().getDataSource(name);\n        }\n        throw new Error(`${this.getFullName()}: no data source: ${name}`);\n    }\n\n    findRowByRawValue(rawValue) {\n        const valueColumn = this.getAttr('valueColumn');\n        return this.getDataSource().getRows().find(row => row[valueColumn] === rawValue);\n    }\n}\n","class TextAreaField extends Field {\n    getRows() {\n        return this.data.rows;\n    }\n    getCols() {\n        return this.data.cols;\n    }\n}\nwindow.QForms.TextAreaField = TextAreaField;\n","class TextBoxField extends Field {\n\n}\nwindow.QForms.TextBoxField = TextBoxField;\n","class TimeField extends Field {\n\n}\nwindow.QForms.TimeField = TimeField;\n","class Form extends Model {\n    constructor(data, parent) {\n        super(data, parent);\n        this.dataSources = [];\n        this.fields      = [];\n    }\n\n    init() {\n        // data sources\n        this.createDataSources();\n\n        // fields\n        for (const data of this.data.fields) {\n            const Class = FrontHostApp.getClassByName(data.class);\n            if (!Class) throw new Error(`no class ${data.class} class`);\n            const field = new Class(data, this);\n            field.init();\n            this.fields.push(field);\n        }\n    }\n\n    deinit() {\n        // console.log('Form.deinit:', this.getFullName());\n        this.deinitDataSources();\n        for (const field of this.fields) {\n            field.deinit();\n        }\n        super.deinit();\n    }\n\n    fillDefaultValues(row) {\n        for (const field of this.fields) {\n            field.fillDefaultValue(row);\n        }\n    }\n\n    onDataSourceRefresh(e) {\n        // console.log('Form.onDataSourceRefresh', this.getFullName());\n        this.emit('refresh', e);\n    }\n\n    onDataSourceInsert(e) {\n        // console.log('Form.onDataSourceInsert', this.getFullName());\n        this.parent.onFormInsert(e);\n        this.emit('insert', e);\n    }\n\n    onDataSourceUpdate(e) {\n        // console.log('Form.onDataSourceUpdate', this.getFullName());\n        this.emit('update', e);\n    }\n\n    onDataSourceDelete(e) {\n        // console.log('Form.onDataSourceDelete', this.getFullName());\n        this.emit('delete', e);\n    }\n\n    async update() {\n        console.log('Form.update', this.getFullName(), this.isChanged());\n        if (this.getPage().deinited) throw new Error('page already deinited');\n        if (!this.isChanged() && !this.getDefaultDataSource().hasNewRows()) throw new Error(`form model not changed or does not have new rows: ${this.getFullName()}`);\n        await this.getDefaultDataSource().update();\n    }\n\n    isChanged() {\n        // console.log('Form.isChanged', this.getFullName());\n        return this.getDefaultDataSource().isChanged();\n    }\n\n    hasNew() {\n        // console.log('Form.hasNew', this.getFullName());\n        return this.getDefaultDataSource().hasNew();\n    }\n\n    async rpc(name, params) {\n        console.log('Form.rpc', this.getFullName(), name, params);\n        if (!name) throw new Error('no name');\n        const result = await this.getApp().request({\n            uuid  : this.getApp().getAttr('uuid'),\n            action: 'rpc',\n            page  : this.getPage().getName(),\n            form  : this.getName(),\n            name  : name,\n            params: params\n        });\n        if (result.errorMessage) throw new Error(result.errorMessage);\n        return result;\n    }\n\n    getKey() {\n        return null;\n    }\n\n    getDefaultDataSource() {\n        const dataSource = this.getDataSource('default');\n        if (!dataSource) throw new Error(`${this.getFullName()}: no default data source`);\n        return dataSource;\n    }\n\n    getPage() {\n        return this.parent;\n    }\n\n    getApp() {\n        return this.parent.parent;\n    }\n    async refresh() {\n        await this.getDefaultDataSource().refresh();\n    }\n    getField(name) {\n        return this.fields.find(field => field.getName() === name);\n    }\n    hasDefaultSqlDataSource() {\n        return this.getDefaultDataSource().getClassName() === 'SqlDataSource';\n    }\n    decodeRow(row) {\n        const values = {};\n        for (const field of this.fields) {\n            const column = field.getAttr('column');\n            if (column) {\n                values[column] = field.getValue(row);\n            }\n        }\n        return values;\n    }\n}\nwindow.QForms.Form = Form;\n","class RowForm extends Form {\n    init() {\n        super.init();\n        if (this.isNewMode()) {\n            this.getDefaultDataSource().newRow(this.createRow());\n        }\n        this.fillParams(this.getRow()); // dump row values to page params\n    }\n\n    isNewMode() {\n        const newMode = this.getAttr('newMode');\n        if (newMode ===  'true') return  true;\n        if (newMode === 'false') return false;\n        return this.getPage().isNewMode();\n    }\n\n    fillParams(row) {\n        for (const field of this.fields) {\n            field.valueToPageParams(row);\n        }\n    }\n\n    onDataSourceUpdate(e) {\n        this.fillParams(this.getRow());\n        super.onDataSourceUpdate(e);\n    }\n\n    onDataSourceInsert(e) {\n        this.fillParams(this.getRow());\n        super.onDataSourceInsert(e);\n    }\n\n    getRow(withChanges) {\n        return this.getDefaultDataSource().getSingleRow(withChanges);\n    }\n\n    getKey() {\n        // console.log('RowForm.getKey', this.getFullName());\n        const dataSource = this.getDefaultDataSource();\n        if (dataSource.getClassName() === 'SqlDataSource') {\n            const row = this.getRow();\n            return dataSource.getRowKey(row);\n        }\n        return null;\n    }\n\n    createRow() {\n        const row = {};\n        this.fillDefaultValues(row);\n        return row;\n    }\n\n    discard(fields) {\n        console.log('RowForm.discard', fields);\n        if (this.getDefaultDataSource().isChanged()) {\n            this.getDefaultDataSource().discard();\n            fields.forEach(name => {\n                this.getField(name).valueToPageParams(this.getRow())\n            });\n        }\n    }\n\n}\nwindow.QForms.RowForm = RowForm;\n","class TableForm extends Form {\n\n}\nwindow.QForms.TableForm = TableForm;\n","class Page extends Model {\n    constructor(data, parent, options) {\n        // console.log('Page.constructor', options);\n        // if (!options.id) throw new Error('no page id');\n        super(data, parent);\n        this.options     = options; // {id, modal, newMode, selectMode, params}\n        this.dataSources = [];\n        this.forms       = [];\n        this.params      = {};\n        if (options.onCreate) {\n            options.onCreate(this);\n        }\n    }\n\n    init() {\n        this.createDataSources();\n        this.createForms();\n        console.log('page options:', this.options);\n        console.log('page params:', this.getParams());\n    }\n\n    deinit() {\n        // console.log('Page.deinit', this.getFullName());\n        if (this.deinited) throw new Error(`page ${this.getFullName()} is already deinited`);\n        this.deinitDataSources();\n        this.deinitForms();\n        super.deinit();\n    }\n\n    getOptions() {\n        return this.options;\n    }\n\n    createForms() {\n        // forms\n        for (const data of this.data.forms) {\n            const FormClass = FrontHostApp.getClassByName(Model.getClassName(data));\n            const form = new FormClass(data, this);\n            form.init();\n            this.forms.push(form);\n        }\n    }\n\n    deinitForms() {\n        for (const form of this.forms) {\n            form.deinit();\n        }\n    }\n\n    /*getId() {\n        return this.options.id;\n    }*/\n\n    getParams() {\n        return {\n            ...(this.options.params || {}),\n            ...this.params,\n        };\n    }\n\n    setParam(name, value) {\n        // console.log('Page.setParam', name);\n        this.params[name] = value !== undefined ? value : null;\n    }\n\n    async update() {\n        console.log('Page.update', this.getFullName());\n        for (const form of this.forms) {\n            if (form.isChanged() || form.hasNew()) {\n                await form.update();\n            }\n        }\n    }\n\n    discard() {\n        console.log('Page.discard', this.getFullName());\n        for (const form of this.forms) {\n            form.discard();\n        }\n    }\n\n    getKey() {\n        for (const form of this.forms) {\n            if (form.getClassName() === 'RowForm') {\n                return form.getKey();\n            }\n        }\n        return null;\n    }\n\n    hasRowFormWithDefaultDs() {\n        for (const form of this.forms) {\n            if (form.getClassName() === 'RowForm' && form.getDefaultDataSource()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    hasRowFormWithDefaultSqlDataSource() {\n        for (const form of this.forms) {\n            if (form.getClassName() === 'RowForm' && form.hasDefaultSqlDataSource()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    hasRowForm() {\n        for (const form of this.forms) {\n            if (form.getClassName() === 'RowForm' && form.getAttr('visible') === 'true') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    hasTableForm() {\n        for (const form of this.forms) {\n            if (form.getClassName() === 'TableForm' && form.getAttr('visible') === 'true') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    isNewMode() {\n        return !!this.options.newMode;\n    }\n\n    hasNew() {\n        for (const form of this.forms) {\n            if (form.hasNew()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    getApp() {\n        return this.parent;\n    }\n\n    isModal() {\n        return !!this.options.modal;\n    }\n\n    onFormInsert(e) {\n        console.log('Page.onFormInsert', e);\n        for (const key of e.inserts) {\n            const keyParams = DataSource.keyToParams(key);// key params to page params\n            for (const name in keyParams) {\n                this.setParam(name, keyParams[name]);\n            }\n        }\n    }\n    async rpc(name, params) {\n        // console.log('Page.rpc', this.getFullName(), name, params);\n        if (!name) throw new Error('no name');\n        const result =  await this.getApp().request({\n            uuid  : this.getApp().getAttr('uuid'),\n            action: 'rpc',\n            page  : this.getName(),\n            name  : name,\n            params: params\n        });\n        if (result.errorMessage) throw new Error(result.errorMessage);\n        return result;\n    }\n    getForm(name) {\n        return this.forms.find(form => form.getName() === name);\n    }\n    isSelectMode() {\n        return !!this.options.selectMode;\n    }\n}\nwindow.QForms.Page = Page;\n","class Table extends Model {\n    constructor(data, parent) {\n        super(data, parent);\n        this.columns = [];\n    }\n    init() {\n        // console.log('Table.init', this.getFullName());\n        for (const data of this.data.columns) {\n            const column = new Column(data, this);\n            column.init();\n            this.addColumn(column);\n        }\n    }\n    addColumn(column) {\n        this.columns.push(column);\n    }\n    getColumn(name) {\n        const column = this.columns.find(column => column.getName() === name);\n        if (!column) throw new Error(`table ${this.getFullName()}: no column ${name}`);\n        return column;\n    }\n    emitResult(result, source = null) {\n        console.log('Table.emitResult');\n        return [\n            ...(result.insert  ? [this.emitInsert(source, result.insert)] : []),\n            ...(result.update  ? [this.emitUpdate(source, result.update)] : []),\n            ...(result.delete  ? [this.emitDelete(source, result.delete)] : []),\n            ...(result.refresh ? [this.emitRefresh(source              )] : [])\n        ];\n    }\n    emitInsert(source, inserts) {\n        return this.emit('insert', {source, inserts});\n    }\n    emitUpdate(source, updates) {\n        return this.emit('update', {source, updates});\n    }\n    emitDelete(source, deletes) {\n        return this.emit('delete', {source, deletes});\n    }\n    emitRefresh(source) {\n        return this.emit('refresh', {source});\n    }\n}\nwindow.QForms.Table = Table;\n"]}