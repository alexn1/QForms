class IndexFrontHostApp{constructor(e){console.log("IndexFrontHostApp.constructor",e),this.data=e,this.view=null,this.currentAppFullName=void 0,this.currentAppEnv=void 0,this.modals=[],this.folderNameTextBox=null,this.folderName=null,this.appName=null}init(){var e=this.data.appInfos[0];this.currentAppFullName=e?e.fullName:void 0,this.currentAppEnv=e&&e.envs[0]?e.envs[0]:void 0,this.createView(document.querySelector("#root"))}createView(e){this.view=Helper.createReactComponent(e,IndexView,{ctrl:this})}getAppItems(){return this.data.appInfos.map(e=>({value:e.fullName,title:e.fullName}))}getEnvItems(){if(this.currentAppFullName){const e=this.getAppInfo(this.currentAppFullName);if(e)return e.envs.map(e=>({value:e,title:e}))}return[]}getAppInfo(t){return this.data.appInfos.find(e=>e.fullName===t)}onAppChange=t=>{console.log("IndexFrontHostApp.onAppChange",t),this.currentAppFullName=t;var e=this.data.appInfos.find(e=>e.fullName===t);if(!e)throw new Error("no appInfo "+t);this.currentAppEnv=e.envs[0],this.view.rerender()};onEnvChange=e=>{console.log("IndexFrontHostApp.onEnvChange",e),this.currentAppEnv=e};run=e=>{var t;this.currentAppFullName&&(t=`viewer/${this.currentAppFullName}/${this.currentAppEnv}/`,console.log("href:",t),window.location.href=t)};edit=e=>{var t;this.currentAppFullName&&(t=`editor/${this.currentAppFullName}/${this.currentAppEnv}/`,console.log("href:",t),window.location.href=t)};btnCreate_Click=async e=>{this.modals.push({id:1}),await this.view.rerender(),this.folderNameTextBox.getElement().focus()};async createApp(e,t){var o=await FrontHostApp.doHttpRequest({action:"new",folder:e,name:t});console.log("data:",o),o.appInfos&&(this.data.appInfos=o.appInfos,this.currentAppFullName=e+"/"+t,this.view.rerender())}closeModal=()=>{console.log("IndexFrontHostApp.closeModal"),this.modals.pop(),this.view.rerender()};onFolderNameCreate=e=>{console.log("IndexFrontHostApp.onFolderNameCreate"),this.folderNameTextBox=e};onFolderNameChange=e=>{this.folderName=e};onAppNameChange=e=>{this.appName=e};onCreateClick=async e=>{console.log("IndexFrontHostApp.onCreateClick"),console.log(this.folderName,this.appName),this.closeModal(),await this.createApp(this.folderName,this.appName)}}
//# sourceMappingURL=index.cec422ea199f9b190d27fa847e82ad7d.js.map
